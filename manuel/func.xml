<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- $Header: /var/lib/cvs/pgsql-fr/sgml/func.sgml,v 1.24 2005/10/02 12:42:20 guillaume Exp $ -->
<!-- SAS : 20070921, PG825 -->

 <chapter id="functions">
  <title>Fonctions et op�rateurs</title>

  <indexterm zone="functions">
   <primary>fonction</primary>
  </indexterm>

  <indexterm zone="functions">
   <primary>op�rateur</primary>
  </indexterm>

  <para>
   <productname>PostgreSQL</productname> fournit un grand nombre de fonctions
   et d'op�rateurs pour les types de donn�es int�gr�s. Les utilisateurs peuvent
   aussi d�finir leurs propres fonctions et op�rateurs comme d�crit dans
   la <xref linkend="server-programming"/>.
  </para>
  <para>
   Les commandes <command>\df</command> et
   <command>\do</command> de <application>psql</application> sont utilis�es
   pour afficher respectivement la liste des fonctions et des
   op�rateurs.
  </para>

  <para>
   Lorsque l'on consid�re la portabilit�, il est important de savoir que la
   plupart des fonctions et op�rateurs d�crits dans ce chapitre, � l'exception des op�rateurs
   arithm�tiques et logiques les plus triviaux et de quelques fonctions
   sp�cifiquement indiqu�es, ne font pas partie du standard
   <acronym>SQL</acronym>. Quelques fonctionnalit�s �tendues sont
   pr�sentes dans d'autres syst�mes de gestion de bases de donn�es
   <acronym>SQL</acronym> et dans la plupart des cas, ces fonctionnalit�s sont
   compatibles et coh�rentes � de nombreuses implantations. Ce chapitre n'est
   pas exhaustif&nbsp;; des fonctions suppl�mentaires apparaissent dans les
   sections ad�quates du manuel.
  </para>


  <sect1 id="functions-logical">
   <title>Op�rateurs logiques</title>

   <indexterm zone="functions-logical">
    <primary>op�rateur</primary>
    <secondary>logique</secondary>
   </indexterm>

   <indexterm>
    <primary>bool�en</primary>
    <secondary>op�rateurs</secondary>
    <see>op�rateurs, logique</see>
   </indexterm>

   <para>
    Op�rateurs logiques habituels&nbsp;:

    <indexterm>
     <primary>AND (op�rateur)</primary>
    </indexterm>

    <indexterm>
     <primary>OR (op�rateur)</primary>
    </indexterm>

    <indexterm>
     <primary>NOT (op�rateur)</primary>
    </indexterm>

    <indexterm>
     <primary>conjonction</primary>
    </indexterm>

    <indexterm>
     <primary>disjonction</primary>
    </indexterm>

    <indexterm>
     <primary>n�gation</primary>
    </indexterm>

    <simplelist>
     <member><literal>AND</literal></member>
     <member><literal>OR</literal></member>
     <member><literal>NOT</literal></member>
    </simplelist>

    <acronym>SQL</acronym> utilise une logique bool�enne � trois valeurs dans
    laquelle la valeur NULL repr�sente <quote>inconnu</quote>. Les tables de
     v�rit� � consid�rer sont les suivantes&nbsp;:

    <informaltable>
     <tgroup cols="4">
      <thead>
       <row>
        <entry><replaceable>a</replaceable></entry>
        <entry><replaceable>b</replaceable></entry>
        <entry><replaceable>a</replaceable> AND
<replaceable>b</replaceable></entry>
        <entry><replaceable>a</replaceable> OR
<replaceable>b</replaceable></entry>
       </row>
      </thead>

      <tbody>
       <row>
        <entry>TRUE</entry>
        <entry>TRUE</entry>
        <entry>TRUE</entry>
        <entry>TRUE</entry>
       </row>

       <row>
        <entry>TRUE</entry>
        <entry>FALSE</entry>
        <entry>FALSE</entry>
        <entry>TRUE</entry>
       </row>

       <row>
        <entry>TRUE</entry>
        <entry>NULL</entry>
        <entry>NULL</entry>
        <entry>TRUE</entry>
       </row>

       <row>
        <entry>FALSE</entry>
        <entry>FALSE</entry>
        <entry>FALSE</entry>
        <entry>FALSE</entry>
       </row>

       <row>
        <entry>FALSE</entry>
        <entry>NULL</entry>
        <entry>FALSE</entry>
        <entry>NULL</entry>
       </row>

       <row>
        <entry>NULL</entry>
        <entry>NULL</entry>
        <entry>NULL</entry>
        <entry>NULL</entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>

    <informaltable>
     <tgroup cols="2">
      <thead>
       <row>
        <entry><replaceable>a</replaceable></entry>
        <entry>NOT <replaceable>a</replaceable></entry>
       </row>
      </thead>

      <tbody>
       <row>
        <entry>TRUE</entry>
        <entry>FALSE</entry>
       </row>

       <row>
        <entry>FALSE</entry>
        <entry>TRUE</entry>
       </row>

       <row>
        <entry>NULL</entry>
        <entry>NULL</entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </para>

   <para>
    Les op�rateurs <literal>AND</literal> et <literal>OR</literal> sont
    commutatifs, c'est-�-dire que l'�change des op�randes gauche et
    droit n'affecte pas le r�sultat. Voir la <xref
    linkend="syntax-express-eval"/> pour plus d'informations sur l'ordre
    d'�valuation des sous-expressions.
   </para>
  </sect1>

  <sect1 id="functions-comparison">
   <title>Op�rateurs de comparaison</title>

   <indexterm zone="functions-comparison">
    <primary>comparaison</primary>
    <secondary>op�rateurs</secondary>
   </indexterm>

   <para>
    Les op�rateurs de comparaison habituels sont disponibles, comme l'indique
    le <xref linkend="functions-comparison-table"/>.
   </para>

   <table id="functions-comparison-table">
    <title>Op�rateurs de comparaison</title>
    <tgroup cols="2">
     <thead>
      <row>
       <entry>Op�rateur</entry>
       <entry>Description</entry>
      </row>
     </thead>

     <tbody>
      <row>
       <entry><literal>&lt;</literal> </entry>
       <entry>inf�rieur �</entry>
      </row>

      <row>
       <entry><literal>&gt;</literal> </entry>
       <entry>sup�rieur �</entry>
      </row>

      <row>
       <entry><literal>&lt;=</literal> </entry>
       <entry>inf�rieur ou �gal �</entry>
      </row>

      <row>
       <entry><literal>&gt;=</literal> </entry>
       <entry>sup�rieur ou �gal �</entry>
      </row>

      <row>
       <entry><literal>=</literal> </entry>
       <entry>�gal �</entry>
      </row>

      <row>
       <entry><literal>&lt;&gt;</literal> ou <literal>!=</literal> </entry>
       <entry>diff�rent de</entry>
      </row>
     </tbody>
    </tgroup>
   </table>

   <note>
    <para>
     L'op�rateur <literal>!=</literal> est converti en
     <literal>&lt;&gt;</literal> au moment de l'analyse. Il n'est pas possible
     d'implanter des op�rateurs <literal>!=</literal> et
     <literal>&lt;&gt;</literal> r�alisant des op�rations diff�rentes.
    </para>
   </note>

   <para>
    Les op�rateurs de comparaison sont disponibles pour tous les types de
    donn�es pour lesquels cela a du sens. Tous les op�rateurs de comparaison sont des
    op�rateurs binaires renvoyant des valeurs du type <type>boolean</type>&nbsp;;
    des expressions comme <literal>1 &lt; 2 &lt; 3</literal> ne sont pas valides
    (car il n'existe pas d'op�rateur <literal>&lt;</literal> de comparaison d'une
    valeur bool�enne avec <literal>3</literal>).
   </para>

   <para>
    <indexterm>
     <primary>entre</primary>
     <primary>between</primary>
    </indexterm>
    En plus des op�rateurs de comparaison, on trouve la construction sp�ciale
    <token>BETWEEN</token>.
<synopsis><replaceable>a</replaceable> BETWEEN <replaceable>x</replaceable> AND <replaceable>y</replaceable></synopsis>
    est �quivalent �
<synopsis><replaceable>a</replaceable> &gt;= <replaceable>x</replaceable> AND <replaceable>a</replaceable> &lt;= <replaceable>y</replaceable></synopsis>
    De m�me,
<synopsis><replaceable>a</replaceable> NOT BETWEEN <replaceable>x</replaceable> AND <replaceable>y</replaceable></synopsis>
    est �quivalent �
<synopsis><replaceable>a</replaceable> &lt; <replaceable>x</replaceable> OR <replaceable>a</replaceable> &gt; <replaceable>y</replaceable></synopsis>
    Il n'y a pas de diff�rence entre les deux formes respectives si ce n'est
    les cycles <acronym>CPU</acronym> requis pour r�-�crire en interne la
    premi�re sous la forme de la seconde.
    <indexterm>
     <primary>BETWEEN SYMMETRIC</primary>
    </indexterm>
    <token>BETWEEN SYMMETRIC</token> est identique � <literal>BETWEEN</literal> sauf qu'il
    n'est pas n�cessaire que l'argument � gauche de <literal>AND</literal> soit plus
    petit ou �gal � l'argument � sa droite&nbsp;; la bonne �chelle de valeurs
    est d�termin�e automatiquement.
   </para>

   <para>
   <indexterm>
     <primary>IS NULL</primary>
   </indexterm>
   <indexterm>
     <primary>IS NOT NULL</primary>
   </indexterm>
   <indexterm>
     <primary>ISNULL</primary>
   </indexterm>
   <indexterm>
     <primary>NOTNULL</primary>
   </indexterm>
    Pour v�rifier si une valeur est NULL ou non, on utilise les constructions
<synopsis><replaceable>expression</replaceable> IS NULL
<replaceable>expression</replaceable> IS NOT NULL</synopsis>
    ou la construction �quivalente, non standard,
<synopsis><replaceable>expression</replaceable> ISNULL
<replaceable>expression</replaceable> NOTNULL</synopsis>
    <indexterm><primary>valeur NULL</primary><secondary>comparaison</secondary></indexterm>
   </para>

   <para>
    On <emphasis>ne</emphasis> peut <emphasis>pas</emphasis> �crire
    <literal><replaceable>expression</replaceable> = NULL</literal>
    parce que <literal>NULL</literal> n'est pas <quote>�gal �</quote>
    <literal>NULL</literal> (la valeur NULL repr�sente une valeur inconnue
    et il est impossible de dire si deux valeurs inconnues sont �gales). Ce
    comportement est conforme au standard SQL.
   </para>

   <tip>
   <para>
    Il se peut que des applications s'attendent � voir 
    <literal><replaceable>expression</replaceable> = NULL</literal>
    �valu�e � vrai (<foreignphrase>true</foreignphrase>) si <replaceable>expression</replaceable> s'�value comme
    la valeur NULL. Il est chaudement recommand� que ces applications
    soient modifi�es pour se conformer au standard SQL. N�anmoins, si cela
    n'est pas possible, le param�tre de configuration <xref
    linkend="guc-transform-null-equals"/> peut �tre utilis�. S'il est activ�,
    <productname>PostgreSQL</productname> convertit les clauses <literal>x =
    NULL</literal> en <literal>x IS NULL</literal>. Tel �tait le comportement par
    d�faut dans les versions 6.5 � 7.1 de <productname>PostgreSQL</productname>.
   </para>
   </tip>

  <note>
   <para>
    Si l'<replaceable>expression</replaceable> est une valeur de ligne, alors
    <literal>IS NULL</literal> est vrai quand l'expression m�me de la ligne est
    NULL ou quand tous les champs de la ligne sont NULL alors que
    <literal>IS NOT NULL</literal> est vrai quand l'expression m�me de la ligne est
    non NULL et que tous les champs de la ligne sont non NULL.
    Cette d�finition, conforme au standard SQL, est un changement du
    comportement incoh�rent des versions de <productname>PostgreSQL</productname>
    ant�rieures � la 8.2.
   </para>
  </note>

   <para>
   <indexterm>
     <primary>IS DISTINCT FROM</primary>
   </indexterm>
   <indexterm>
     <primary>IS NOT DISTINCT FROM</primary>
   </indexterm>
    L'op�rateur standard de comparaison renvoie NULL (ce qui signifie
    <quote>inconnu</quote>) si l'une des entr�es est NULL. Une autre fa�on
    d'effectuer les comparaisons utilise la syntaxe <literal>IS <optional>NOT</optional> DISTINCT FROM</literal>&nbsp;:
<synopsis>
<replaceable>expression</replaceable> IS DISTINCT FROM <replaceable>expression</replaceable>
<replaceable>expression</replaceable> IS NOT DISTINCT FROM <replaceable>expression</replaceable>
</synopsis>
    Pour des entr�es non NULL, <literal>IS DISTINCT FROM</literal> est
    identique � l'op�rateur <literal>&lt;&gt;</literal>. Cependant, si les deux entr�es
    sont NULL, alors cela retourne faux et si une des deux entr�es est NULL,
    alors cela retourne vrai. De la m�me fa�on, <literal>IS NOT DISTINCT
    FROM</literal> est identique � <literal>=</literal> pour les entr�es non NULL
    mais il renvoie true si les deux entr�es sont NULL et false quand une seule
    est NULL. Dans ces constructions, NULL n'est plus consid�r� comme
    un �tat inconnu mais comme une valeur.
   </para>

   <para>
   <indexterm>
     <primary>IS TRUE</primary>
   </indexterm>
   <indexterm>
     <primary>IS NOT TRUE</primary>
   </indexterm>
   <indexterm>
     <primary>IS FALSE</primary>
   </indexterm>
   <indexterm>
     <primary>IS NOT FALSE</primary>
   </indexterm>
   <indexterm>
     <primary>IS UNKNOWN</primary>
   </indexterm>
   <indexterm>
     <primary>IS NOT UNKNOWN</primary>
   </indexterm>
    Les valeurs bool�ennes peuvent aussi �tre test�es en utilisant les
    constructions
<synopsis><replaceable>expression</replaceable> IS TRUE
<replaceable>expression</replaceable> IS NOT TRUE
<replaceable>expression</replaceable> IS FALSE
<replaceable>expression</replaceable> IS NOT FALSE
<replaceable>expression</replaceable> IS UNKNOWN
<replaceable>expression</replaceable> IS NOT UNKNOWN</synopsis>
    Elles retournent toujours true ou false, jamais une valeur NULL, m�me si
    l'op�rande est NULL. Une entr�e NULL est trait�e comme la valeur logique
    <quote>inconnue</quote>. <literal>IS UNKNOWN</literal> et <literal>IS
    NOT UNKNOWN</literal> sont r�ellement identiques � <literal>IS NULL</literal> et
    <literal>IS NOT NULL</literal>, respectivement, sauf que l'expression en
    entr�e doit �tre de type bool�en.
   </para>
  </sect1>

  <sect1 id="functions-math">
   <title>Fonctions et op�rateurs math�matiques</title>

   <para>
    Des op�rateurs math�matiques sont fournis pour un grand nombre de types
    <productname>PostgreSQL</productname>. Pour les types sans convention
    math�matique commune � toutes les permutations possibles (les types
    dates/time, par exemple), le comportement r�el est d�crit dans les
    sections appropri�es.
   </para>

   <para>
    Le <xref linkend="functions-math-op-table"/> affiche les op�rateurs
    math�matiques disponibles.
   </para>

   <table id="functions-math-op-table">
    <title>Op�rateurs math�matiques</title>

    <tgroup cols="4">
     <colspec colnum="1" colwidth="1*"/>
     <colspec colnum="2" colwidth="2*"/>
     <colspec colnum="3" colwidth="1*"/>
     <colspec colnum="4" colwidth="1*"/>
     <thead>
      <row>
       <entry>Op�rateur</entry>
       <entry>Description</entry>
       <entry>Exemple</entry>
       <entry>R�sultat</entry>
      </row>
     </thead>

     <tbody>
      <row>
       <entry><literal>+</literal> </entry>
       <entry>addition</entry>
       <entry><literal>2 + 3</literal></entry>
       <entry><literal>5</literal></entry>
      </row>

      <row>
       <entry><literal>-</literal> </entry>
       <entry>soustraction</entry>
       <entry><literal>2 - 3</literal></entry>
       <entry><literal>-1</literal></entry>
      </row>

      <row>
       <entry><literal>*</literal> </entry>
       <entry>multiplication</entry>
       <entry><literal>2 * 3</literal></entry>
       <entry><literal>6</literal></entry>
      </row>

      <row>
       <entry><literal>/</literal> </entry>
       <entry>division (la division enti�re tronque les r�sultats)</entry>
       <entry><literal>4 / 2</literal></entry>
       <entry><literal>2</literal></entry>
      </row>

      <row>
       <entry><literal>%</literal> </entry>
       <entry>modulo (reste)</entry>
       <entry><literal>5 % 4</literal></entry>
       <entry><literal>1</literal></entry>
      </row>

      <row>
       <entry><literal>^</literal> </entry>
       <entry>exponentiel</entry>
       <entry><literal>2.0 ^ 3.0</literal></entry>
       <entry><literal>8</literal></entry>
      </row>

      <row>
       <entry><literal>|/</literal> </entry>
       <entry>racine carr�e</entry>
       <entry><literal>|/ 25.0</literal></entry>
       <entry><literal>5</literal></entry>
      </row>

      <row>
       <entry><literal>||/</literal> </entry>
       <entry>racine cubique</entry>
       <entry><literal>||/ 27.0</literal></entry>
       <entry><literal>3</literal></entry>
      </row>

      <row>
       <entry><literal>!</literal> </entry>
       <entry>factoriel</entry>
       <entry><literal>5 !</literal></entry>
       <entry><literal>120</literal></entry>
      </row>

      <row>
       <entry><literal>!!</literal> </entry>
       <entry>factoriel (op�rateur pr�fixe)</entry>
       <entry><literal>!! 5</literal></entry>
       <entry><literal>120</literal></entry>
      </row>

      <row>
       <entry><literal>@</literal> </entry>
       <entry>valeur absolue</entry>
       <entry><literal>@ -5.0</literal></entry>
       <entry><literal>5</literal></entry>
      </row>

      <row>
       <entry><literal>&amp;</literal> </entry>
       <entry>AND bit � bit</entry>
       <entry><literal>91 &amp; 15</literal></entry>
       <entry><literal>11</literal></entry>
      </row>

      <row>
       <entry><literal>|</literal> </entry>
       <entry>OR bit � bit</entry>
       <entry><literal>32 | 3</literal></entry>
       <entry><literal>35</literal></entry>
      </row>

      <row>
       <entry><literal>#</literal> </entry>
       <entry>XOR bit � bit</entry>
       <entry><literal>17 # 5</literal></entry>
       <entry><literal>20</literal></entry>
      </row>

      <row>
       <entry><literal>~</literal> </entry>
       <entry>NOT bit � bit</entry>
       <entry><literal>~1</literal></entry>
       <entry><literal>-2</literal></entry>
      </row>

      <row>
       <entry><literal>&lt;&lt;</literal> </entry>
       <entry>d�calage gauche</entry>
       <entry><literal>1 &lt;&lt; 4</literal></entry>
       <entry><literal>16</literal></entry>
      </row>

      <row>
       <entry><literal>&gt;&gt;</literal> </entry>
       <entry>d�calage droit</entry>
       <entry><literal>8 &gt;&gt; 2</literal></entry>
       <entry><literal>2</literal></entry>
      </row>

     </tbody>
    </tgroup>
   </table>

   <para>
    Les op�rateurs bits � bits ne fonctionnent que sur les types de donn�es
    entiers alors que les autres sont disponibles pour tous les types de
    donn�es num�riques. Les op�rateurs bit par bit sont aussi disponibles pour
    les types de cha�nes de bits <type>bit</type> et <type>bit varying</type>
    comme le montre le <xref linkend="functions-bit-string-op-table"/>.
   </para>

  <para>
   Le <xref linkend="functions-math-func-table"/> affiche les fonctions
   math�matiques disponibles. Dans ce tableau, <literal>dp</literal>
   signifie <type>double precision</type>. Beaucoup de ces fonctions sont
   fournies dans de nombreuses formes avec diff�rents types d'argument.
   Sauf lorsque c'est indiqu�, toute forme donn�e d'une fonction renvoie le
   m�me type de donn�es que son argument.
   Les fonctions utilisant des donn�es de type <type>double
   precision</type> sont pour la plupart implant�es avec la biblioth�que C du
   syst�me h�te&nbsp;; la pr�cision et le comportement dans les cas
   particuliers peuvent varier en fonction du syst�me h�te.
  </para>

   <indexterm>
    <primary>abs</primary>
   </indexterm>
   <indexterm>
    <primary>cbrt</primary>
   </indexterm>
   <indexterm>
    <primary>ceiling</primary>
   </indexterm>
   <indexterm>
    <primary>degrees</primary>
   </indexterm>
   <indexterm>
    <primary>exp</primary>
   </indexterm>
   <indexterm>
    <primary>floor</primary>
   </indexterm>
   <indexterm>
    <primary>ln</primary>
   </indexterm>
   <indexterm>
    <primary>log</primary>
   </indexterm>
   <indexterm>
    <primary>mod</primary>
   </indexterm>
   <indexterm>
    <primary>&pi;</primary>
   </indexterm>
   <indexterm>
    <primary>power</primary>
   </indexterm>
   <indexterm>
    <primary>radians</primary>
   </indexterm>
   <indexterm>
    <primary>random</primary>
   </indexterm>
   <indexterm>
    <primary>round</primary>
   </indexterm>
   <indexterm>
    <primary>setseed</primary>
   </indexterm>
   <indexterm>
    <primary>sign</primary>
   </indexterm>
   <indexterm>
    <primary>sqrt</primary>
   </indexterm>
   <indexterm>
    <primary>trunc</primary>
   </indexterm>
   <indexterm>
    <primary>width_bucket</primary>
   </indexterm>

   <table id="functions-math-func-table">
    <title>Fonctions math�matiques</title>
    <tgroup cols="5">
     <colspec colnum="1" colwidth="0.7*"/>
     <colspec colnum="2" colwidth="1*"/>
     <colspec colnum="3" colwidth="1.3*"/>
     <colspec colnum="4" colwidth="1*"/>
     <colspec colnum="5" colwidth="1*"/>
     <thead>
      <row>
       <entry>Fonction</entry>
       <entry>Type renvoy�</entry>
       <entry>Description</entry>
       <entry>Exemple</entry>
       <entry>R�sultat</entry>
      </row>
     </thead>

     <tbody>
      <row>
      
<entry><literal><function>abs</function>(<replaceable>x</replaceable>)</literal></entry>
       <entry>(identique � <replaceable>x</replaceable>)</entry>
       <entry>valeur absolue</entry>
       <entry><literal>abs(-17.4)</literal></entry>
       <entry><literal>17.4</literal></entry>
      </row>

      <row>
      
<entry><literal><function>cbrt</function>(<type>dp</type>)</literal></entry>
       <entry><type>dp</type></entry>
       <entry>racine cubique</entry>
       <entry><literal>cbrt(27.0)</literal></entry>
       <entry><literal>3</literal></entry>
      </row>

      <row>
       <entry><literal><function>ceil</function>(<type>dp</type> ou
<type>numeric</type>)</literal></entry>
       <entry>(identique � l'argument)</entry>
       <entry>plus petit entier sup�rieur � l'argument</entry>
       <entry><literal>ceil(-42.8)</literal></entry>
       <entry><literal>-42</literal></entry>
      </row>


      <row>
       <entry><literal><function>ceiling</function>(<type>dp</type> ou <type>numeric</type>)</literal></entry>
       <entry>(identique � l'argument)</entry>
       <entry>plus petit entier sup�rieur � l'argument (alias de
         <function>ceil</function>)</entry>
       <entry><literal>ceiling(-95.3)</literal></entry>
       <entry><literal>-95</literal></entry>
      </row>

      <row>
<entry><literal><function>degrees</function>(<type>dp</type>)</literal></entry>
       <entry><type>dp</type></entry>
       <entry>radians vers degr�s</entry>
       <entry><literal>degrees(0.5)</literal></entry>
       <entry><literal>28.6478897565412</literal></entry>
      </row>

      <row>
       <entry><literal><function>exp</function>(<type>dp</type> ou
<type>numeric</type>)</literal></entry>
       <entry>(identique � l'argument)</entry>
       <entry>exponentiel</entry>
       <entry><literal>exp(1.0)</literal></entry>
       <entry><literal>2.71828182845905</literal></entry>
      </row>

      <row>
       <entry><literal><function>floor</function>(<type>dp</type> ou
<type>numeric</type>)</literal></entry>
       <entry>(identique � l'argument)</entry>
       <entry>plus grand entier inf�rieur � l'argument</entry>
       <entry><literal>floor(-42.8)</literal></entry>
       <entry><literal>-43</literal></entry>
      </row>

      <row>
       <entry><literal><function>ln</function>(<type>dp</type> ou
<type>numeric</type>)</literal></entry>
       <entry>(identique � l'argument)</entry>
       <entry>logarithme</entry>
       <entry><literal>ln(2.0)</literal></entry>
       <entry><literal>0.693147180559945</literal></entry>
      </row>

      <row>
       <entry><literal><function>log</function>(<type>dp</type> ou
<type>numeric</type>)</literal></entry>
       <entry>(identique � l'argument)</entry>
       <entry>logarithme base 10</entry>
       <entry><literal>log(100.0)</literal></entry>
       <entry><literal>2</literal></entry>
      </row>

      <row>
       <entry><literal><function>log</function>(<parameter>b</parameter>
<type>numeric</type>,
        <parameter>x</parameter> <type>numeric</type>)</literal></entry>
       <entry><type>numeric</type></entry>
       <entry>logarithme en base <parameter>b</parameter></entry>
       <entry><literal>log(2.0, 64.0)</literal></entry>
       <entry><literal>6.0000000000</literal></entry>
      </row>

      <row>
       <entry><literal><function>mod</function>(<parameter>y</parameter>,
        <parameter>x</parameter>)</literal></entry>
       <entry>(identique au type des arguments)</entry>
       <entry>reste de
<parameter>y</parameter>/<parameter>x</parameter></entry>
       <entry><literal>mod(9,4)</literal></entry>
       <entry><literal>1</literal></entry>
      </row>

      <row>
       <entry><literal><function>pi</function>()</literal></entry>
       <entry><type>dp</type></entry>
       <entry>constante <quote>&pi;</quote></entry>
       <entry><literal>pi()</literal></entry>
       <entry><literal>3.14159265358979</literal></entry>
      </row>

      <row>
       <entry><literal><function>power</function>(<parameter>a</parameter>
<type>dp</type>,
        <parameter>b</parameter> <type>dp</type>)</literal></entry>
       <entry><type>dp</type></entry>
       <entry><parameter>a</parameter> �lev� � la puissance
<parameter>b</parameter></entry>
       <entry><literal>power(9.0, 3.0)</literal></entry>
       <entry><literal>729</literal></entry>
      </row>

      <row>
       <entry><literal><function>power</function>(<parameter>a</parameter>
<type>numeric</type>,
        <parameter>b</parameter> <type>numeric</type>)</literal></entry>
       <entry><type>numeric</type></entry>
       <entry><parameter>a</parameter> �lev� � la puissance
<parameter>b</parameter></entry>
       <entry><literal>power(9.0, 3.0)</literal></entry>
       <entry><literal>729</literal></entry>
      </row>

      <row>
      
<entry><literal><function>radians</function>(<type>dp</type>)</literal></entry>
       <entry><type>dp</type></entry>
       <entry>degr�s vers radians</entry>
       <entry><literal>radians(45.0)</literal></entry>
       <entry><literal>0.785398163397448</literal></entry>
      </row>

      <row>
       <entry><literal><function>random</function>()</literal></entry>
       <entry><type>dp</type></entry>
       <entry>valeur au hasard entre 0.0 et 1.0</entry>
       <entry><literal>random()</literal></entry>
       <entry></entry>
      </row>

      <row>
       <entry><literal><function>round</function>(<type>dp</type> ou
<type>numeric</type>)</literal></entry>
       <entry>(identique � l'argument)</entry>
       <entry>arrondi � l'entier le plus proche</entry>
       <entry><literal>round(42.4)</literal></entry>
       <entry><literal>42</literal></entry>
      </row>

      <row>
       <entry><literal><function>round</function>(<parameter>v</parameter>
<type>numeric</type>, <parameter>s</parameter>
<type>int</type>)</literal></entry>
       <entry><type>numeric</type></entry>
       <entry>arrondi pour <parameter>s</parameter> d�cimales</entry>
       <entry><literal>round(42.4382, 2)</literal></entry>
       <entry><literal>42.44</literal></entry>
      </row>

<!-- seed ? -->
      <row>
       <entry><literal><function>setseed</function>(<type>dp</type>)</literal></entry>
       <entry><type>int</type></entry>
       <entry>initialise la recherche pour les appels �
       <literal>random()</literal> � suivre
        (valeur entre 0 et 1.0)</entry>
       <entry><literal>setseed(0.54823)</literal></entry>
       <entry><literal>1177314959</literal></entry>
      </row>

      <row>
       <entry><literal><function>sign</function>(<type>dp</type> ou
<type>numeric</type>)</literal></entry>
       <entry>(identique � l'argument)</entry>
       <entry>signe de l'argument (-1, 0, +1)</entry>
       <entry><literal>sign(-8.4)</literal></entry>
       <entry><literal>-1</literal></entry>
      </row>

      <row>
       <entry><literal><function>sqrt</function>(<type>dp</type> ou
<type>numeric</type>)</literal></entry>
       <entry>(identique � l'argument)</entry>
       <entry>racine carr�</entry>
       <entry><literal>sqrt(2.0)</literal></entry>
       <entry><literal>1.4142135623731</literal></entry>
      </row>

      <row>
       <entry><literal><function>trunc</function>(<type>dp</type> ou
<type>numeric</type>)</literal></entry>
       <entry>(identique � l'argument)</entry>
       <entry>tronque vers z�ro</entry>
       <entry><literal>trunc(42.8)</literal></entry>
       <entry><literal>42</literal></entry>
      </row>

      <row>
       <entry><literal><function>trunc</function>(<parameter>v</parameter>
<type>numeric</type>, <parameter>s</parameter>
<type>int</type>)</literal></entry>
       <entry><type>numeric</type></entry>
       <entry>tronque sur <parameter>s</parameter> d�cimales</entry>
       <entry><literal>trunc(42.4382, 2)</literal></entry>
       <entry><literal>42.43</literal></entry>
      </row>

<!-- bucket ? -->
      <row>
       <entry><literal><function>width_bucket</function>(<parameter>op</parameter> <type>numeric</type>,
        <parameter>b1</parameter> <type>numeric</type>, <parameter>b2</parameter> <type>numeric</type>,
	<parameter>count</parameter> <type>int</type>)</literal></entry>
       <entry><type>int</type></entry>
       <entry>renvoie le jeton auquel l'<parameter>op�rande</parameter> est affect� dans
        un histogramme d'�quidistance � <parameter>nombre</parameter> jetons,
        les valeurs allant de <parameter>b1</parameter> �
        <parameter>b2</parameter></entry>
       <entry><literal>width_bucket(5.35, 0.024, 10.06, 5)</literal></entry>
       <entry><literal>3</literal></entry>
      </row>
     </tbody>
    </tgroup>
   </table>

  <para>
   Enfin, le <xref linkend="functions-math-trig-table"/> affiche les fonctions
   trigonom�triques disponibles. Toutes les fonctions trigonom�triques prennent
   des arguments et renvoient des valeurs de type <type>double precision</type>.
  </para>

   <indexterm>
    <primary>acos</primary>
   </indexterm>
   <indexterm>
    <primary>asin</primary>
   </indexterm>
   <indexterm>
    <primary>atan</primary>
   </indexterm>
   <indexterm>
    <primary>atan2</primary>
   </indexterm>
   <indexterm>
    <primary>cos</primary>
   </indexterm>
   <indexterm>
    <primary>cot</primary>
   </indexterm>
   <indexterm>
    <primary>sin</primary>
   </indexterm>
   <indexterm>
    <primary>tan</primary>
   </indexterm>

   <table id="functions-math-trig-table">
    <title>Fonctions trigonom�triques</title>

    <tgroup cols="2">
     <thead>
      <row>
       <entry>Fonction</entry>
       <entry>Description</entry>
      </row>
     </thead>

     <tbody>
      <row>

<entry><literal><function>acos</function>(<replaceable>x</replaceable>)</literal
></entry>
       <entry>cosinus inverse <!-- arc-cosinus ? --></entry>
      </row>

      <row>

<entry><literal><function>asin</function>(<replaceable>x</replaceable>)</literal
></entry>
       <entry>sinus inverse<!-- arc-sinus ? --></entry>
      </row>

      <row>

<entry><literal><function>atan</function>(<replaceable>x</replaceable>)</literal
></entry>
       <entry>tangente inverse<!-- arc-tangente --></entry>
      </row>

      <row>
       <entry><literal><function>atan2</function>(<replaceable>x</replaceable>,
        <replaceable>y</replaceable>)</literal></entry>
       <entry>tangente inverse de
<literal><replaceable>x</replaceable>/
<replaceable>y</replaceable></literal></entry>
      </row>

      <row>
      
<entry><literal><function>cos</function>(<replaceable>x</replaceable>)</literal>
</entry>
       <entry>cosinus</entry>
      </row>

      <row>
      
<entry><literal><function>cot</function>(<replaceable>x</replaceable>)</literal>
</entry>
       <entry>cotangente</entry>
      </row>

      <row>
      
<entry><literal><function>sin</function>(<replaceable>x</replaceable>)</literal>
</entry>
       <entry>sinus</entry>
      </row>

      <row>
      
<entry><literal><function>tan</function>(<replaceable>x</replaceable>)</literal>
</entry>
       <entry>tangente</entry>
      </row>
     </tbody>
    </tgroup>
   </table>

  </sect1>


  <sect1 id="functions-string">
   <title>Fonctions et op�rateurs de cha�nes</title>

   <para>
    Cette section d�crit les fonctions et op�rateurs d'examen et de
    mainpulation des valeurs de type cha�ne de caract�res. Dans ce contexte, les cha�nes
    incluent les valeurs des types <type>character</type>, <type>character
    varying</type> et <type>text</type>. Sauf lorsque cela est pr�cis�
    diff�rement, toutes les fonctions list�es ci-dessous fonctionnent sur tous ces types, mais 
    une attention particuli�re doit �tre port�e aux effets potentiels du remplissage automatique lors de
    l'utilisation du type <type>character</type>. G�n�ralement, les fonctions
    d�crites ici fonctionnent aussi sur les donn�es d'autres types en
    convertissant au pr�alable la donn�e en une repr�sentation de type cha�ne.
    Quelques fonctions existent aussi nativement pour le type cha�ne bit �
    bit.
   </para>

   <para>
    <acronym>SQL</acronym> d�finit quelques fonctions de type cha�ne avec une
    syntaxe particuli�re o� des mots cl�s sont utilis�s � la place de
    virgule pour s�parer les arguments. Des d�tails sont disponibles dans le
    <xref linkend="functions-string-sql"/>. Ces fonctions sont aussi
    implant�es en utilisant la syntaxe habituelle d'appel de fonctions
    (voir le <xref linkend="functions-string-other"/>).
   </para>

   <indexterm>
    <primary>bit_length</primary>
   </indexterm>
   <indexterm>
    <primary>char_length</primary>
   </indexterm>
   <indexterm>
    <primary>convert</primary>
   </indexterm>
   <indexterm>
    <primary>lower</primary>
   </indexterm>
   <indexterm>
    <primary>octet_length</primary>
   </indexterm>
   <indexterm>
    <primary>overlay</primary>
   </indexterm>
   <indexterm>
    <primary>position</primary>
   </indexterm>
   <indexterm>
    <primary>substring</primary>
   </indexterm>
   <indexterm>
    <primary>trim</primary>
   </indexterm>
   <indexterm>
    <primary>upper</primary>
   </indexterm>

   <table id="functions-string-sql">
    <title>Fonctions et op�rateurs <acronym>SQL</acronym> pour le type cha�ne</title>
    <tgroup cols="5">
     <colspec colnum="1" colwidth="1.3*"/>
     <colspec colnum="2" colwidth="0.4*"/>
     <colspec colnum="3" colwidth="1.3*"/>
     <colspec colnum="4" colwidth="1.2*"/>
     <colspec colnum="5" colwidth="0.8*"/>
     <thead>
      <row>
       <entry>Fonction</entry>
       <entry>Type renvoy�</entry>
       <entry>Description</entry>
       <entry>Exemple</entry>
       <entry>R�sultat</entry>  
      </row>
     </thead>

     <tbody>
      <row>
       <entry><literal><parameter>cha�ne</parameter> <literal>||</literal>
        <parameter>cha�ne</parameter></literal></entry>
       <entry><type>text</type> </entry>
       <entry>
        Concat�nation de cha�ne
        <indexterm>
         <primary>cha�ne de caract�res</primary>
         <secondary>concat�nation</secondary>
        </indexterm>
       </entry>
       <entry><literal>'Post' || 'greSQL'</literal></entry>
       <entry><literal>PostgreSQL</literal></entry>
      </row>

      <row>
      
<entry><literal><function>bit_length</function>
(<parameter>cha�ne</parameter>)</literal></entry>
       <entry><type>int</type></entry>
       <entry>Nombre de bits de la cha�ne</entry>
       <entry><literal>bit_length('jose')</literal></entry>
       <entry><literal>32</literal></entry>
      </row>

      <row>
      
<entry><literal><function>char_length</function>
(<parameter>cha�ne</parameter>)</literal> ou
<literal><function>character_length</function>
(<parameter>cha�ne</parameter>)</literal></entry>
       <entry><type>int</type></entry>
       <entry>
        Nombre de caract�res de la cha�ne
        <indexterm>
         <primary>cha�ne de caract�res</primary>
         <secondary>longueur</secondary>
        </indexterm>
        <indexterm>
         <primary>longueur</primary>
         <secondary sortas="character string">d'une cha�ne de
         caract�res</secondary>
         <see>cha�ne de caract�res, longueur</see>
        </indexterm>
       </entry>
       <entry><literal>char_length('jose')</literal></entry>
       <entry><literal>4</literal></entry>
      </row>

      <row>
      
<entry><literal><function>convert</function>(<parameter>cha�ne</parameter>
       using <parameter>nom_conversion</parameter>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>
        Modifie le codage en focntion du nom de conversion indiqu�. Les
        conversions peuvent �tre d�finies par <command>CREATE
        CONVERSION</command>. De m�me, il existe quelques noms de conversion
        pr�-d�finis. Voir le <xref linkend="conversion-names"/> pour les noms de
        conversion disponibles.
       </entry>
       <entry><literal>convert('PostgreSQL' using iso_8859_1_to_utf8)</literal></entry>
       <entry><literal>'PostgreSQL'</literal> dans le codage UTF8 (Unicode, 8 bits)</entry>
      </row>

      <row>
      
<entry><literal><function>lower</function>
(<parameter>cha�ne</parameter>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>Convertit une cha�ne en minuscule</entry>
       <entry><literal>lower('TOM')</literal></entry>
       <entry><literal>tom</literal></entry>
      </row>

      <row>
      
<entry><literal><function>octet_length</function>(<parameter>cha�ne</parameter>)
</literal></entry>
       <entry><type>int</type></entry>
       <entry>Nombre d'octets de la cha�ne</entry>
       <entry><literal>octet_length('jose')</literal></entry>
       <entry><literal>4</literal></entry>
      </row>

      <row>
      
<entry><literal><function>overlay</function>(<parameter>cha�ne</parameter>
placing <parameter>cha�ne</parameter> from <type>int</type> <optional>for
<type>int</type></optional>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>
        Remplace la sous-cha�ne
       </entry>
       <entry><literal>overlay('Txxxxas' placing 'hom' from 2 for
4)</literal></entry>
       <entry><literal>Thomas</literal></entry>
      </row>

      <row>
      
<entry><literal><function>position</function>(<parameter>substring</parameter>
in <parameter>cha�ne</parameter>)</literal></entry>
       <entry><type>int</type></entry>
       <entry>Emplacement de la sous-cha�ne indiqu�e</entry>
       <entry><literal>position('om' in 'Thomas')</literal></entry>
       <entry><literal>3</literal></entry>
      </row>

      <row>
      
<entry><literal><function>substring</function>(<parameter>cha�ne</parameter>
<optional>from <type>int</type></optional> <optional>for
<type>int</type></optional>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>
        Extrait une sous-cha�ne
       </entry>
       <entry><literal>substring('Thomas' from 2 for 3)</literal></entry>
       <entry><literal>hom</literal></entry>
      </row>

      <row>
      
<entry><literal><function>substring</function>(<parameter>cha�ne</parameter>
from <replaceable>modele</replaceable>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>
        Extrait la sous-cha�ne correspondant � l'expression rationnelle POSIX.
	Voir <xref linkend="functions-matching"/> pour plus d'informations sur
	la correspondance de mod�les.
       </entry>
       <entry><literal>substring('Thomas' from '...$')</literal></entry>
       <entry><literal>mas</literal></entry>
      </row>

      <row>
      
<entry><literal><function>substring</function>(<parameter>cha�ne</parameter>
from <replaceable>pattern</replaceable> for
<replaceable>escape</replaceable>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>
        Extrait la sous-cha�ne correspondant � l'expression rationnelle
        <acronym>SQL</acronym>.
	Voir <xref linkend="functions-matching"/> pour plus d'informations sur
	la correspondance de mod�les.
       </entry>
       <entry><literal>substring('Thomas' from '%#"o_a#"_' for
'#')</literal></entry>
       <entry><literal>oma</literal></entry>
      </row>

      <row>
       <entry>
        <literal><function>trim</function>(<optional>leading | trailing |
both</optional>
        <optional><parameter>caract�res</parameter></optional> from
        <parameter>cha�ne</parameter>)</literal>
       </entry>
       <entry><type>text</type></entry>
       <entry>
        Supprime la plus grande cha�ne qui ne contient que les
        <parameter>caract�res</parameter> (une espace par d�faut) � partir du
        d�but, de la fin ou des deux extr�mit�s (respectivement leading,
	trailing, both) de la <parameter>cha�ne</parameter>.
       </entry>
       <entry><literal>trim(both 'x' from 'xTomxx')</literal></entry>
       <entry><literal>Tom</literal></entry>
      </row>

      <row>
      
<entry><literal><function>upper</function>
(<parameter>cha�ne</parameter>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>Convertit une cha�ne en majuscule</entry>
       <entry><literal>upper('tom')</literal></entry>
       <entry><literal>TOM</literal></entry>
      </row>
     </tbody>
    </tgroup>
   </table>

   <para>
    D'autres fonctions de manipulation de cha�nes sont disponibles et list�es
    dans le <xref linkend="functions-string-other"/>. Certaines d'entre elles
    sont utilis�es en interne pour implanter les fonctions de cha�ne r�pondant
    au standard <acronym>SQL</acronym> list�es dans le <xref
    linkend="functions-string-sql"/>.
   </para>

   <indexterm>
    <primary>ascii</primary>
   </indexterm>
   <indexterm>
    <primary>btrim</primary>
   </indexterm>
   <indexterm>
    <primary>chr</primary>
   </indexterm>
   <indexterm>
    <primary>decode</primary>
   </indexterm>
   <indexterm>
    <primary>encode</primary>
   </indexterm>
   <indexterm>
    <primary>initcap</primary>
   </indexterm>
   <indexterm>
    <primary>lpad</primary>
   </indexterm>
   <indexterm>
    <primary>ltrim</primary>
   </indexterm>
   <indexterm>
    <primary>md5</primary>
   </indexterm>
   <indexterm>
    <primary>pg_client_encoding</primary>
   </indexterm>
   <indexterm>
    <primary>quote_ident</primary>
   </indexterm>
   <indexterm>
    <primary>quote_literal</primary>
   </indexterm>
   <indexterm>
    <primary>repeat</primary>
   </indexterm>
   <indexterm>
    <primary>replace</primary>
   </indexterm>
   <indexterm>
    <primary>rpad</primary>
   </indexterm>
   <indexterm>
    <primary>rtrim</primary>
   </indexterm>
   <indexterm>
    <primary>split_part</primary>
   </indexterm>
   <indexterm>
    <primary>strpos</primary>
   </indexterm>
   <indexterm>
    <primary>substr</primary>
   </indexterm>
   <indexterm>
    <primary>to_ascii</primary>
   </indexterm>
   <indexterm>
    <primary>to_hex</primary>
   </indexterm>
   <indexterm>
    <primary>translate</primary>
   </indexterm>

   <table id="functions-string-other">
    <title>Autres fonctions de cha�ne</title>
    <tgroup cols="5">
     <colspec colnum="1" colwidth="1.3*"/>
     <colspec colnum="2" colwidth="0.4*"/>
     <colspec colnum="3" colwidth="1.3*"/>
     <colspec colnum="4" colwidth="1.2*"/>
     <colspec colnum="5" colwidth="0.8*"/>
     <thead>
      <row>
       <entry>Fonction</entry>
       <entry>Type renvoy�</entry>
       <entry>Description</entry>
       <entry>Exemple</entry>
       <entry>R�sultat</entry>
      </row>
     </thead>

     <tbody>
      <row>
       <entry><literal><function>ascii</function>(<parameter>cha�ne</parameter>)</literal></entry>
       <entry><type>int</type></entry>
       <entry>Code <acronym>ASCII</acronym> du premier octet de
        l'argument</entry>
       <entry><literal>ascii('x')</literal></entry>
       <entry><literal>120</literal></entry>
      </row>

      <row>
       <entry><literal><function>btrim</function>(<parameter>cha�ne</parameter> <type>text</type>
       <optional>, <parameter>caract�res</parameter> <type>text</type></optional>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>
        Supprime la cha�ne la plus longue constitu�e uniquement de caract�res 
        issus de <parameter>caract�res</parameter> (une espace par d�faut)
	� partir du d�but et de la fin de <parameter>cha�ne</parameter>.
       </entry>
       <entry><literal>btrim('xyxtrimyyx', 'xy')</literal></entry>
       <entry><literal>trim</literal></entry>
      </row>

      <row>
      
<entry><literal><function>chr</function>(<type>int</type>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>Caract�re correspondant au code <acronym>ASCII</acronym>
        donn�</entry>
       <entry><literal>chr(65)</literal></entry>
       <entry><literal>A</literal></entry>
      </row>

      <row>
       <entry>
        <literal><function>convert</function>(<parameter>cha�ne</parameter>
        <type>text</type>,
        <optional><parameter>codage_source</parameter>
<type>name</type>,</optional>
        <parameter>codage_destination</parameter> <type>name</type>)</literal>
       </entry>
       <entry><type>text</type></entry>
       <entry>
        Convertit une cha�ne dans le codage
        <parameter>codage_destination</parameter>. Le codage initial est
        indiqu� par <parameter>codage_source</parameter>. Si
        <parameter>codage_source</parameter> est omis, le codage de la base de
        donn�es est utilis�.
       </entry>
       <entry><literal>convert( 'texte_en_utf8', 'UTF8', 'LATIN1')</literal></entry>
       <entry><literal>texte_en_utf8</literal> repr�sent� dans le codage ISO 8859-1</entry>
      </row>

      <row>
       <entry>
        <literal><function>decode</function>(<parameter>cha�ne</parameter>
<type>text</type>,
        <parameter>type</parameter> <type>text</type>)</literal>
       </entry>
       <entry><type>bytea</type></entry>
       <entry>
        D�code les donn�es binaires � partir de <parameter>cha�ne</parameter>,
        cod�e pr�alablement avec <function>encode</function>. Le type de param�tre est le
        m�me que <function>encode</function>.
       </entry>
       <entry><literal>decode('MTIzAAE=', 'base64')</literal></entry>
       <entry><literal>123\000\001</literal></entry>
      </row>       

      <row>
       <entry>
        <literal><function>encode</function>(<parameter>donn�es</parameter>
<type>bytea</type>,
        <parameter>type</parameter> <type>text</type>)</literal>
       </entry>
       <entry><type>text</type></entry>
       <entry>
        Code les donn�es binaires en une repr�sentation diff�rente. Les types
	support�s sont&nbsp;:
        <literal>base64</literal>, <literal>hex</literal>, <literal>escape</literal>.
        <literal>escape</literal> affiche simplement des octets nuls sous la
	forme <literal>\000</literal> et des antislashs.
       </entry>
       <entry><literal>encode( E'123\\000\\001', 'base64')</literal></entry>
       <entry><literal>MTIzAAE=</literal></entry>
      </row>       

      <row>
       <entry><literal><function>initcap</function>
	(<parameter>cha�ne</parameter>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>
	Convertit la premi�re lettre de chaque mot en majuscule et le reste en
	minuscule. Les mots sont des s�quences de caract�res alphanum�riques
	s�par�s par des caract�res non alphanum�riques.
       </entry>
       <entry><literal>initcap('bonjour THOMAS')</literal></entry>
       <entry><literal>Bonjour Thomas</literal></entry>
      </row>

      <row>
       <entry><literal><function>length</function>
         (<parameter>cha�ne</parameter>)</literal></entry>
       <entry><type>int</type></entry>
       <entry>
       Nombre de caract�res de <parameter>cha�ne</parameter>
       </entry>
       <entry><literal>length('jose')</literal></entry>
       <entry><literal>4</literal></entry>
      </row>

      <row>
       <entry>
        <literal><function>lpad</function>(<parameter>cha�ne</parameter>
<type>text</type>,
        <parameter>longueur</parameter> <type>int</type>
        <optional>, <parameter>remplissage</parameter>
<type>text</type></optional>)</literal>
       </entry>
       <entry><type>text</type></entry>
       <entry>
        Remplit <parameter>cha�ne</parameter> pour avoir une cha�ne de longueur
        <parameter>longueur</parameter> en ajoutant les caract�res
        <parameter>remplissage</parameter> en d�but de cha�ne (une espace par d�faut). Si
        <parameter>cha�ne</parameter> a une taille sup�rieure �
        <parameter>longueur</parameter>, alors elle est tronqu�e (sur la
        droite).
       </entry>
       <entry><literal>lpad('hi', 5, 'xy')</literal></entry>
       <entry><literal>xyxhi</literal></entry>
      </row>

      <row>
       <entry><literal><function>ltrim</function>(<parameter>cha�ne</parameter>
       <type>text</type>
       <optional>, <parameter>caract�res</parameter> <type>text</type></optional>)</literal>
       </entry>
       <entry><type>text</type></entry>
       <entry>
        Supprime la cha�ne la plus longue constitu�e uniquement de caract�res
	issus de <parameter>caract�res</parameter> (une espace par d�faut) � partir du d�but de la cha�ne.
       </entry>
       <entry><literal>ltrim('zzzytrim', 'xyz')</literal></entry>
       <entry><literal>trim</literal></entry>
      </row>

      <row>
       <entry><literal><function>md5</function>(<parameter>cha�ne</parameter>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>
        Calcule la cl� MD5 de <parameter>cha�ne</parameter> et retourne le r�sultat en
        hexad�cimal.
       </entry>
       <entry><literal>md5('abc')</literal></entry>
       <entry><literal>900150983cd24fb0 d6963f7d28e17f72</literal></entry>
      </row>

      <row>
       <entry><literal><function>pg_client_encoding</function>()</literal></entry>
       <entry><type>name</type></entry>
       <entry>
        Nom de l'encodage client courant.
       </entry>
       <entry><literal>pg_client_encoding()</literal></entry>
       <entry><literal>SQL_ASCII</literal></entry>
      </row>

      <row>
       <entry><literal><function>quote_ident</function>(<parameter>cha�ne</parameter>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>Renvoie la cha�ne correctement plac�e entre guillemets pour
        utilisation comme identifiant dans une cha�ne d'instruction
	<acronym>SQL</acronym>. Les guillemets ne sont ajout�s que s'ils sont
	n�cessaires (c'est-�-dire si la cha�ne contient des caract�res autres
	que ceux de l'identifiant ou qu'il peut y avoir un probl�me de casse).
	Les guillemets compris dans la cha�ne sont correctement doubl�s.
       </entry>
       <entry><literal>quote_ident('Foo bar')</literal></entry>
       <entry><literal>"Foo bar"</literal></entry>
      </row>

      <row>
       <entry><literal><function>quote_literal</function>(<parameter>cha�ne</parameter>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>Renvoie la cha�ne correctement plac�e entre guillemets pour �tre
        utilis�e comme libell� dans un cha�ne d'instruction
        <acronym>SQL</acronym>. Les guillemets simples compris dans la cha�ne
        et les antislash sont correctement doubl�s.
       </entry>
       <entry><literal>quote_literal( 'O\'Reilly')</literal></entry>
       <entry><literal>'O''Reilly'</literal></entry>
      </row>

      <row>
       <entry><literal><function>regexp_replace</function>(<parameter>cha�ne</parameter> <type>text</type>, <parameter>mod�le</parameter> <type>text</type>, <parameter>remplacement</parameter> <type>text</type> [,<parameter>options</parameter> <type>text</type>])</literal></entry>
       <entry><type>text</type></entry>
       <entry>
        Remplace la sous-cha�ne correspondant � l'expression rationnelle POSIX.
	Voir <xref linkend="functions-matching"/> pour plus d'informations
	sur la correspondance de mod�le.
       </entry>
       <entry><literal>regexp_replace('Thomas', '.[mN]a.', 'M')</literal></entry>
       <entry><literal>ThM</literal></entry>
      </row>

      <row>
       <entry><literal><function>repeat</function>(<parameter>cha�ne</parameter> <type>text</type>,
        <parameter>nombre</parameter> <type>int</type>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>Rep�te le texte <parameter>cha�ne</parameter> <parameter>nombre</parameter> fois</entry>
       <entry><literal>repeat('Pg', 4)</literal></entry>
       <entry><literal>PgPgPgPg</literal></entry>
      </row>

      <row>
       <entry><literal><function>replace</function>(<parameter>cha�ne</parameter> <type>text</type>,
       <parameter>�partirde</parameter> <type>text</type>,
       <parameter>vers</parameter> <type>text</type>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>Remplace dans <parameter>cha�ne</parameter> toutes les
        occurrences de la sous-cha�ne <parameter>�partirde</parameter> par la
        sous-cha�ne <parameter>vers</parameter>.
       </entry>
       <entry><literal>replace( 'abcdefabcdef', 'cd', 'XX')</literal></entry>
       <entry><literal>abXXefabXXef</literal></entry>
      </row>

      <row>
       <entry>
        <literal><function>rpad</function>(<parameter>cha�ne</parameter>
<type>text</type>,
        <parameter>longueur</parameter> <type>int</type>
        <optional>, <parameter>remplissage</parameter>
<type>text</type></optional>)</literal>
       </entry>
       <entry><type>text</type></entry>
       <entry>
        Compl�te <parameter>cha�ne</parameter> jusqu'� obtenir une longueur de
        <parameter>longueur</parameter> caract�res en ajoutant les caract�res
        <parameter>remplissage</parameter> (une espace par d�faut). Si la
        <parameter>cha�ne</parameter> a une taille sup�rieure �
        <parameter>longueur</parameter>, elle est tronqu�e.
       </entry>
       <entry><literal>rpad('hi', 5, 'xy')</literal></entry>
       <entry><literal>hixyx</literal></entry>
      </row>

      <row>
       <entry><literal><function>rtrim</function>(<parameter>cha�ne</parameter> <type>text</type>
       <optional>, <parameter>caract�res</parameter> <type>text</type></optional>)</literal>
       </entry>
       <entry><type>text</type></entry>
       <entry>Supprime la cha�ne la plus longue contenant uniquement les
        caract�res provenant de <parameter>caract�res</parameter> (une espace par
        d�faut) depuis la fin de <parameter>cha�ne</parameter>.
       </entry>
       <entry><literal>rtrim('trimxxxx', 'x')</literal></entry>
       <entry><literal>trim</literal></entry>
      </row>

      <row>
      
<entry><literal><function>split_part</function>(<parameter>cha�ne</parameter>
<type>text</type>,
       <parameter>d�limiteur</parameter> <type>text</type>,
       <parameter>champ</parameter> <type>int</type>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>Divise <parameter>cha�ne</parameter> par rapport au
        <parameter>d�limiteur</parameter> et renvoie le champ donn� (en
        comptant � partir de 1).
       </entry>
       <entry><literal>split_part( 'abc~@~def~@~ghi', '~@~',
2)</literal></entry>
       <entry><literal>def</literal></entry>
      </row>

      <row>
      
<entry><literal><function>strpos</function>(<parameter>cha�ne</parameter>,
<parameter>sous-cha�ne</parameter>)</literal></entry>
       <entry><type>int</type></entry>
       <entry>Emplacement de la sous-cha�ne indiqu�e (identique �
        <literal>position(<parameter>sous-cha�ne</parameter> in
         <parameter>sous-cha�ne</parameter>)</literal>, mais avec les
	 arguments en ordre inverse).
       </entry>
       <entry><literal>strpos('high', 'ig')</literal></entry>
       <entry><literal>2</literal></entry>
      </row>

      <row>
      
<entry><literal><function>substr</function>(<parameter>cha�ne</parameter>,
<parameter>from</parameter> <optional>,
<parameter>nombre</parameter></optional>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>Extrait la sous-cha�ne (identique �
        <literal>substring(<parameter>cha�ne</parameter> from
<parameter>�partirde</parameter> for <parameter>nombre</parameter>)</literal>)
       </entry>
       <entry><literal>substr('alphabet', 3, 2)</literal></entry>
       <entry><literal>ph</literal></entry>
      </row>

      <row>
       <entry><literal><function>to_ascii</function>(<parameter>cha�ne</parameter> <type>text</type>
        <optional>, <parameter>encodage</parameter> <type>text</type></optional>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>Convertit la <parameter>cha�ne</parameter> en
        <acronym>ASCII</acronym> � partir de n'importe quelle autre
	encodage (ne supporte que les conversions � partir de <literal>LATIN1</literal>,
	<literal>LATIN2</literal>, <literal>LATIN9</literal> et
	<literal>WIN1250</literal>).</entry>
       <entry><literal>to_ascii('Karel')</literal></entry>
       <entry><literal>Karel</literal></entry>
      </row>

      <row>
       <entry><literal><function>to_hex</function>(<parameter>nombre</parameter>
<type>int</type>
       ou <type>bigint</type>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>Convertit <parameter>nombre</parameter> dans sa repr�sentation
        hexad�cimale �quivalente.
       </entry>
       <entry><literal>to_hex(2147483647)</literal></entry>
       <entry><literal>7fffffff</literal></entry>
      </row>

      <row>
       <entry>
        <literal><function>translate</function>(<parameter>cha�ne</parameter>
        <type>text</type>,
        <parameter>�partirde</parameter> <type>text</type>,
        <parameter>vers</parameter> <type>text</type>)</literal>
       </entry>
       <entry><type>text</type></entry>
       <entry>Tout caract�re de <parameter>cha�ne</parameter> qui correspond
        � un caract�re de l'ensemble <parameter>�partirde</parameter> est
        remplac� par le caract�re correspondant de l'ensemble
        <parameter>vers</parameter>.
       </entry>
       <entry><literal>translate('12345', '14', 'ax')</literal></entry>
       <entry><literal>a23x5</literal></entry>
      </row>

     </tbody>
    </tgroup>
   </table>


   <table id="conversion-names">
    <title>Conversions int�gr�es</title>
    <tgroup cols="3">
     <colspec colnum="1" colwidth="1.3*"/>
     <colspec colnum="2" colwidth="0.9*"/>
     <colspec colnum="3" colwidth="0.8*"/>
     <thead>
      <row>
       <entry>Nom de la conversion
        <footnote>
         <para>
          Les noms des conversions suivent un sch�ma de nommage standard&nbsp;:
          le nom officiel de l'encodage source avec tous les caract�res non
          alpha-num�riques remplac�s par des tirets bas suivi de
          <literal>_to_</literal> suivi par le nom de l'encodage cible ayant
	  subit le m�me traitement que le nom de l'encodage source.
          Il est donc possible que les noms varient par rapport aux noms
	  d'encodage personnalis�s..
         </para>
        </footnote>
       </entry>
       <entry>Codage source</entry>
       <entry>Codage destination</entry>
      </row>
     </thead>

     <tbody>
      <row>
       <entry><literal>ascii_to_mic</literal></entry>
       <entry><literal>SQL_ASCII</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
      </row>

      <row>
       <entry><literal>ascii_to_utf8</literal></entry>
       <entry><literal>SQL_ASCII</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>big5_to_euc_tw</literal></entry>
       <entry><literal>BIG5</literal></entry>
       <entry><literal>EUC_TW</literal></entry>
      </row>

      <row>
       <entry><literal>big5_to_mic</literal></entry>
       <entry><literal>BIG5</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
      </row>

      <row>
       <entry><literal>big5_to_utf8</literal></entry>
       <entry><literal>BIG5</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>euc_cn_to_mic</literal></entry>
       <entry><literal>EUC_CN</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
      </row>

      <row>
       <entry><literal>euc_cn_to_utf8</literal></entry>
       <entry><literal>EUC_CN</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>euc_jp_to_mic</literal></entry>
       <entry><literal>EUC_JP</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
      </row>

      <row>
       <entry><literal>euc_jp_to_sjis</literal></entry>
       <entry><literal>EUC_JP</literal></entry>
       <entry><literal>SJIS</literal></entry>
      </row>

      <row>
       <entry><literal>euc_jp_to_utf8</literal></entry>
       <entry><literal>EUC_JP</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>euc_kr_to_mic</literal></entry>
       <entry><literal>EUC_KR</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
      </row>

      <row>
       <entry><literal>euc_kr_to_utf8</literal></entry>
       <entry><literal>EUC_KR</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>euc_tw_to_big5</literal></entry>
       <entry><literal>EUC_TW</literal></entry>
       <entry><literal>BIG5</literal></entry>
      </row>

      <row>
       <entry><literal>euc_tw_to_mic</literal></entry>
       <entry><literal>EUC_TW</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
      </row>

      <row>
       <entry><literal>euc_tw_to_utf8</literal></entry>
       <entry><literal>EUC_TW</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>gb18030_to_utf8</literal></entry>
       <entry><literal>GB18030</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>gbk_to_utf8</literal></entry>
       <entry><literal>GBK</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_10_to_utf8</literal></entry>
       <entry><literal>LATIN6</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_13_to_utf8</literal></entry>
       <entry><literal>LATIN7</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_14_to_utf8</literal></entry>
       <entry><literal>LATIN8</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_15_to_utf8</literal></entry>
       <entry><literal>LATIN9</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_16_to_utf8</literal></entry>
       <entry><literal>LATIN10</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_1_to_mic</literal></entry>
       <entry><literal>LATIN1</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_1_to_utf8</literal></entry>
       <entry><literal>LATIN1</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_2_to_mic</literal></entry>
       <entry><literal>LATIN2</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_2_to_utf8</literal></entry>
       <entry><literal>LATIN2</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_2_to_windows_1250</literal></entry>
       <entry><literal>LATIN2</literal></entry>
       <entry><literal>WIN1250</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_3_to_mic</literal></entry>
       <entry><literal>LATIN3</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_3_to_utf8</literal></entry>
       <entry><literal>LATIN3</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_4_to_mic</literal></entry>
       <entry><literal>LATIN4</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_4_to_utf8</literal></entry>
       <entry><literal>LATIN4</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_5_to_koi8_r</literal></entry>
       <entry><literal>ISO_8859_5</literal></entry>
       <entry><literal>KOI8</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_5_to_mic</literal></entry>
       <entry><literal>ISO_8859_5</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_5_to_utf8</literal></entry>
       <entry><literal>ISO_8859_5</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_5_to_windows_1251</literal></entry>
       <entry><literal>ISO_8859_5</literal></entry>
       <entry><literal>WIN1251</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_5_to_windows_866</literal></entry>
       <entry><literal>ISO_8859_5</literal></entry>
       <entry><literal>WIN866</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_6_to_utf8</literal></entry>
       <entry><literal>ISO_8859_6</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_7_to_utf8</literal></entry>
       <entry><literal>ISO_8859_7</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_8_to_utf8</literal></entry>
       <entry><literal>ISO_8859_8</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>iso_8859_9_to_utf8</literal></entry>
       <entry><literal>LATIN5</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>johab_to_utf8</literal></entry>
       <entry><literal>JOHAB</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>koi8_r_to_iso_8859_5</literal></entry>
       <entry><literal>KOI8</literal></entry>
       <entry><literal>ISO_8859_5</literal></entry>
      </row>

      <row>
       <entry><literal>koi8_r_to_mic</literal></entry>
       <entry><literal>KOI8</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
      </row>

      <row>
       <entry><literal>koi8_r_to_utf8</literal></entry>
       <entry><literal>KOI8</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>koi8_r_to_windows_1251</literal></entry>
       <entry><literal>KOI8</literal></entry>
       <entry><literal>WIN1251</literal></entry>
      </row>

      <row>
       <entry><literal>koi8_r_to_windows_866</literal></entry>
       <entry><literal>KOI8</literal></entry>
       <entry><literal>WIN866</literal></entry>
      </row>

      <row>
       <entry><literal>mic_to_ascii</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
       <entry><literal>SQL_ASCII</literal></entry>
      </row>

      <row>
       <entry><literal>mic_to_big5</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
       <entry><literal>BIG5</literal></entry>
      </row>

      <row>
       <entry><literal>mic_to_euc_cn</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
       <entry><literal>EUC_CN</literal></entry>
      </row>

      <row>
       <entry><literal>mic_to_euc_jp</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
       <entry><literal>EUC_JP</literal></entry>
      </row>

      <row>
       <entry><literal>mic_to_euc_kr</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
       <entry><literal>EUC_KR</literal></entry>
      </row>

      <row>
       <entry><literal>mic_to_euc_tw</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
       <entry><literal>EUC_TW</literal></entry>
      </row>

      <row>
       <entry><literal>mic_to_iso_8859_1</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
       <entry><literal>LATIN1</literal></entry>
      </row>

      <row>
       <entry><literal>mic_to_iso_8859_2</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
       <entry><literal>LATIN2</literal></entry>
      </row>

      <row>
       <entry><literal>mic_to_iso_8859_3</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
       <entry><literal>LATIN3</literal></entry>
      </row>

      <row>
       <entry><literal>mic_to_iso_8859_4</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
       <entry><literal>LATIN4</literal></entry>
      </row>

      <row>
       <entry><literal>mic_to_iso_8859_5</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
       <entry><literal>ISO_8859_5</literal></entry>
      </row>

      <row>
       <entry><literal>mic_to_koi8_r</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
       <entry><literal>KOI8</literal></entry>
      </row>

      <row>
       <entry><literal>mic_to_sjis</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
       <entry><literal>SJIS</literal></entry>
      </row>

      <row>
       <entry><literal>mic_to_windows_1250</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
       <entry><literal>WIN1250</literal></entry>
      </row>

      <row>
       <entry><literal>mic_to_windows_1251</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
       <entry><literal>WIN1251</literal></entry>
      </row>

      <row>
       <entry><literal>mic_to_windows_866</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
       <entry><literal>WIN866</literal></entry>
      </row>

      <row>
       <entry><literal>sjis_to_euc_jp</literal></entry>
       <entry><literal>SJIS</literal></entry>
       <entry><literal>EUC_JP</literal></entry>
      </row>

      <row>
       <entry><literal>sjis_to_mic</literal></entry>
       <entry><literal>SJIS</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
      </row>

      <row>
       <entry><literal>sjis_to_utf8</literal></entry>
       <entry><literal>SJIS</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>tcvn_to_utf8</literal></entry>
       <entry><literal>WIN1258</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>uhc_to_utf8</literal></entry>
       <entry><literal>UHC</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_ascii</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>SQL_ASCII</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_big5</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>BIG5</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_euc_cn</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>EUC_CN</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_euc_jp</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>EUC_JP</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_euc_kr</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>EUC_KR</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_euc_tw</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>EUC_TW</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_gb18030</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>GB18030</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_gbk</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>GBK</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_iso_8859_1</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>LATIN1</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_iso_8859_10</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>LATIN6</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_iso_8859_13</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>LATIN7</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_iso_8859_14</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>LATIN8</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_iso_8859_15</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>LATIN9</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_iso_8859_16</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>LATIN10</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_iso_8859_2</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>LATIN2</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_iso_8859_3</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>LATIN3</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_iso_8859_4</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>LATIN4</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_iso_8859_5</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>ISO_8859_5</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_iso_8859_6</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>ISO_8859_6</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_iso_8859_7</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>ISO_8859_7</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_iso_8859_8</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>ISO_8859_8</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_iso_8859_9</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>LATIN5</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_johab</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>JOHAB</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_koi8_r</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>KOI8</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_sjis</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>SJIS</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_tcvn</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>WIN1258</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_uhc</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>UHC</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_windows_1250</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>WIN1250</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_windows_1251</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>WIN1251</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_windows_1252</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>WIN1252</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_windows_1253</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>WIN1253</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_windows_1254</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>WIN1254</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_windows_1255</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>WIN1255</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_windows_1256</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>WIN1256</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_windows_1257</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>WIN1257</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_windows_866</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>WIN866</literal></entry>
      </row>

      <row>
       <entry><literal>utf8_to_windows_874</literal></entry>
       <entry><literal>UTF8</literal></entry>
       <entry><literal>WIN874</literal></entry>
      </row>

      <row>
       <entry><literal>windows_1250_to_iso_8859_2</literal></entry>
       <entry><literal>WIN1250</literal></entry>
       <entry><literal>LATIN2</literal></entry>
      </row>

      <row>
       <entry><literal>windows_1250_to_mic</literal></entry>
       <entry><literal>WIN1250</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
      </row>

      <row>
       <entry><literal>windows_1250_to_utf8</literal></entry>
       <entry><literal>WIN1250</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>windows_1251_to_iso_8859_5</literal></entry>
       <entry><literal>WIN1251</literal></entry>
       <entry><literal>ISO_8859_5</literal></entry>
      </row>

      <row>
       <entry><literal>windows_1251_to_koi8_r</literal></entry>
       <entry><literal>WIN1251</literal></entry>
       <entry><literal>KOI8</literal></entry>
      </row>

      <row>
       <entry><literal>windows_1251_to_mic</literal></entry>
       <entry><literal>WIN1251</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
      </row>

      <row>
       <entry><literal>windows_1251_to_utf8</literal></entry>
       <entry><literal>WIN1251</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>windows_1251_to_windows_866</literal></entry>
       <entry><literal>WIN1251</literal></entry>
       <entry><literal>WIN866</literal></entry>
      </row>

      <row>
       <entry><literal>windows_1252_to_utf8</literal></entry>
       <entry><literal>WIN1252</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>windows_1256_to_utf8</literal></entry>
       <entry><literal>WIN1256</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>windows_866_to_iso_8859_5</literal></entry>
       <entry><literal>WIN866</literal></entry>
       <entry><literal>ISO_8859_5</literal></entry>
      </row>

      <row>
       <entry><literal>windows_866_to_koi8_r</literal></entry>
       <entry><literal>WIN866</literal></entry>
       <entry><literal>KOI8</literal></entry>
      </row>

      <row>
       <entry><literal>windows_866_to_mic</literal></entry>
       <entry><literal>WIN866</literal></entry>
       <entry><literal>MULE_INTERNAL</literal></entry>
      </row>

      <row>
       <entry><literal>windows_866_to_utf8</literal></entry>
       <entry><literal>WIN866</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

      <row>
       <entry><literal>windows_866_to_windows_1251</literal></entry>
       <entry><literal>WIN866</literal></entry>
       <entry><literal>WIN</literal></entry>
      </row>

      <row>
       <entry><literal>windows_874_to_utf8</literal></entry>
       <entry><literal>WIN874</literal></entry>
       <entry><literal>UTF8</literal></entry>
      </row>

     </tbody>
    </tgroup>
   </table>

  </sect1>


  <sect1 id="functions-binarystring">
   <title>Fonctions et op�rateurs de cha�nes binaires</title>

   <indexterm zone="functions-binarystring">
    <primary>donn�es binaires</primary>
    <secondary>fonctions</secondary>
   </indexterm>

   <para>
    Cette section d�crit les fonctions et op�rateurs d'examen et de
    manipulation des valeurs de type <type>bytea</type>.
   </para>

   <para>
    <acronym>SQL</acronym> d�finit quelques fonctions de cha�nes avec une 
    syntaxe sp�ciale o� certains mots cl�s sont employ�s � la place de
    virgules pour s�parer les arguments. Les d�tails sont pr�sent�s dans
    <xref linkend="functions-binarystring-sql"/>. Quelques fonctions sont aussi
    implant�es avec la syntaxe habituelle de l'appel de fonction
    (voir le <xref linkend="functions-binarystring-other"/>).
   </para>

   <table id="functions-binarystring-sql">
    <title>Fonctions et op�rateurs <acronym>SQL</acronym> pour cha�nes
binaires</title>
    <tgroup cols="5">
     <colspec colnum="1" colwidth="1.0*"/>
     <colspec colnum="2" colwidth="0.7*"/>
     <colspec colnum="3" colwidth="1.0*"/>
     <colspec colnum="4" colwidth="1.4*"/>
     <colspec colnum="5" colwidth="0.9*"/>
     <thead>
      <row>
       <entry>Fonction</entry>
       <entry>Type renvoy�</entry>
       <entry>Description</entry>
       <entry>Exemple</entry>
       <entry>R�sultat</entry>  
      </row>
     </thead>

     <tbody>
      <row>
       <entry><literal><parameter>cha�ne</parameter> <literal>||</literal>
        <parameter>cha�ne</parameter></literal></entry>
       <entry><type>bytea</type> </entry>
       <entry>
        Concat�nation de cha�ne
        <indexterm>
         <primary>cha�ne binaire</primary>
         <secondary>concat�nation</secondary>
        </indexterm>
       </entry>
       <entry><literal>E'\\\\Post'::bytea || E'\\047gres\\000'::bytea</literal></entry>
       <entry><literal>\\Post'gres\000</literal></entry>
      </row>

      <row>
       <entry><function>get_bit</function>(<parameter>cha�ne</parameter>, <parameter>d�calage</parameter>)</entry>
       <entry><type>int</type></entry>
       <entry>
        Extrait un bit d'une cha�ne
        <indexterm>
         <primary>get_bit</primary>
        </indexterm>
       </entry>
       <entry><literal>get_bit(E'Th\\000omas'::bytea, 45)</literal></entry>
       <entry><literal>1</literal></entry>
      </row>

      <row>
       <entry><function>get_byte</function>(<parameter>cha�ne</parameter>, <parameter>d�calage</parameter>)</entry>
       <entry><type>int</type></entry>
       <entry>
        Extrait un octet d'une cha�ne
        <indexterm>
         <primary>get_byte</primary>
        </indexterm>
       </entry>
       <entry><literal>get_byte(E'Th\\000omas'::bytea, 4)</literal></entry>
       <entry><literal>109</literal></entry>
      </row>

      <row>
       <entry><literal><function>octet_length</function>( <parameter>cha�ne</parameter>)</literal></entry>
       <entry><type>int</type></entry>
       <entry>Nombre d'octets dans une cha�ne binaire</entry>
       <entry><literal>octet_length( E'jo\\000se'::bytea)</literal></entry>
       <entry><literal>5</literal></entry>
      </row>

      <row>
       <entry><literal><function>position</function>( <parameter>sous-cha�ne</parameter>
in <parameter>cha�ne</parameter>)</literal></entry>
       <entry><type>int</type></entry>
       <entry>Emplacement de la sous-cha�ne indiqu�e</entry>
      <entry><literal>position( E'\\000om'::bytea in E'Th\\000omas'::bytea)</literal></entry>
       <entry><literal>3</literal></entry>
      </row>

      <row>
       <entry><function>set_bit</function>(<parameter>cha�ne</parameter>,
        <parameter>d�calage</parameter>, <parameter>nouvelle_valeur</parameter>)</entry>
       <entry><type>bytea</type></entry>
       <entry>
        Positionne un bit de la cha�ne
        <indexterm>
         <primary>set_bit</primary>
        </indexterm>
       </entry>
       <entry><literal>set_bit(E'Th\\000omas'::bytea, 45, 0)</literal></entry>
       <entry><literal>Th\000omAs</literal></entry>
      </row>

      <row>
       <entry><function>set_byte</function>(<parameter>cha�ne</parameter>,
       <parameter>d�calage</parameter>, <parameter>nouvelle_valeur</parameter>)</entry>
       <entry><type>bytea</type></entry>
       <entry>
        Positionne un octet de la cha�ne.
        <indexterm>
         <primary>set_byte</primary>
        </indexterm>
       </entry>
       <entry><literal>set_byte( E'Th\\000omas'::bytea, 4, 64)</literal></entry>
       <entry><literal>Th\000o@as</literal></entry>
      </row>

      <row>
       <entry><literal><function>substring</function>(<parameter>cha�ne</parameter> <optional>from <type>int</type></optional> <optional>for <type>int</type></optional>)</literal></entry>
       <entry><type>bytea</type></entry>
       <entry>
        Extrait une sous-cha�ne
        <indexterm>
         <primary>sous-cha�ne</primary>
        </indexterm>
       </entry>
       <entry><literal>substring(E'Th\\000omas'::bytea from 2 for 3)</literal></entry>
       <entry><literal>h\000o</literal></entry>
      </row>

      <row>
       <entry>
        <literal><function>trim</function>(<optional>both</optional>
        <parameter>octets</parameter> from
        <parameter>cha�ne</parameter>)</literal>
       </entry>
       <entry><type>bytea</type></entry>
       <entry>
        Supprime la plus longue cha�ne compos�e uniquement d'octets de
        <parameter>octets</parameter> � partir du d�but et de la fin de
        <parameter>cha�ne</parameter>
       </entry>
       <entry><literal>trim(E'\\000'::bytea from E'\\000Tom\\000'::bytea)</literal></entry>
       <entry><literal>Tom</literal></entry>
      </row>
     </tbody>
    </tgroup>
   </table>

   <para>
    Des fonctions suppl�mentaires de manipulations de cha�nes binaires sont list�es dans le <xref
    linkend="functions-binarystring-other"/>. Certaines sont utilis�es en interne
    pour coder les fonctions de cha�nes suivant le standard
    <acronym>SQL</acronym> et sont list�es dans le <xref
    linkend="functions-binarystring-sql"/>.
   </para>

   <table id="functions-binarystring-other">
    <title>Autres fonctions sur les cha�nes binaires</title>
    <tgroup cols="5">
     <colspec colnum="1" colwidth="1.0*"/>
     <colspec colnum="2" colwidth="0.4*"/>
     <colspec colnum="3" colwidth="1.0*"/>
     <colspec colnum="4" colwidth="1.6*"/>
     <colspec colnum="5" colwidth="1.0*"/>
     <thead>
      <row>
       <entry>Fonction</entry>
       <entry>Type retourn�</entry>
       <entry>Description</entry>
       <entry>Exemple</entry>
       <entry>R�sultat</entry>
      </row>
     </thead>

     <tbody>
      <row>
       <entry><literal><function>btrim</function>(<parameter>cha�ne</parameter>
        <type>bytea</type>, <parameter>octets</parameter>
        <type>bytea</type>)</literal></entry>
       <entry><type>bytea</type></entry>
       <entry>
        Supprime la plus longue cha�ne constitu�e uniquement d'octets de
        <parameter>octets</parameter> � partir du d�but et de la fin de
        <parameter>cha�ne</parameter>.
      </entry>
      <entry><literal>btrim( E'\\000trim\\000'::bytea, E'\\000'::bytea)</literal></entry>
      <entry><literal>trim</literal></entry>
     </row>

     <row>
      <entry>
       <literal><function>decode</function>(<parameter>cha�ne</parameter> <type>text</type>,
              <parameter>type</parameter> <type>text</type>)</literal>
      </entry>
      <entry><type>bytea</type></entry>
      <entry>
       D�code la cha�ne binaire <parameter>cha�ne</parameter> auparavant cod�e 
       avec <function>encode</function>. Le type de param�tre est le m�me que
       dans <function>encode</function>.
      </entry>
      <entry><literal>decode(E'123\\000456', 'escape')</literal></entry>
      <entry><literal>123\000456</literal></entry>
     </row>

     <row>
      <entry>
       <literal><function>encode</function>(<parameter>cha�ne</parameter> <type>bytea</type>,
              <parameter>type</parameter> <type>text</type>)</literal>
      </entry>
      <entry><type>text</type></entry>
      <entry>
       Code la cha�ne binaire en sa repr�sentation en <acronym>ASCII</acronym>
       seul. Les types support�s sont <literal>base64</literal>,
       <literal>hex</literal>, <literal>escape</literal>.
      </entry>
      <entry><literal>encode(E'123\\000456'::bytea, 'escape')</literal></entry>
      <entry><literal>123\000456</literal></entry>
     </row>

     <row>
      <entry><literal><function>length</function>
(<parameter>cha�ne</parameter>)</literal></entry>
      <entry><type>int</type></entry>
      <entry>
       Longueur de la cha�ne binaire
       <indexterm>
        <primary>cha�ne binaire</primary>
	<secondary>longueur</secondary>
       </indexterm>
       <indexterm>
        <primary>longueur</primary>
	<secondary sortas="binary string">d'une cha�ne binaire</secondary>
	<see>cha�ne binaire, longueur</see>
       </indexterm>
      </entry>
      <entry><literal>length(E'jo\\000se'::bytea)</literal></entry>
      <entry><literal>5</literal></entry>
     </row>

     <row>
      <entry><literal><function>md5</function>(<parameter>cha�ne</parameter>)</literal></entry>
      <entry><type>text</type></entry>
      <entry>
       Calcule le hachage MD5 de la <parameter>cha�ne</parameter> et retourne
       le r�sultat en hexad�cimal
      </entry>
      <entry><literal>md5(E'Th\\000omas'::bytea)</literal></entry>
      <entry><literal>8ab2d3c9689aaf18 b4958c334c82d8b1</literal></entry>
     </row>

    </tbody>
   </tgroup>
  </table>

 </sect1>


 <sect1 id="functions-bitstring">
   <title>Fonctions et op�rateurs sur les cha�nes de bits</title>
   
   <indexterm zone="functions-bitstring">
     <primary>cha�ne de bits</primary>
     <secondary>fonctions</secondary>
   </indexterm>
   
   <para>
     Cette section d�crit les fonctions et op�rateurs d'examen et de
     manipulation des cha�nes de bits, c'est-�-dire des valeurs de types
     <type>bit</type> et <type>bit varying</type>. En dehors des op�rateurs
     de comparaison habituels, les op�rateurs pr�sent�s dans le <xref
     linkend="functions-bit-string-op-table"/> peuvent �tre utilis�s. Les
     op�randes de cha�nes de bits utilis�s avec <literal>&amp;</literal>,
     <literal>|</literal> et <literal>#</literal> doivent �tre de m�me
     longueur. Lors d'un d�calage de bits, la longueur originale de la cha�ne
     est pr�serv�e comme le montrent les exemples.
   </para>
     
     <table id="functions-bit-string-op-table">
       <title>Op�rateurs sur les cha�nes de bits</title>
       
       <tgroup cols="4">
         <thead>
           <row>
             <entry>Op�rateur</entry>
             <entry>Description</entry>
             <entry>Exemple</entry>
             <entry>R�sultat</entry>
           </row>
         </thead>
         
         <tbody>
           <row>
             <entry><literal>||</literal> </entry>
             <entry>concat�nation</entry>
             <entry><literal>B'10001' || B'011'</literal></entry>
             <entry><literal>10001011</literal></entry>
           </row>
           
           <row>
             <entry><literal>&amp;</literal> </entry>
             <entry>AND bit � bit</entry>
             <entry><literal>B'10001' &amp; B'01101'</literal></entry>
             <entry><literal>00001</literal></entry>
           </row>
           
           <row>
             <entry><literal>|</literal> </entry>
             <entry>OR bit � bit</entry>
             <entry><literal>B'10001' | B'01101'</literal></entry>
             <entry><literal>11101</literal></entry>
           </row>
           
           <row>
             <entry><literal>#</literal> </entry>
             <entry>XOR bit � bit</entry>
             <entry><literal>B'10001' # B'01101'</literal></entry>
             <entry><literal>11100</literal></entry>
           </row>
           
           <row>
             <entry><literal>~</literal> </entry>
             <entry>NOT bit � bit</entry>
             <entry><literal>~ B'10001'</literal></entry>
             <entry><literal>01110</literal></entry>
           </row>
           
           <row>
             <entry><literal>&lt;&lt;</literal> </entry>
             <entry>d�calage gauche bit � bit</entry>
             <entry><literal>B'10001' &lt;&lt; 3</literal></entry>
             <entry><literal>01000</literal></entry>
           </row>
           
           <row>
             <entry><literal>&gt;&gt;</literal> </entry>
             <entry>d�calage droit bit � bit</entry>
             <entry><literal>B'10001' &gt;&gt; 2</literal></entry>
             <entry><literal>00100</literal></entry>
           </row>
         </tbody>
       </tgroup>
     </table>
     
     <para>
       Les fonctions <acronym>SQL</acronym> suivantes fonctionnent sur les
       cha�nes de bits ainsi que sur les cha�nes de caract�res&nbsp;:
       <literal><function>length</function></literal>,
       <literal><function>bit_length</function></literal>,
       <literal><function>octet_length</function></literal>,
       <literal><function>position</function></literal>,
       <literal><function>substring</function></literal>.
     </para>
     
     <para>
       De plus, il est possible de convertir des valeurs int�grales vers ou
       depuis le type <type>bit</type>.
       Quelque exemples&nbsp;:
<programlisting>44::bit(10)                    <lineannotation>0000101100</lineannotation>
44::bit(3)                     <lineannotation>100</lineannotation>
cast(-44 as bit(12))           <lineannotation>111111010100</lineannotation>
'1110'::bit(4)::integer        <lineannotation>14</lineannotation></programlisting>
       Le transtypage <quote>bit</quote> signifie transtyper en
       <literal>bit(1)</literal> et, de ce fait, seul le bit de poids faible
       de l'entier est rendu.
     </para>

     <note>
       <para>
         Avant <productname>PostgreSQL</productname> 8.0, la conversion d'un entier
         en <type>bit(n)</type> copiait les <literal>n</literal> bits les plus �
         gauche de l'entier alors que, maintenant, cela consiste � copier les
         <literal>n</literal> bits les plus � droite. De plus, convertir un entier
         en une cha�ne de bits plus grande que l'entier lui-m�me
         �tend l'entier, avec signature, vers la gauche.
       </para>
     </note>

</sect1>


 <sect1 id="functions-matching">
  <title>Correspondance de motif</title>

  <indexterm zone="functions-matching">
   <primary>correspondance de motif</primary>
  </indexterm>

   <para>
    <productname>PostgreSQL</productname> fournit trois approches diff�rentes
    � la correspondance de motif&nbsp;: l'op�rateur
    <acronym>SQL</acronym> traditionnel
    <function>LIKE</function>, le plus r�cent <function>SIMILAR TO</function>
    (ajout� dans <acronym>SQL:1999</acronym>) et les expressions rationnelles
    de type <acronym>POSIX</acronym>. De plus, une fonction de correspondance
    de motif, <function>substring</function>, est disponible, qui utilise
    le style <function>SIMILAR TO</function> ou le style POSIX des
    expressions rationnelles.
   </para>

   <tip>
    <para>
     Si des correspondances de motif qui vont au del� sont n�cessaires, il
     faudra consid�rer l'�criture d'une fonction en Perl ou Tcl.
    </para>
   </tip>

  <sect2 id="functions-like">
   <title><function>LIKE</function></title>

   <indexterm>
    <primary>LIKE</primary>
   </indexterm>

<synopsis><replaceable>cha�ne</replaceable> LIKE <replaceable>motif</replaceable> <optional>ESCAPE <replaceable>caract�re d'�chappement</replaceable></optional>
<replaceable>cha�ne</replaceable> NOT LIKE <replaceable>motif</replaceable> <optional>ESCAPE <replaceable>caract�re d'�chappement</replaceable></optional></synopsis>

    <para>
     Chaque <replaceable>motif</replaceable> d�finit un ensemble de cha�nes.
     L'expression <function>LIKE</function> renvoie true si la
     <replaceable>cha�ne</replaceable> est contenue dans l'ensemble de cha�nes
     repr�sent� par le <replaceable>motif</replaceable>. (L'expression
     <function>NOT LIKE</function> renvoie false si
     <function>LIKE</function> renvoie true et vice versa. Une expression
     �quivalente est <literal>NOT (<replaceable>cha�ne</replaceable> LIKE
      <replaceable>motif</replaceable>)</literal>).
    </para>

    <para>
     Si le <replaceable>motif</replaceable> ne contient ni signe
     pourcent ni tiret bas, alors il ne repr�sente que la
     cha�ne elle-m�me&nbsp;; dans ce cas, <function>LIKE</function> agit
     exactement comme l'op�rateur d'�galit�. Un tiret bas (<literal>_</literal>)
     dans <replaceable>motif</replaceable> correspond � un seul
     caract�re, un signe pourcent (<literal>%</literal>)
     � toutes les cha�nes de z�ro ou plusieurs caract�res.
    </para>

   <para>
    Quelques exemples&nbsp;:
<programlisting>'abc' LIKE 'abc'    <lineannotation>true</lineannotation>
'abc' LIKE 'a%'     <lineannotation>true</lineannotation>
'abc' LIKE '_b_'    <lineannotation>true</lineannotation>
'abc' LIKE 'c'      <lineannotation>false</lineannotation></programlisting>
   </para>
   
   <para>
    Le mod�le <function>LIKE</function> correspond toujours � la cha�ne
    enti�re. Pour faire correspondre une s�quence � l'int�rieur d'une cha�ne, le
    motif doit donc commencer et finir avec un signe pourcent.
   </para>

   <para>
    Pour faire correspondre un vrai tiret bas ou un vrai signe de pourcentage
    sans qu'ils remplacent d'autres caract�res, le caract�re correspondant dans
    <replaceable>motif</replaceable> doit �tre pr�c�d� du caract�re
    d'�chappement. Par d�faut, il s'agit de l'antislash, mais un autre
    caract�re peut �tre s�lectionn� en utilisant la clause
    <literal>ESCAPE</literal>. Pour un correspondance avec le caract�re d'�chappement
    lui-m�me, on �crit deux fois ce caract�re.
   </para>

   <para>
    L'antislash a d�j� une signification particuli�re dans les
    cha�nes litt�rales. De ce fait, pour �crire un motif qui contient un antislash
    il faut �crire deux antislashs dans l'instruction SQL (en supposant que
    la syntaxe d'�chappement de cha�nes soit utilis�e). Donc, pour �crire un
    motif
    qui corresponde effectivement � un antislash litt�ral n�cessite l'�criture de quatre
    antislash dans l'instruction. Tout cela peut �tre �vit� 
    en s�lectionnant un autre caract�re d'�chappement avec
    <literal>ESCAPE</literal>&nbsp;; un antislash n'est alors plus sp�cial
    au regard de <function>LIKE</function> (mais il est toujours sp�cial pour
    l'analyseur de cha�nes litt�rales, et n�cessite toujours d'�tre doubl�).
   </para>

   <para>
    Il est aussi possible de ne s�lectionner aucun caract�re d'�chappement en
    �crivant <literal>ESCAPE ''</literal>. Ceci d�sactive compl�tement le
    m�canisme d'�chappement, ce qui rend impossible la d�sactivation de la
    signification particuli�re du tiret bas et du signe de pourcentage dans le
    motif.
   </para>

   <para>
    Le mot cl� <token>ILIKE</token> est utilis� � la place de
    <token>LIKE</token> pour faire des correspondances sans tenir compte de la
    casse mais en tenant compte de la locale active. Ceci ne fait pas partie du
    standard <acronym>SQL</acronym> mais est une extension
<productname>PostgreSQL</productname>.
   </para>

   <para>
    L'op�rateur <literal>~~</literal> est �quivalent �
    <function>LIKE</function> alors que <literal>~~*</literal> correspond �
    <function>ILIKE</function>. Il existe aussi les op�rateurs
    <literal>!~~</literal> et <literal>!~~*</literal> repr�sentant
    respectivement <function>NOT LIKE</function> et <function>NOT
    ILIKE</function>. Tous ces op�rateurs sont sp�cifiques �
    <productname>PostgreSQL</productname>.
   </para>
  </sect2>


  <sect2 id="functions-similarto-regexp">
   <title>Expressions rationnelles <function>SIMILAR TO</function></title>

   <indexterm>
    <primary>expression rationnelle</primary>
    <!-- <seealso>pattern matching</seealso> breaks index build -->
   </indexterm>

   <indexterm>
    <primary>SIMILAR TO</primary>
   </indexterm>
   <indexterm>
    <primary>substring</primary>
   </indexterm>
   <indexterm>
    <primary>regexp_replace</primary>
   </indexterm>

<synopsis><replaceable>cha�ne</replaceable> SIMILAR TO <replaceable>motif</replaceable> <optional>ESCAPE <replaceable>caract�re d'�chappement</replaceable></optional>
<replaceable>cha�ne</replaceable> NOT SIMILAR TO <replaceable>motif</replaceable> <optional>ESCAPE <replaceable>caract�re d'�chappement</replaceable></optional></synopsis>

    <para>
     L'op�rateur <function>SIMILAR TO</function> renvoie true ou false
     selon que le motif correspond ou non � la cha�ne donn�e.
     Il est assez similaire � <function>LIKE</function> � la diff�rence qu'il interpr�te le
     motif en utilisant la d�finition SQL d'une expression rationnelle. Les
     expressions rationnelles SQL sont un curieux m�lange de la notation
     <function>LIKE</function> et de la notation habituelle des
     expressions rationnelles.
    </para>

    <para>
     � l'instar de <function>LIKE</function>, l'op�rateur <function>SIMILAR
     TO</function> ne r�ussit que si son motif correspond � la cha�ne
     enti�re&nbsp;; ceci ne ressemble pas aux pratiques habituelles des
     expressions rationnelles o� le mod�le peut se situer n'importe o� dans la
     cha�ne. Ainsi comme <function>LIKE</function>, <function>SIMILAR
     TO</function> utilise <literal>_</literal> et <literal>%</literal> comme caract�res
     joker d�notant respectivement tout caract�re unique et toute cha�ne (ils sont
     comparables � <literal>.</literal> et <literal>.*</literal> des expressions
     rationnelles compatibles POSIX).
    </para>

    <para>
     En plus de ces fonctionnalit�s emprunt�es � <function>LIKE</function>,
     <function>SIMILAR TO</function> supporte trois m�ta-caract�res de
     correspondance de motif emprunt�s aux expressions rationnelles de
     POSIX&nbsp;:

    <itemizedlist>
     <listitem>
      <para>
       <literal>|</literal> d�note une alternative (une des deux
       alternatives)&nbsp;;
      </para>
     </listitem>
     <listitem>
      <para>
       <literal>*</literal> d�note la r�p�tition des �l�ments pr�c�dents, 0 ou
       plusieurs fois&nbsp;;
      </para>
     </listitem>
     <listitem>
      <para>
       <literal>+</literal> d�note la r�p�tition des �l�ments pr�c�dents, une
       ou plusieurs fois&nbsp;;
      </para>
     </listitem>
     <listitem>
      <para>
       les parenth�ses <literal>()</literal> peuvent �tre utilis�es pour grouper des
       �l�ments en un seul �l�ment logique&nbsp;;
      </para>
     </listitem>
     <listitem>
      <para>
       une expression entre crochets <literal>[...]</literal> sp�cifie une
       classe de caract�res, comme dans les expressions rationnelles POSIX.
      </para>
     </listitem>
    </itemizedlist>

     Les r�p�titions encadr�es (<literal>?</literal> et <literal>{...}</literal>) ne sont
     pas permises bien qu'elles existent en POSIX. De m�me, le point
     (<literal>.</literal>) n'est pas un m�ta-caract�re.
    </para>

    <para>
     Comme avec <function>LIKE</function>, un antislash d�sactive la signification
     sp�ciale de tous les m�ta-caract�res&nbsp;; un autre caract�re
     d'�chappement peut �tre sp�cifi� avec <literal>ESCAPE</literal>.
    </para>

   <para>
    Quelques exemples&nbsp;:
<programlisting>'abc' SIMILAR TO 'abc'      <lineannotation>true</lineannotation>
'abc' SIMILAR TO 'a'        <lineannotation>false</lineannotation>
'abc' SIMILAR TO '%(b|d)%'  <lineannotation>true</lineannotation>
'abc' SIMILAR TO '(b|c)%'   <lineannotation>false</lineannotation></programlisting>
   </para>

    <para>
     La fonction <function>substring</function> avec trois param�tres,
     <function>substring(<replaceable>cha�ne</replaceable> from
     <replaceable>motif</replaceable> for
     <replaceable>caract�re d'�chappement</replaceable>)</function>, fournit
     l'extraction d'une sous-cha�ne correspondant � un
     motif d'expression rationnelle SQL. Comme avec
     <literal>SIMILAR TO</literal>, le motif fourni doit correspondre � la
     cha�ne de donn�es enti�re, sinon la fonction �choue et renvoie NULL. Pour
     indiquer la partie du motif � retourner en cas de succ�s,
     le motif doit contenir deux occurrences du caract�re d'�chappement suivi
     d'un guillemet double (<literal>"</literal>). Le texte correspondant � la portion
     du motif entre ces deux marqueurs est renvoy�.
    </para>

   <para>
    Quelques exemples&nbsp;:
<programlisting>substring('foobar' from '%#"o_b#"%' for '#')  
<lineannotation>oob</lineannotation>
substring('foobar' from '#"o_b#"%' for '#')   
<lineannotation>NULL</lineannotation></programlisting>
   </para>
  </sect2>

  <sect2 id="functions-posix-regexp">
   <title>Expressions rationnelles <acronym>POSIX</acronym></title>

   <indexterm zone="functions-posix-regexp">
    <primary>expression rationnelle</primary>
    <seealso>correspondance de mod�le</seealso>
   </indexterm>

   <para>
    Le <xref linkend="functions-posix-table"/> liste les op�rateurs disponibles
    pour la correspondance de motifs � partir d'expressions rationnelles
    POSIX.
   </para>

   <table id="functions-posix-table">
    <title>Op�rateurs de correspondance des expressions rationnelles</title>

    <tgroup cols="3">
     <colspec colnum="1" colwidth="0.3*"/>
     <colspec colnum="2" colwidth="1.7*"/>
     <colspec colnum="3" colwidth="1*"/>
     <thead>
      <row>
       <entry>Op�rateur</entry>
       <entry>Description</entry>
       <entry>Exemple</entry>
      </row>
     </thead>

      <tbody>
       <row>
        <entry><literal>~</literal> </entry>
        <entry>Correspondance d'expression rationnelle, en tenant compte
         de la casse</entry>
        <entry><literal>'thomas' ~ '.*thomas.*'</literal></entry>
       </row>

       <row>
        <entry><literal>~*</literal> </entry>
        <entry>Correspondance d'expression rationnelle, sans tenir compte
         de la casse</entry>
        <entry><literal>'thomas' ~* '.*Thomas.*'</literal></entry>
       </row>

       <row>
        <entry><literal>!~</literal> </entry>
        <entry>Non-correspondance d'expression rationnelle, en tenant compte
         de la casse</entry>
        <entry><literal>'thomas' !~ '.*Thomas.*'</literal></entry>
       </row>

       <row>
        <entry><literal>!~*</literal> </entry>
        <entry>Non-correspondance d'expression rationnelle, sans tenir compte
         de la casse</entry>
        <entry><literal>'thomas' !~* '.*vadim.*'</literal></entry>
       </row>
      </tbody>
     </tgroup>
    </table>

    <para>
     Les expressions rationnelles <acronym>POSIX</acronym> sont un outil de
     correspondance de motifs plus puissant que les op�rateurs
     <function>LIKE</function> et <function>SIMILAR TO</function>. Beaucoup d'outils
     Unix comme <command>egrep</command>, <command>sed</command> ou
     <command>awk</command> utilisent un langage de correspondance de mod�les
     similaire � celui d�crit ici.
    </para>

    <para>
     Une expression rationnelle est une s�quence de caract�res repr�sentant une
     d�finition abr�g�e d'un ensemble de cha�nes (un <firstterm>ensemble
     rationnel</firstterm>). Une cha�ne est d�clar�e correspondre � une
     expression rationnelle si elle est membre de l'ensemble rationnel d�crit
     par l'expression rationnelle. Comme avec <function>LIKE</function>, les
     caract�res du motif correspondent exactement aux caract�res de le cha�ne sauf
     s'ils repr�sentent des caract�res sp�ciaux dans le langage des expressions
     rationnelles &mdash; mais les expressions rationnelles utilisent des caract�res
     sp�ciaux diff�rents de ceux utilis�s par <function>LIKE</function>. Contrairement
     aux motifs de <function>LIKE</function>, une expression rationnelle peut
     avoir une correspondance en toute place de la cha�ne, sauf si l'expression
     rationnelle est explicitement ancr�e au d�but ou � la fin de la cha�ne.
    </para>

   <para>
    Quelques exemples&nbsp;:
<programlisting>'abc' ~ 'abc'    <lineannotation>true</lineannotation>
'abc' ~ '^a'     <lineannotation>true</lineannotation>
'abc' ~ '(b|d)'  <lineannotation>true</lineannotation>
'abc' ~ '^(b|c)' <lineannotation>false</lineannotation></programlisting>
   </para>

    <para>
     La fonction <function>substring</function> avec deux param�tres,
     <function>substring(<replaceable>cha�ne</replaceable> from
     <replaceable>motif</replaceable>)</function>, extrait une sous-cha�ne qui
     correspond � un motif d'expression rationnelle
     POSIX. Elle renvoie NULL s'il n'y a pas de correspondance, la portion
     de texte correspondant au mod�le dans le cas contraire. Mais si le motif
     contient des parenth�ses, c'est la portion de texte qui correspond � la
     premi�re sous-expression entre parenth�ses (la premi�re dont la parenth�se
     gauche appara�t) qui est renvoy�e. Il est possible de placer toute
     l'expression entre parenth�ses pour pouvoir utiliser des parenth�ses �
     l'int�rieur sans d�clencher cette exception. 
     Si des parenth�ses sont n�cessaires dans le motif avant la sous-expression
     � extraire, il faut utiliser les propri�t�s des parenth�ses
     non-capturantes d�crites plus bas.
    </para>

   <para>
    Quelques exemples&nbsp;:
<programlisting>substring('foubar' from 'o.b')     <lineannotation>oub</lineannotation>
substring('foubar' from 'o(.)b')   <lineannotation>u</lineannotation></programlisting>
   </para>

    <para>
     La fonction <function>regexp_replace</function> substitue un
     nouveau texte aux sous-cha�nes correspondantes des motifs
     d'expressions rationnelles. Elle a la syntaxe
     <function>regexp_replace</function>(<replaceable>source</replaceable>,
     <replaceable>motif</replaceable>, <replaceable>remplacement</replaceable>
     <optional>, <replaceable>options</replaceable> </optional>). La cha�ne
     <replaceable>source</replaceable> est renvoy�e non modifi�e s'il n'existe pas de
     correspondance avec <replaceable>motif</replaceable>. S'il existe une correspondance,
     la cha�ne <replaceable>source</replaceable> est renvoy�e avec la cha�ne
     <replaceable>remplacement</replaceable> substitu�e � la sous-cha�ne
     correspondante. La cha�ne <replaceable>remplacement</replaceable> peut contenir
     <literal>\</literal><replaceable>n</replaceable>, avec <replaceable>n</replaceable> de
     <literal>1</literal> � <literal>9</literal>, pour indiquer que la <replaceable>n</replaceable>-i�me
     sous-cha�ne source correspondante doit �tre ins�r�e. Elle peut aussi
     contenir <literal>\&amp;</literal> pour indiquer que la sous-cha�ne
     correspondant au motif entier doit �tre ins�r�e. On �crit
     <literal>\\</literal> pou placer un antislash litt�ral dans
     le texte de remplacement (comme toujours, les
     antislashs doivent �tre doubl�s dans les libell�s, si la syntaxe
     d'�chappement de cha�nes est utilis�e).
     Le param�tre
     <replaceable>options</replaceable> est une cha�ne optionnelle de drapeaux
     (0 ou plus) d'une lettre qui modifie le comportement de la fonction. Le
     drapeau <literal>i</literal> indique une
     recherche insensible � la casse, le drapeau <literal>g</literal>
     un remplacement de chaque sous-cha�ne correspondante (pas uniquement la premi�re).
    </para>

   <para>
    Quelques exemples&nbsp;:
<programlisting>regexp_replace('foobarbaz', 'b..', 'X')
                                   <lineannotation>fooXbaz</lineannotation>
regexp_replace('foobarbaz', 'b..', 'X', 'g')
                                   <lineannotation>fooXX</lineannotation>
regexp_replace('foobarbaz', 'b(..)', E'X\\1Y', 'g')
                                   <lineannotation>fooXarYXazY</lineannotation></programlisting>
   </para>

   <para>
    Les expressions rationnelles de <productname>PostgreSQL</productname> sont
    d�velopp�es � partir d'un paquetage �crit par Henry Spencer. La plupart
    des descriptions d'expressions rationnelles ci-dessous sont copi�es
    directement de son manuel.
   </para>

<!-- derived from the re_syntax.n man page -->

   <sect3 id="posix-syntax-details">
    <title>D�tails des expressions rationnelles</title>

   <para>
    Les expressions rationnelles (<acronym>ER</acronym>s), telles que
    d�finies dans <acronym>POSIX</acronym> 1003.2, existent sous deux
    formes&nbsp;: les <acronym>ER</acronym> <firstterm>�tendues</firstterm> ou
    <acronym>ERE</acronym> (en gros celles de <command>egrep</command>) et les
    <acronym>ER</acronym> <firstterm>basiques</firstterm> ou
    <acronym>ERB</acronym> (<acronym>BRE</acronym> en anglais)
    (en gros celles d'<command>ed</command>).
    <productname>PostgreSQL</productname> supporte les deux formes et
    y ajoute quelques extensions ne faisant pas partie du standard
    POSIX mais largement utilis�es gr�ce � leur
    disponibilit� dans les langages de programmation tels que Perl et Tcl.
    Les <acronym>ER</acronym> qui utilisent ces extensions non POSIX sont appel�es
    des <acronym>ER</acronym> <firstterm>avanc�es</firstterm> ou
    <acronym>ERA</acronym> (<acronym>ARE</acronym> en anglais)
    dans cette documentation. Les ERA sont un surensemble exact des ERE alors
    que les ERB ont des incompatibilit�s de notation (sans parler du fait
    qu'elles sont bien plus limit�es). En premier lieu sont d�crits les formats
    ERA et ERE, en pr�cisant les fonctionnalit�s qui ne s'appliquent qu'aux
    ERA.  L'explication des diff�rences des ERB vient ensuite.
   </para>

   <note>
    <para>
     La forme des expressions rationnelles accept�es par
     <productname>PostgreSQL</productname> peut �tre choisie � l'aide du
     param�tre d'ex�cution
     <xref linkend="guc-regex-flavor"/> (d�crit dans le
     <xref linkend="runtime-config"/>). La configuration habituelle est
     <literal>advanced</literal> (NdT&nbsp;: pour avanc�es) mais il est possible
     de s�lectionner <literal>extended</literal> (pour �tendues) pour obtenir un
     maximum de compatibilit� avec les versions ant�rieures � la version 7.4 de
     <productname>PostgreSQL</productname>.
    </para>
   </note>

   <para>
    Une expression rationnelle est d�finie par une ou plusieurs
    <firstterm>branches</firstterm> s�par�es par des caract�res
    <literal>|</literal>. Elle �tablit une correspondance avec tout ce qui
    correspond � une des branches.
   </para>

   <para>
    Une branche contient des <firstterm>atomes quantifi�s</firstterm> ou
    <firstterm>contraintes</firstterm>, concat�n�s. Elle �tablit une correspondance
    pour le premier suivi d'une correspondance pour le second, etc&nbsp;; une
    branche vide �tablit une correspondance avec une cha�ne vide.   
   </para>

   <para>
    Un atome quantifi� est un <firstterm>atome</firstterm> �ventuellement suivi d'un
    <firstterm>quantifieur</firstterm> unique. Sans quantifieur, il �tablit une
    correspondance avec l'atome. Avec un quantifieur, il peut �tablir un
    certain nombre de correspondances avec l'atome. Un <firstterm>atome</firstterm>
    est une des possibilit�s du <xref linkend="posix-atoms-table"/>.
    Les quantifieurs possibles et leurs significations sont disponibles dans le
    <xref linkend="posix-quantifiers-table"/>.
   </para>

<!-- SAS 20070719 : to match doit pouvoir se traduire diff�rement de
correspondre. Cela engendre en effet des difficult�s de compr�hension, voire
une affaiblissement conceptuel du message original lors de sa traduction... -->
   <para>
    Une <firstterm>contrainte</firstterm> �tablit une correspondance avec une
    cha�ne vide, mais cette correspondance n'est �tablie que lorsque des
    conditions sp�cifiques sont remplies.
    Une contrainte peut �tre utilis�e l� o� un atome peut l'�tre, sauf qu'elle
    ne peut pas �tre suivie d'un quantificateur.
    Les contraintes simples sont affich�es dans le <xref
    linkend="posix-constraints-table"/>&nbsp;; quelques contraintes
    suppl�mentaires sont d�crites plus loin.
   </para>


   <table id="posix-atoms-table">
    <title>Atomes d'expressions rationnelles</title>

    <tgroup cols="2">
     <colspec colnum="1" colwidth="0.4*"/>
     <colspec colnum="2" colwidth="1.6*"/>
     <thead>
      <row>
       <entry>Atome</entry>
       <entry>Description</entry>
      </row>
     </thead>

      <tbody>
       <row>
       <entry><literal>(</literal><replaceable>re</replaceable><literal>)</literal> </entry>
       <entry>(o� <replaceable>re</replaceable> est toute expression rationnelle)
        �tablit une correspondance avec <replaceable>re</replaceable>, la
        correspondance �tant conserv�e en vue d'un �ventuel report</entry>
       </row>

       <row>
       <entry><literal>(?:</literal><replaceable>re</replaceable><literal>)</literal> </entry>
       <entry>comme ci-dessus mais la correspondance n'est pas conserv�e pour
       report
       (un ensemble de parenth�ses <quote>sans capture</quote>)
       (seulement pour les ERA) </entry>
       </row>

       <row>
       <entry><literal>.</literal> </entry>
       <entry>correpondance avec tout caract�re unique</entry>
       </row>

       <row>
       <entry><literal>[</literal><replaceable>caract�res</replaceable><literal>]</literal> </entry>
       <entry>une <firstterm>expression entre crochets</firstterm>, qui �tablit
       une correspondance avec tout <replaceable>caract�res</replaceable> (voir la
       <xref linkend="posix-bracket-expressions"/> pour plus de d�tails) </entry>
       </row>

       <row>
       <entry><literal>\</literal><replaceable>k</replaceable> </entry>
       <entry>(o� <replaceable>k</replaceable> n'est pas un caract�re
       alpha-num�rique) �tablit une correspondance avec ce caract�re, consid�r�
       comme caract�re ordinaire. Par exemple, <literal>\\</literal> �tablit
       une correspondance avec un caract�re antislash </entry>
       </row>

       <row>
       <entry><literal>\</literal><replaceable>c</replaceable> </entry>
       <entry>avec <replaceable>c</replaceable> un caract�re alphanum�rique
       (�ventuellement suivi d'autres caract�res)
       est un <firstterm>�chappement</firstterm>, voir la
       <xref linkend="posix-escape-sequences"/>
       (ERA seulement&nbsp;; pour les ERE et ERB, �tablit une correspondance
       avec <replaceable>c</replaceable>) </entry>
       </row>

       <row>
       <entry><literal>{</literal> </entry>
       <entry>lorsqu'il est suivi d'un caract�re autre qu'un chiffre, �tablit
       une correspondance avec l'accolade ouvrante <literal>{</literal>&nbsp;;
       suivi d'un chiffre, c'est le d�but d'une
       <replaceable>limite</replaceable> (voir ci-dessous)</entry>
       </row>

       <row>
       <entry><replaceable>x</replaceable> </entry>
       <entry>o� <replaceable>x</replaceable> est un caract�re unique sans signification,
       �tablit une correspondance avec ce caract�re</entry>
       </row>
      </tbody>
     </tgroup>
    </table>

   <para>
    Une ER ne peut pas se terminer par <literal>\</literal>.
   </para>

   <note>
    <para>
     L'antislash (<literal>\</literal>) a d�j� une
     signification particuli�re dans les cha�nes litt�rales
     <productname>PostgreSQL</productname>. Pour �crire un motif contenant un
     antislash, il faut �crire deux antislashs dans l'instruction, en supposant
     que la syntaxe de cha�ne d'�chappement est utilis�e.
    </para>
   </note>

<!-- Quantifier : quantificateur comme �crit plus haut ou quantifieur ? -->
   <table id="posix-quantifiers-table">
    <title>quantificateur d'expressions rationnelles</title>

    <tgroup cols="2">
     <colspec colnum="1" colwidth="0.4*"/>
     <colspec colnum="2" colwidth="1.6*"/>
     <thead>
      <row>
       <entry>quantificateur</entry>
       <entry>Correspondance</entry>
      </row>
     </thead>

      <tbody>
       <row>
       <entry><literal>*</literal> </entry>
       <entry>une s�quence de 0 ou plus correspondance(s) de l'atome </entry>
       </row>

       <row>
       <entry><literal>+</literal> </entry>
       <entry>une s�quence de 1 ou plus correspondance(s) de l'atome </entry>
       </row>

       <row>
       <entry><literal>?</literal> </entry>
       <entry>une s�quence de 0 ou 1 correspondance de l'atome </entry>
       </row>

       <row>
       <entry><literal>{</literal><replaceable>m</replaceable><literal>}</literal> </entry>
       <entry>une s�quence d'exactement <replaceable>m</replaceable>
       correspondances de l'atome
</entry>
       </row>

       <row>
       <entry><literal>{</literal><replaceable>m</replaceable><literal>,}</literal> </entry>
       <entry>une s�quence de <replaceable>m</replaceable> ou plus
       correspondances de l'atome
</entry>
       </row>

       <row>
       <entry>
       <literal>{</literal><replaceable>m</replaceable><literal>,</literal><replaceable>n</replaceable><literal>}</literal>
</entry>
       <entry>une s�quence de <replaceable>m</replaceable> � <replaceable>n</replaceable>
       (inclus) correspondances de l'atome&nbsp;; <replaceable>m</replaceable> ne doit pas
       �tre sup�rieur � <replaceable>n</replaceable> </entry>
       </row>

<!-- greedy : gourmande ? Que cela signifie-t-il ? -->
       <row>
       <entry><literal>*?</literal> </entry>
       <entry>version non gourmande de <literal>*</literal> </entry>
       </row>

       <row>
       <entry><literal>+?</literal> </entry>
       <entry>version non gourmande de <literal>+</literal> </entry>
       </row>

       <row>
       <entry><literal>??</literal> </entry>
       <entry>version non gourmande de <literal>?</literal> </entry>
       </row>

       <row>
       <entry><literal>{</literal><replaceable>m</replaceable><literal>}?</literal> </entry>
       <entry>version non gourmande de <literal>{</literal><replaceable>m</replaceable><literal>}</literal>
</entry>
       </row>

       <row>
       <entry><literal>{</literal><replaceable>m</replaceable><literal>,}?</literal> </entry>
       <entry>version non gourmande de
<literal>{</literal><replaceable>m</replaceable><literal>,}</literal> </entry>
       </row>

       <row>
       <entry>
      
<literal>{</literal><replaceable>m</replaceable><literal>,</literal><replaceable>n</replaceable><literal>}?</literal>
</entry>
       <entry>version non gourmande de
<literal>{</literal><replaceable>m</replaceable><literal>,</literal><replaceable>n</replaceable><literal>}</literal>
</entry>
       </row>
      </tbody>
     </tgroup>
    </table>

   <para>
    Les formes qui utilisent <literal>{</literal><replaceable>...</replaceable><literal>}</literal>
    sont appel�es <firstterm>limite</firstterm>s.
    Les nombres <replaceable>m</replaceable> et <replaceable>n</replaceable> � l'int�rieur d'une limite
    sont des entiers non sign�s dont les valeurs vont de 0 � 255 inclus.
   </para>

    <para>
     Les quantificateurs <firstterm>non gourmands</firstterm> (disponibles uniquement avec les ERA)
     correspondent aux m�me possibilit�s que leurs �quivalents normaux
     (<firstterm>gourmand</firstterm>),
     mais pr�f�rent le plus petit nombre de correspondances au plus grand nombre.
     Voir la <xref linkend="posix-matching-rules"/> pour plus de d�tails.
   </para>

   <note>
    <para>
     Un quantificateur ne peut pas imm�diatement suivre un autre quantificateur.
     Il ne peut pas non plus d�buter une expression ou sous-expression
     ni suivre <literal>^</literal> ou <literal>|</literal>.
    </para>
   </note>

   <table id="posix-constraints-table">
    <title>Contraintes des expressions rationnelles</title>

    <tgroup cols="2">
     <colspec colnum="1" colwidth="0.4*"/>
     <colspec colnum="2" colwidth="1.6*"/>
     <thead>
      <row>
       <entry>Contrainte</entry>
       <entry>Description</entry>
      </row>
     </thead>

      <tbody>
       <row>
       <entry><literal>^</literal></entry>
       <entry>correspondance de d�but de cha�ne</entry>
       </row>

       <row>
       <entry><literal>$</literal></entry>
       <entry>correspondance de fin de cha�ne</entry>
       </row>

       <row>
       <entry><literal>(?=</literal><replaceable>er</replaceable><literal>)</literal></entry>
       <entry><firstterm>positive lookahead</firstterm> (recherche positive) 
       �tablit une correspondance avec tout point o� une
       sous-cha�ne qui correspond � <replaceable>er</replaceable> d�bute
       (uniquement pour les ERA)</entry>
       </row>

       <row>
       <entry><literal>(?!</literal><replaceable>er</replaceable><literal>)</literal></entry>
       <entry><firstterm>negative lookahead</firstterm> (recherche n�gative)
       �tablit une correspondance avec tout point o� aucune
       sous-cha�ne qui correspond � <replaceable>re</replaceable> ne d�bute
       (uniquement pour les ERA)</entry>
       </row>
      </tbody>
     </tgroup>
    </table>

   <para>
    Les contraintes <quote>lookahead</quote> ne doivent pas contenir de
    <firstterm>r�f�rences arri�res</firstterm> (voir la <xref
    linkend="posix-escape-sequences"/>), et toutes les parenth�ses contenues
    sont consid�r�es comme non capturantes.
   </para>
   </sect3>

   <sect3 id="posix-bracket-expressions">
    <title>Expressions avec crochets</title>

   <para>
    Une <firstterm>expression entre crochets</firstterm> est une liste de
    caract�res contenue dans <literal>[]</literal>. Une correspondance est
    habituellement �tablie avec tout caract�re de la liste (voir cependant plus
    bas). Si la liste d�bute par <literal>^</literal>, la correspondance est
    �tablie avec tout caract�re <emphasis>non</emphasis>
    compris dans la liste. Si deux caract�res de la liste sont s�par�s par un
    tiret (<literal>-</literal>), il s'agit d'un raccourci pour repr�senter tous les caract�res
    compris entre ces deux-l�, c'est-�-dire qu'en <acronym>ASCII</acronym>,
    <literal>[0-9]</literal> correspond � tout chiffre. 
    Deux s�quences ne peuvent pas partager une limite, par exemple 
    <literal>a-c-e</literal>. Les plages �tant fortement li�es � la s�quence de
    tri (<foreignphrase>collate</foreignphrase>), il est recommand� de ne pas
    les utiliser dans les programmes portables.
   </para>

   <para>
    Un <literal>]</literal> peut �tre inclus dans la liste s'il en est le
    premier caract�re (�ventuellement pr�c�d� de 
    <literal>^</literal>). 
    Un <literal>-</literal> peut �tre inclus dans la liste s'il en est le
    premiser ou le dernier caract�re ou s'il est la deuxi�me borne d'une plage.
    Un <literal>-</literal> peut �tre utilis� comme premi�re borne d'une plage
    s'il est entour� par <literal>[.</literal> et <literal>.]</literal> et
    devient de ce fait un �l�ment d'interclassement (<foreignphrase>collating
    element</foreignphrase>).
    <!-- collating element ? El�ment de coh�sion ou collate dans le sens
    lc_collate, ordre de tri ? -->
    � l'exception de ces caract�res, 
    des combinaisons utilisant <literal>[</literal> (voir les
    paragraphes suivants) et des �chappements (uniquement pour les ERA), tous
    les autres caract�res sp�ciaux perdent leur signification sp�ciale �
    l'int�rieur d'une expression entre crochets. En particulier,
    <literal>\</literal> n'est pas sp�cial lorsqu'il suit les r�gles des ERE ou
    des ERB bien qu'il soit sp�cial (en tant qu'introduction d'un �chappement)
    dans les ERA.
   </para>

<!-- Alors, l�, on nage en pleine incompr�hensibilit� 
     La suite est � reprendre. Mais il me manque la compr�hension du terme
     'collating' 
     en gros : collating : fusionnement
		collating sequence : sequence ou ordre d'interclassement
		collate : interclasser-->
   <para>
    Dans une expression entre crochets, un �l�ment d'interclassement (un
    caract�re, une s�quence de caract�res multiples qui s'interclasse comme un
    �l�ment unique, ou le nom d'une s�quence d'interclassement) entour� de
    <literal>[.</literal> et <literal>.]</literal> repr�sente la s�quence de
    caract�res de cet �l�ment d'interclassemernt. La s�quence est un �l�ment
    unique de la liste dans l'expression entre crochets. Une expression entre crochets
    contenant un �l�ment d'interclassement multi-caract�res peut donc correspondre
    � plusieurs caract�res (par exemple, si la s�quence d'interclassement inclut un 
    �l�ment d'interclassement <literal>ch</literal>, alors l'ER
    <literal>[[.ch.]]*c</literal> �tablit une correspondance avec les cinq
    premiers caract�res de <literal>chchcc</literal>.
   </para>

   <note>
    <para>
     <productname>PostgreSQL</productname> n'a pas, � ce jour, d'�l�ments
     d'interclassement multi-caract�res. L'information port� ici d�crit un
     �ventuel comportement futur.
    </para>
   </note>

   <para>
    Dans une expression entre crochets, un �l�ment d'interclassement
    �crit entre <literal>[=</literal> et <literal>=]</literal> est une classe
    d'�quivalence qui repr�sente les s�quences de caract�res de tous les
    �l�ments d'interclassement �quivalents � celui-l�, lui-m�me �tant compris (s'il
    n'existe pas d'�l�ment d'interclassement �quivalent, le traitement
    correspond � celui obtenu si
    les d�limiteurs sont <literal>[.</literal> et
    <literal>.]</literal>). Par exemple, si <literal>o</literal> et
    <literal>^</literal> sont les membres d'une classe d'�quivalence, alors
    <literal>[[=o=]]</literal>, <literal>[[=^=]]</literal> et
    <literal>[o^]</literal> sont tous synonymes. Une classe d'�quivalence
    ne peut pas �tre la borne d'une plage.
   </para>

   <para>
    Dans une expression entre crochets, le nom d'une classe de
    caract�res �crit entre <literal>[:</literal> et <literal>:]</literal>
    repr�sente la liste de tous les caract�res appartenant � cette classe.
    Les noms de classes de caract�res standard sont <literal>alnum</literal>,
    <literal>alpha</literal>, <literal>blank</literal>,
    <literal>cntrl</literal>, <literal>digit</literal>,
    <literal>graph</literal>, <literal>lower</literal>,
    <literal>print</literal>, <literal>punct</literal>,
    <literal>space</literal>, <literal>upper</literal>,
    <literal>xdigit</literal>. Ils correspondent aux classes de caract�re
    d�finies dans <citerefentry><refentrytitle>ctype</refentrytitle><manvolnum>3</manvolnum></citerefentry>.
    Une locale peut en fournir d'autres. Une classe de caract�res ne peut pas
    �tre utilis�e comme borne d'une plage.
   </para>

   <para>
    Il existe deux cas sp�ciaux d'expressions entre crochets&nbsp;: les
    expressions entre crochets <literal>[[:&lt;:]]</literal> et
    <literal>[[:&gt;:]]</literal> sont des contraintes, qui �tablissent une
    correspondance avec des cha�nes
    vides respectivement au d�but et � la fin d'un mot. Un mot est d�fini comme
    une s�quence de caract�res de mot qui n'est ni pr�c�d�e ni suivie de
    caract�res de mot.
    Un caract�re de mot est un caract�re <literal>alnum</literal> (comme d�fini par
<citerefentry><refentrytitle>ctype</refentrytitle><manvolnum>3</manvolnum></citerefentry>)
    ou un tiret bas. C'est une extension, compatible avec, mais non sp�cifi�e 
    dans <acronym>POSIX</acronym> 1003.2, et devant �tre utilis�e avec
    pr�caution dans les logiciels con�us pour �tre portables sur d'autres
    syst�mes. Les �chappements de contraintes d�crits ci-dessous sont
    g�n�ralement pr�f�rables (ils ne sont pas plus standard mais 
    certainement plus simples � saisir).
   </para>
   </sect3>

<!-- Jusque-l�, a priori -->
<!-- OK, continuons -->
   <sect3 id="posix-escape-sequences">
    <title>�chappement d'expressions rationnelles</title>

   <para>
    Les <firstterm>�chappements</firstterm> sont des s�quences sp�ciales
    d�butant avec <literal>\</literal> suivi d'un caract�re
    alphanum�rique. Il existe plusieurs sortes d'�chappements&nbsp;:
    entr�e de caract�re, raccourci de classe, �chappement de contraintes et
    r�f�rences arri�res. Un <literal>\</literal> suivi d'un caract�re alphanum�rique
    mais ne constituant pas un �chappement valide est ill�gal dans une ERA.
    Pour les ERE, il n'y pas d'�chappement&nbsp;: en dehors d'une expression
    entre crochets, un <literal>\</literal> suivi d'un caract�re alphanum�rique
    repr�snete simplement ce caract�re (comme ordinaire) et, � l'int�rieur d'une
    expression entre crochets, <literal>\</literal> est un caract�re ordinaire. 
    (Ce dernier cas constitue l'incompatibilit� r�elle entre les ERE et les ERA).
   </para>

   <para>
    Les <firstterm>�chappements d'entr�e de caract�re</firstterm> existent pour faciliter
    la sp�cification de caract�res non affichables et donc ind�sirables dans
    les ER. Ils sont pr�snt�s dans le <xref linkend="posix-character-entry-escapes-table"/>.
   </para>

   <para>
    Les <firstterm>�chappements de raccourci de classe</firstterm> fournissent des
    raccourcis pour des classes de caract�res commun�ment utilis�es. Ils sont
    pr�sent�s dans le <xref linkend="posix-class-shorthand-escapes-table"/>.
   </para>

   <para>
    Un <firstterm>�chappement de contrainte</firstterm> est une contrainte,
    fournissant une correspondance avec la cha�ne vide si des conditions
    sp�cifiques sont rencontr�es, �crit comme un �chappement. Ils sont
    pr�sent�s dans le <xref linkend="posix-constraint-escapes-table"/>.
   </para>

   <para>
    Une <firstterm>r�f�rence arri�re</firstterm>
    (<literal>\</literal><replaceable>n</replaceable>) offre un correspondance
    avec la m�me cha�ne que la sous-expression entre parenth�ses pr�c�dente
    sp�cifi�e par le nombre <replaceable>n</replaceable> (voir le <xref
    linkend="posix-constraint-backref-table"/>). Par exemple,
    <literal>([bc])\1</literal> peut correspondre � <literal>bb</literal> ou <literal>cc</literal>
    mais ni � <literal>bc</literal> ni � <literal>cb</literal>. La sous-expression doit
    pr�c�der compl�tement la r�f�rence dans l'ER. Les sous-expressions sont
    num�rot�es dans l'ordre des parenth�ses ouvrantes. Les parenth�ses non
    capturantes ne d�finissent pas de sous-expressions.
   </para>

   <note>
    <para>
     Le symbole <literal>\</literal> qui d�bute une s�quence d'�chappement doit �tre
     obligatoirement doubl� pour saisir le motif comme une cha�ne SQL constante. Par
     exemple&nbsp;:
<programlisting>'123' ~ E'^\\d{3}' <lineannotation>true</lineannotation></programlisting>
    </para>
   </note>

   <table id="posix-character-entry-escapes-table">
    <title>�chappements de caract�re dans les expressions
rationnelles</title>

    <tgroup cols="2">
     <colspec colnum="1" colwidth="0.4*"/>
     <colspec colnum="2" colwidth="1.6*"/>
     <thead>
      <row>
       <entry>�chappement</entry>
       <entry>Description</entry>
      </row>
     </thead>

      <tbody>
       <row>
       <entry><literal>\a</literal> </entry>
       <entry>caract�re alerte (cloche), comme en C </entry>
       </row>

       <row>
       <entry><literal>\b</literal> </entry>
       <entry>effacement (<foreignphrase>backspace</foreignphrase>), comme en C </entry>
       </row>

       <row>
       <entry><literal>\B</literal> </entry>
       <entry>synonyme de <literal>\</literal> pour aider � la r�duction des doubles
       antislashs </entry>
       </row>

       <row>
       <entry><literal>\c</literal><replaceable>X</replaceable> </entry>
       <entry>(o� <replaceable>X</replaceable> est un caract�re quelconque) le caract�re
       dont les cinq bits de poids faible sont les m�mes que ceux de 
       <replaceable>X</replaceable> et dont tous les autres bits sont � z�ro </entry>
       </row>

       <row>
       <entry><literal>\e</literal> </entry>
       <entry>le caract�re dont le nom de s�quence d'interclassement est
       <literal>ESC</literal>, ou le caract�re de valeur octale
       033 </entry>
       </row>

       <row>
       <entry><literal>\f</literal> </entry>
       <entry>retour chariot (<foreignphrase>form feed</foreignphrase>), comme en C </entry>
       </row>

       <row>
       <entry><literal>\n</literal> </entry>
       <entry>retour � la ligne (<foreignphrase>newline</foreignphrase>), comme en C </entry>
       </row>

       <row>
       <entry><literal>\r</literal> </entry>
       <entry>retour chariot (<foreignphrase>carriage return</foreignphrase>), comme en C </entry>
       </row>

       <row>
       <entry><literal>\t</literal> </entry>
       <entry>tabulation horizontale, comme en C </entry>
       </row>

       <row>
       <entry><literal>\u</literal><replaceable>wxyz</replaceable> </entry>
       <entry>(o� <replaceable>wxyz</replaceable> repr�sente exactement quatre chiffres
       hexad�cimaux) le caract�re UTF16 (Unicode, 16 bits)
       <literal>U+</literal><replaceable>wxyz</replaceable>
       dans l'ordre local des octets </entry>
       </row>

       <row>
       <entry><literal>\U</literal><replaceable>stuvwxyz</replaceable> </entry>
       <entry>(o� <replaceable>stuvwxyz</replaceable> repr�sente exactement huit
       chiffres hexad�cimaux) r�serv� pour une extension, hypoth�tique, de l'Unicode vers le 32
       bits
       </entry> 
       </row>

       <row>
       <entry><literal>\v</literal> </entry>
       <entry>tabulation verticale, comme en C </entry>
       </row>

       <row>
       <entry><literal>\x</literal><replaceable>hhh</replaceable> </entry>
       <entry>(o� <replaceable>hhh</replaceable> repr�sente toute s�quence de chiffres
       hexad�cimaux) le caract�re dont la valeur hexad�cimale est
       <literal>0x</literal><replaceable>hhh</replaceable>
       (un simple caract�re, peu importe le nombre de chiffres hexad�cimaux
       utilis�s)
       </entry>
       </row>

       <row>
       <entry><literal>\0</literal> </entry>
       <entry>le caract�re dont la valeur est <literal>0</literal> </entry>
       </row>

       <row>
       <entry><literal>\</literal><replaceable>xy</replaceable> </entry>
       <entry>(o� <replaceable>xy</replaceable> repr�sente exactement deux chiffres
       octaux et qui n'est pas une <firstterm>r�f�rence arri�re</firstterm>)
       le caract�re dont la valeur octale est
       <literal>0</literal><replaceable>xy</replaceable> </entry>
       </row>

       <row>
       <entry><literal>\</literal><replaceable>xyz</replaceable> </entry>
       <entry>(o� <replaceable>xyz</replaceable> repr�sente exactement trois chiffres
       octaux et qui n'est pas une <firstterm>r�f�rence arri�re</firstterm>)
       le caract�re dont la valeur octale est
       <literal>0</literal><replaceable>xyz</replaceable> </entry>
       </row>
      </tbody>
     </tgroup>
    </table>

   <para>
    Les chiffres hexad�cimaux sont <literal>0</literal>-<literal>9</literal>,
    <literal>a</literal>-<literal>f</literal> et <literal>A</literal>-<literal>F</literal>.
    Les chiffres octaux sont <literal>0</literal>-<literal>7</literal>.
   </para>

   <para>
    Les �chappements de caract�res sont toujours pris comme
    des caract�res ordinaires. Par exemple, <literal>\135</literal> est <literal>]</literal>
    en ASCII mais <literal>\135</literal> ne termine pas une expression entre crochets.
   </para>

   <table id="posix-class-shorthand-escapes-table">
    <title>�chappement de raccourcis de classes dans les expressions
rationnelles</title>

    <tgroup cols="2">
     <colspec colnum="1" colwidth="0.4*"/>
     <colspec colnum="2" colwidth="1.6*"/>
     <thead>
      <row>
       <entry>�chappement</entry>
       <entry>Description</entry>
      </row>
     </thead>

      <tbody>
       <row>
       <entry><literal>\d</literal> </entry>
       <entry><literal>[[:digit:]]</literal> </entry>
       </row>

       <row>
       <entry><literal>\s</literal> </entry>
       <entry><literal>[[:space:]]</literal> </entry>
       </row>

       <row>
       <entry><literal>\w</literal> </entry>
       <entry><literal>[[:alnum:]_]</literal>
       (le tiret bas est inclus) </entry>
       </row>

       <row>
       <entry><literal>\D</literal> </entry>
       <entry><literal>[^[:digit:]]</literal> </entry>
       </row>

       <row>
       <entry><literal>\S</literal> </entry>
       <entry><literal>[^[:space:]]</literal> </entry>
       </row>

       <row>
       <entry><literal>\W</literal> </entry>
       <entry><literal>[^[:alnum:]_]</literal>
       (le tiret bas est inclus) </entry>
       </row>
      </tbody>
     </tgroup>
    </table>

   <para>
    Dans les expressions entre crochets, <literal>\d</literal>, <literal>\s</literal>,
    et <literal>\w</literal> perdent leurs crochets externes. <literal>\D</literal>,
    <literal>\S</literal> et <literal>\W</literal> ne sont pas autoris�s.
    (Ainsi, par exemple, <literal>[a-c\d]</literal> est �quivalent �
    <literal>[a-c[:digit:]]</literal>. Mais 
    <literal>[a-c\D]</literal>, qui est �quivalent �
    <literal>[a-c^[:digit:]]</literal>, est interdit).
   </para>

   <table id="posix-constraint-escapes-table">
    <title>�chappements de contraintes dans les expressions rationnelles</title>

    <tgroup cols="2">
     <colspec colnum="1" colwidth="0.4*"/>
     <colspec colnum="2" colwidth="1.6*"/>
     <thead>
      <row>
       <entry>�chappement</entry>
       <entry>Description</entry>
      </row>
     </thead>

      <tbody>
       <row>
       <entry><literal>\A</literal> </entry>
       <entry>n'�tablit une correspondance qu'au d�but de la cha�ne
       (voir la <xref linkend="posix-matching-rules"/> pour comprendre comment ceci
       diff�re de <literal>^</literal>) </entry>
       </row>

       <row>
       <entry><literal>\m</literal> </entry>
       <entry>n'�tablit une correspondance qu'au d�but d'un mot </entry>
       </row>

       <row>
       <entry><literal>\M</literal> </entry>
       <entry>n'�tablit une correspondance qu'� la fin d'un mot </entry>
       </row>

       <row>
       <entry><literal>\y</literal> </entry>
       <entry>n'�tablit de correspondance qu'au d�but ou � la fin d'un mot </entry>
       </row>

       <row>
       <entry><literal>\Y</literal> </entry>
       <entry>n'�tablit de correspondance qu'en dehors du d�but et de la fin d'un mot </entry>
       </row>

       <row>
       <entry><literal>\Z</literal> </entry>
       <entry>n'�tablit de correspondance qu'� la fin d'une cha�ne
       (voir la <xref linkend="posix-matching-rules"/> pour comprendre comment ceci
       diff�re de <literal>$</literal>) </entry>
       </row>
      </tbody>
     </tgroup>
    </table>

   <para>
    Un mot est d�fini suivant la sp�cification �tablit par <literal>[[:&lt;:]]</literal> et
    <literal>[[:&gt;:]]</literal> ci-dessus. Les contraintes d'�chappements sont
    interdites dans les expressions entre crochets.
   </para>

   <table id="posix-constraint-backref-table">
    <title>R�f�rences arri�res dans les expressions rationnelles</title>

    <tgroup cols="2">
     <colspec colnum="1" colwidth="0.4*"/>
     <colspec colnum="2" colwidth="1.6*"/>
     <thead>
      <row>
       <entry>�chappement</entry>
       <entry>Description</entry>
      </row>
     </thead>

      <tbody>
       <row>
       <entry><literal>\</literal><replaceable>m</replaceable> </entry>
       <entry>(o� <replaceable>m</replaceable> est un chiffre diff�rent de z�ro)
       r�f�rence � la <replaceable>m</replaceable>-i�me sous-expression </entry>
       </row>

       <row>
       <entry><literal>\</literal><replaceable>mnn</replaceable> </entry>
       <entry>(o� <replaceable>m</replaceable> est un chiffre diff�rent de z�ro et
       <replaceable>nn</replaceable> quelques chiffres suppl�mentaires, et la valeur
       d�cimale <replaceable>mnn</replaceable> n'est pas plus grande que le nombre de
       parenth�ses fermantes capturantes vues jusque l�) r�f�rence 
       � la <replaceable>mnn</replaceable>-i�me sous-expression </entry>
       </row>
      </tbody>
     </tgroup>
    </table>

   <note>
    <para>
     Il existe une ambigu�t� historique inh�rente entre les �chappements
     de caract�res en octal et les r�f�rences. Cette ambigu�t� est r�solue par
     des heuristiques, comme montr� ci-dessus. Un z�ro en d�but de cha�ne indique
     toujours un �chappement octal. Un caract�re seul diff�rent de z�ro et
     suivi d'un autre caract�re est toujours pris comme une r�f�rence. Une
     s�quence � plusieurs chiffres ne commen�ant pas avec un z�ro est prise comme
     une r�f�rence si elle vient apr�s une sous-expression convenable
     (c'est-�-dire que le nombre fait partie des num�ros autoris�s pour une r�f�rence). Dans le
     cas contraire, il est pris comme nombre octal.
    </para>
   </note>
   </sect3>

   <sect3 id="posix-metasyntax">
    <title>M�tasyntaxe des expressions rationnelles</title>

   <para>
    En plus de la syntaxe principale d�crite ci-dessus, il existe quelques
    formes sp�ciales et autres possibilit�s syntaxiques.
   </para>

   <para>
    Normalement, le type d'ER consid�r� est d�termin� par
    <varname>regex_flavor</varname>. N�anmoins, ce param�tre peut �tre surcharg� par un pr�fixe
    <firstterm>directeur</firstterm>. Si une ER commence
    par <literal>***:</literal>, le reste de l'ER est consid�r� comme une ERA,
    quelque soit la valeur de <varname>regex_flavor</varname>.
    Si une ER commence par <literal>***=</literal>, le reste
    de l'ER est consid�r� comme une cha�ne litt�rale, tous les caract�res �tant
    donc consid�r�s ordinaires.
   </para>

   <para>
    Une ERA peut d�buter par des <firstterm>options int�gr�es</firstterm>&nbsp;:
    une s�quence <literal>(?</literal><replaceable>xyz</replaceable><literal>)</literal>
    (o� <replaceable>xyz</replaceable> correspond � un ou plusieurs caract�res
    alphab�tiques) sp�cifie les options affectant le reste de l'ER. Ces options
    surchargent toutes les options pr�c�demment d�termin�es (incluant le type de
    l'ER et la sensibilit� � la casse). Les lettres d'options disponibles sont
    indiqu�es dans le <xref linkend="posix-embedded-options-table"/>.
   </para>

   <table id="posix-embedded-options-table">
    <title>Lettres d'option int�gr�es � une ERA</title>

    <tgroup cols="2">
     <colspec colnum="1" colwidth="0.4*"/>
     <colspec colnum="2" colwidth="1.6*"/>
     <thead>
      <row>
       <entry>Option</entry>
       <entry>Description</entry>
      </row>
     </thead>

      <tbody>
       <row>
       <entry><literal>b</literal> </entry>
       <entry>le reste de l'ER est une ERB </entry>
       </row>

       <row>
       <entry><literal>c</literal> </entry>
       <entry>activation de la sensibilit� � la casse (surcharge l'op�rateur
       type) </entry>
       </row>

       <row>
       <entry><literal>e</literal> </entry>
       <entry>le reste de l'ER est une ERE </entry>
       </row>

       <row>
       <entry><literal>i</literal> </entry>
       <entry>d�sactivation de la sensibilit� � la casse (voir la
       <xref linkend="posix-matching-rules"/>) (surcharge l'op�rateur
       type)</entry>
       </row>

       <row>
       <entry><literal>m</literal> </entry>
       <entry>synonyme historique pour <literal>n</literal> </entry>
       </row>

       <row>
       <entry><literal>n</literal> </entry>
       <entry>activation de la sensibilit� aux nouvelles lignes (voir la
       <xref linkend="posix-matching-rules"/>) </entry>
       </row>

       <row>
       <entry><literal>p</literal> </entry>
       <entry>activation de la sensibilit� partielle aux nouvelles lignes (voir
       la <xref linkend="posix-matching-rules"/>) </entry>
       </row>

       <row>
       <entry><literal>q</literal> </entry>
       <entry>le reste de l'ER est une cha�ne litt�rale (<quote>entre
       guillemets</quote>), compos� uniquement de caract�res ordinaires </entry>
       </row>

       <row>
       <entry><literal>s</literal> </entry>
       <entry>d�sactivation de la sensibilit� aux nouvelles lignes (par d�faut)
       </entry>
       </row>

       <row>
       <entry><literal>t</literal> </entry>
       <entry>syntaxe compacte (par d�faut&nbsp;; voir ci-dessous) </entry>
       </row>

       <row>
       <entry><literal>w</literal> </entry>
       <entry>activation de la sensibilit� partielle aux nouvelles lignes
       inverse
       (<quote>�trange</quote>)
       (voir la <xref linkend="posix-matching-rules"/>) </entry>
       </row>

       <row>
       <entry><literal>x</literal> </entry>
       <entry>syntaxe �tendue (voir ci-dessous) </entry>
       </row>
      </tbody>
     </tgroup>
    </table>

   <para>
    Les options int�gr�es prennent effet � la <literal>)</literal>
    terminant la s�quence. Elles ne peuvent appara�tre qu'au d�but d'une
    ERA (apr�s le directeur <literal>***:</literal> s'il y en a un).
   </para>

   <para>
    En plus de la syntaxe habituelle d'une ER (<firstterm>compacte</firstterm>), dans
    laquelle tous les caract�res ont une signification, il existe une syntaxe
    <firstterm>�tendue</firstterm>, accessible en signifiant l'option int�gr�e
    <literal>x</literal>. Avec la syntaxe �tendue, les caract�res espace dans
    l'ER sont ignor�s comme le sont tous les caract�res entre un <literal>#</literal> et
    le retour-chariot qui suit (ou la fin de l'ER). Ceci permet de parapher et
    commenter une ER complexe. Il existe trois exceptions � cette r�gle de base&nbsp;:

    <itemizedlist>
     <listitem>
      <para>
       un caract�re espace ou <literal>#</literal> suivi d'un <literal>\</literal> est
       retenu
      </para>
     </listitem>
     <listitem>
      <para>
       un caract�re espace ou <literal>#</literal> � l'int�rieur d'une expression
       entre crochets est retenu
      </para>
     </listitem>
     <listitem>
      <para>
       un caract�re espace ou un commentaire ne peut pas appara�tre dans les
       symboles multi-caract�res, tels que <literal>(?:</literal>
      </para>
     </listitem>
    </itemizedlist>

    � ce propos, les caract�res espace sont
    l'espace, la tabulation, le retour chariot et tout caract�re
    appartenant � la classe de caract�re <replaceable>space</replaceable>.
   </para>

   <para>
    Enfin, dans une ERA, � l'ext�rieur des expressions entre crochets, la
    s�quence <literal>(?#</literal><replaceable>ttt</replaceable><literal>)</literal>
    (o� <replaceable>ttt</replaceable> est tout texte ne contenant pas <literal>)</literal>) est
    un commentaire, totalement ignor�. L� encore, cela n'est pas permis entre
    les caract�res des symboles multi-caract�res comme <literal>(?:</literal>. De tels
    commentaires sont plus un art�fact historique qu'une fonctionnalit� utile et
    leur utilisation est obsol�te&nbsp;; on utilisera plut�t la syntaxe �tendue.
   </para>

   <para>
    <emphasis>Aucune</emphasis> de ces extensions m�tasyntaxique n'est disponible si un
    directeur initial <literal>***=</literal> indique que la saisie
    utilisateur doit �tre trait�e comme une cha�ne litt�rale plut�t que comme
    une ER.
   </para>
   </sect3>

   <sect3 id="posix-matching-rules">
    <title>R�gles de correspondance des expressions rationnelles</title>

   <para>
    Dans l'hypoth�se o� une ER peut correspondre � plusieurs sous-cha�nes
    d'une cha�ne donn�e, l'ER correspond celle qui appara�t la premi�re dans la
    cha�ne. Si ER peut correspondre � plusieurs sous-cha�nes � partir de ce
    point, c'est soit la correspondance la plus longue possible
    soit la correspondance la plus courte possible qui est retenue suivant que l'ER
    est <firstterm>gourmande</firstterm> ou
    <firstterm>non-gourmande</firstterm>
    (<foreignphrase>greedy/non-greedy</foreignphrase>).
   </para>

<!-- SAS 20070731 : gourmandise est un terme sympathique, mais est-ce le
meilleur ?-->
   <para>
     La gourmandise d'une ER est d�termin�e par les r�gles
     suivantes&nbsp;:
     <itemizedlist>
       <listitem>
         <para>
           la plupart des atomes, et toutes les contraintes, n'ont pas
           d'attribut de gourmandise (parce qu'ils ne peuvent, en aucune fa�on, �tablir de
	   correspondance avec des quantit�s variables de texte)&nbsp;;
         </para>
       </listitem>
       <listitem>
         <para>
           l'ajout de parenth�ses autour d'une ER ne change pas sa
	   gourmandise&nbsp;;
         </para>
       </listitem>
       <listitem>
         <para>
           un atome quantifi� avec un quantificateur � r�p�tition fixe
           (<literal>{</literal><replaceable>m</replaceable><literal>}</literal> ou
           <literal>{</literal><replaceable>m</replaceable><literal>}?</literal>) a la m�me gourmandise
           (�ventuellement aucune) que l'atome lui-m�me&nbsp;;	
         </para>
       </listitem>
       <listitem>
         <para>
           un atome quantifi� avec d'autres quantificateurs standard (dont
<literal>{</literal><replaceable>m</replaceable><literal>,</literal><replaceable>n</replaceable><literal>}</literal>
           avec <replaceable>m</replaceable> �gal � <replaceable>n</replaceable>) est gourmand
           (pr�f�re la plus grande correspondance)&nbsp;;
         </para>
       </listitem>
       <listitem>
         <para>
           un atome quantifi� avec un quantificateur non gourmand (dont
    <literal>{</literal><replaceable>m</replaceable><literal>,</literal><replaceable>n</replaceable><literal>}?</literal>
           avec <replaceable>m</replaceable> �gal � <replaceable>n</replaceable>) n'est pas gourmand
           (pr�f�re la plus courte correspondance)&nbsp;;
         </para>
       </listitem>
       <listitem>
         <para>
           une branche &mdash; c'est-�-dire une ER d�pourvue d'op�rateur
           <literal>|</literal> au sommet &mdash; est aussi gourmande que le
           premier atome quantifi� qu'elle contient qui poss�de un attribut de
	   gourmandise&nbsp;;
         </para>
       </listitem>
       <listitem>
         <para>
           une ER constitu�e au minimum de deux branches connect�es par
           l'op�rateur <literal>|</literal> est toujours gourmande.
         </para>
       </listitem>
     </itemizedlist>
   </para>

   <para>
     Les r�gles ci-dessus associent les attributs de gourmandise non seulement avec
     les atomes quantifi�s individuels, mais aussi avec les branches et les
     ER compl�tes qui contiennent des atomes quantifi�s. Cela signifie que la
     correspondance est �tablie de sorte que la branche, ou l'ER
     compl�te, corresponde � la sous-cha�ne la plus longue ou la plus courte
     possible <emphasis>comme un tout</emphasis>.
     Une fois la longueur de la correspondance compl�te d�termin�e, la partie
     de cette correspondance qui �tablit une correspondance avec une
     sous-expression particuli�re est d�termin�e sur la base de l'attribut de
     gourmandise de cette sous-expression, priorit� �tant donn�e aux sous-expressions commen�ant
     le plus t�t dans l'ER.
   </para>

   <para>
     Exemple de signification de tout cela&nbsp;:
<screen>SELECT SUBSTRING('XY1234Z', 'Y*([0-9]{1,3})');
<lineannotation>Resultat : </lineannotation><computeroutput>123</computeroutput>
SELECT SUBSTRING('XY1234Z', 'Y*?([0-9]{1,3})');
<lineannotation>Resultat : </lineannotation><computeroutput>1</computeroutput></screen>
     Dans le premier cas, l'ER dans son int�gralit� est gourmande parce que <literal>Y*</literal>
     est gourmand. Elle peut correspondre au d�but de <literal>Y</literal> et
     �tabllit une correspondance avec la cha�ne la plus longue � partir de l�,
     soit <literal>Y123</literal>. La sortie reprend la partie entre parenth�ses, soit
     <literal>123</literal>. Dans le second cas, l'ER dans son ensemble n'est
     pas gourmande
     car <literal>Y*?</literal> ne l'est pas. Elle peut correspondre au
     d�but de <literal>Y</literal> et �tablit une correspondance avec la cha�ne la plus courte
     � partir de l�, soit <literal>Y1</literal>. La sous-expression 
     <literal>[0-9]{1,3}</literal> est gourmande mais elle ne peut pas changer la
     d�cision sur la longueur totale de la correspondance&nbsp;; elle ne peut
     donc correspondre qu'� <literal>1</literal>.
   </para>

   <para>
     En r�sum�, quand une ER contient � la fois des sous-expressions gourmandes
     et non gourmandes, la longueur de la correspondance totale est soit
     aussi longue que possible soit aussi courte que possible, en fonction de
     l'attribut affect� � l'ER compl�te. Les attributs assign�s aux
     sous-expressions permettent uniquement de d�terminer la partie de la
     correspondance qu'elles peuvent incorporer les unes par rapport aux autres.
   </para>

<!-- Je cherche un antonyme de gourmandise : raison, retenue, abstinence,
anorexie, mod�ration :-) ? -->
   <para>
    Les quantificateurs <literal>{1,1}</literal> et <literal>{1,1}?</literal>
    peuvent �tre utilis�s pour forcer, respectivement, la pr�f�rence la plus
    longue (gourmandise) ou la plus courte (retenue),
    sur une sous-expression ou une ER compl�te.
   </para>

<!-- match against : recherche de correspondance --> 
   <para>
    Les longueurs de correspondance sont mesur�s en caract�res, et non en
    �l�ments d'interclassement. Une cha�ne vide est consid�r�e plus grande que pas
    de correspondance du tout. Par exemple&nbsp;:
    <literal>bb*</literal> correspond aux trois caract�res du milieu de
    <literal>abbbc</literal>&nbsp;;
    <literal>(week|wee)(night|knights)</literal> correspond aux dix caract�res de
    <literal>weeknights</literal>&nbsp;;
    lorsque une correspondance est recherch�e entre <literal>(.*).*</literal>
    et <literal>abc</literal>, la
    sous-expression entre parenth�ses correspond aux trois caract�res&nbsp;; et
    lorsqu'une correspondance est recherch�e entre <literal>(a*)*</literal> et
    <literal>bc</literal>, � la fois l'ER et la
    sous-expression entre parenth�ses correspondent � une cha�ne vide.
   </para>

   <para>
    Lorsqu'il est pr�cis� que la recherche de correspondance ne tient pas
    compte de la casse, cela revient � consid�rer 
    que toutes les distinctions de casse ont disparu de l'alphabet. Quand un
    caract�re alphab�tique, pour lequel existent diff�rentes casses, appara�t comme un
    caract�re ordinaire en dehors d'une expression entre crochets, il est
    en fait transform� en une expression entre crochets contenant les deux
    casses, c'est-�-dire que <literal>x</literal> devient <literal>[xX]</literal>. Quand il
    appara�t dans une expression entre crochets, toutes les transformations de
    casse sont ajout�es � l'expression entre crochets, c'est-�-dire que
    <literal>[x]</literal> devient <literal>[xX]</literal> et que
    <literal>[^x]</literal> devient <literal>[^xX]</literal>.
   </para>

   <para>
    Si la sensibilit� aux retours chariots est pr�cis�e, <literal>.</literal> et les
    expressions entre crochets utilisant <literal>^</literal> n'�tablissent
    jamais de correspondance avec le caract�re de
    retour � la ligne (de cette fa�on, les correspondances ne franchissent jamais
    les retours chariots sauf si l'ER l'explicite),
    et <literal>^</literal> et <literal>$</literal> �tablissent une
    correspondance avec la cha�ne vide,
    respectivement apr�s et avant un retour chariot, en plus d'�tablir une
    correspondance respectivement au d�but et � la fin de la cha�ne. Mais les
    �chappements d'ERA 
    <literal>\A</literal> et <literal>\Z</literal> n'�tablissent toujours de
    correspondance <emphasis>qu'</emphasis>au d�but ou � la fin de la cha�ne.
   </para>

   <para>
    Si une sensibilit� partielle aux retours chariot est indiqu�e, cela affecte
    <literal>.</literal> et les expressions entre crochets, comme avec la sensibilit�
    aux retours chariot, mais pas <literal>^</literal> et <literal>$</literal>.
   </para>

   <para>
    Si une sensibilit� partielle inverse aux retours chariot est indiqu�e, cela
    affecte <literal>^</literal> et <literal>$</literal>, comme avec la sensibilit�
    aux retours chariot, mais pas <literal>.</literal> et les sous-expressions. Ceci
    n'est pas tr�s utile mais est toutefois fourni pour des raisons de sym�trie.
   </para>
   </sect3>

   <sect3 id="posix-limits-compatibility">
    <title>Limites et compatibilit�</title>

   <para>
    Aucune limite particuli�re n'est impos�e sur la longueur des ER dans cette
    implantation. N�anmoins, les programmes pr�vus pour �tre
    portables ne devraient pas employer d'ER de plus de 256 octets car
    une implantation POSIX peut refuser d'accepter de telles ER.
   </para>

   <para>
    La seule fonctionnalit� des ERA qui soit incompatible avec les ERE POSIX est
    le maintien de la signification sp�ciale de <literal>\</literal> dans les
    expressions entre crochets. Toutes les autres fonctionnalit�s ERA utilisent
    une syntaxe interdite, � effets ind�finis ou non sp�cifi�s
    dans les ERE POSIX&nbsp;; la syntaxe <literal>***</literal> des directeurs
    ne figure pas dans la syntaxe POSIX pour les ERB et les ERE.
   </para>

   <para>
    Un grand nombre d'extensions ERA sont emprunt�es de Perl mais certaines
    ont �t� modifi�es et quelques extensions Perl ne sont pas
    pr�sentes. Les incompatibilit�s incluent <literal>\b</literal>, <literal>\B</literal>,
    le manque de traitement sp�cial pour le retour � la ligne en fin de cha�ne,
    l'ajout d'expressions entre crochets aux expressions affect�es par les
    correspondances avec retour � la ligne, les restrictions sur les parenth�ses
    et les r�f�rences dans les contraintes et la s�mantique de correspondance
    cha�nes les plus longues/les plus courtes (au lieu de la premi�re rencontr�e).
   </para>

   <para>
    Deux incompatibilit�s importantes existent entre les syntaxes ERA et ERE
    reconnues par les versions ant�rieures �
    <productname>PostgreSQL</productname>&nbsp;7.4&nbsp;:

    <itemizedlist>
     <listitem>
      <para>
       dans les ERA, <literal>\</literal> suivi d'un caract�re alphanum�rique est soit
       un �chappement soit une erreur alors que dans les versions pr�c�dentes,
       c'�tait simplement un autre moyen d'�crire un caract�re alphanum�rique.
       Ceci ne devrait pas poser trop de probl�mes car il n'y avait aucune raison
       d'�crire une telle s�quence dans les versions plus anciennes&nbsp;;
      </para>
     </listitem>
     <listitem>
      <para>
       dans les ERA, <literal>\</literal> reste un caract�re sp�cial �
       l'int�rieur de <literal>[]</literal>, donc un <literal>\</literal> �
       l'int�rieur d'une expression entre crochets doit �tre �crit
       <literal>\\</literal>.
      </para>
     </listitem>
    </itemizedlist>

    M�me si ces diff�rences ne posent pas de probl�mes pour la plupart
    des applications, il est possible de les �viter en initialisant
    <varname>regex_flavor</varname> � <literal>extended</literal>.
   </para>
   </sect3>

   <sect3 id="posix-basic-regexes">
    <title>Expressions rationnelles �l�mentaires</title>

   <para>
    Les ERB diff�rent des ERE par plusieurs aspects.
    <literal>|</literal>, <literal>+</literal> et <literal>?</literal> sont des caract�res
    ordinaires et il n'existe pas d'�quivalent pour leur fonctionnalit�. Les
    d�limiteurs de fronti�res sont <literal>\{</literal> et <literal>\}</literal>, avec <literal>{</literal> et
    <literal>}</literal> �tant eux-m�me des caract�res ordinaires. Les parenth�ses
    pour les sous-expressions imbriqu�es sont <literal>\(</literal> et <literal>\)</literal>,
    avec <literal>(</literal> et <literal>)</literal> eux-m�mes des caract�res
    ordinaires. <literal>^</literal> est un caract�re ordinaire sauf au d�but d'une ER
    ou au d�but d'une sous-expression entre parenth�ses,
    <literal>$</literal> est un caract�re ordinaire sauf � la fin d'une ER
    ou � la fin d'une sous-expression entre parenth�ses et
    <literal>*</literal> est un caract�re ordinaire s'il appara�t au d�but d'une ER ou
    au d�but d'une sous-expression entre parenth�ses (apr�s un possible
    <literal>^</literal>). Enfin, les r�f�rences arri�res � un chiffre sont disponibles, et
    <literal>\&lt;</literal> et <literal>\&gt;</literal> sont des synonymes pour
    respectivement <literal>[[:&lt;:]]</literal> et <literal>[[:&gt;:]]</literal>&nbsp;;
    aucun autre �chappement n'est disponible.
   </para>
   </sect3>

<!-- end re_syntax.n man page -->

  </sect2>
 </sect1>


  <sect1 id="functions-formatting">
   <title>Fonctions de formatage des types de donn�es</title>

   <indexterm>
    <primary>formatage</primary>
   </indexterm>

   <indexterm>
    <primary>to_char</primary>
   </indexterm>
   <indexterm>
    <primary>to_date</primary>
   </indexterm>
   <indexterm>
    <primary>to_number</primary>
   </indexterm>
   <indexterm>
    <primary>to_timestamp</primary>
   </indexterm>

   <para>
    Les fonctions de formatage de <productname>PostgreSQL</productname>
    fournissent un ensemble d'outils puissants pour convertir diff�rents types de
    donn�es (date/heure, entier, nombre � virgule flottante, num�rique) en
    cha�nes format�es et pour convertir des cha�nes format�es en types de
    donn�es sp�cifiques. Le <xref linkend="functions-formatting-table"/> les liste.
    Ces fonctions suivent toutes une m�me convention d'appel&nbsp;: le
    premier argument est la valeur � formater et le second argument est un
    mod�le d�finissant le format de sortie ou d'entr�e.
   </para>

   <para>
    La fonction <function>to_timestamp</function> peut aussi prendre un
    argument <type>double precision</type> unique pour convertir une valeur de type
    epoch Unix en <type>timestamp with time zone</type>
    (les types epoch Unix (<type>entier</type>) sont implicitement convertis en
    <type>double precision</type>).
   </para>

    <table id="functions-formatting-table">
     <title>Fonctions de formatage</title>
     <tgroup cols="4">
      <colspec colnum="1" colwidth="0.9*"/>
      <colspec colnum="2" colwidth="0.8*"/>
      <colspec colnum="3" colwidth="1.0*"/>
      <colspec colnum="4" colwidth="1.3*"/>
      <thead>
       <row>
	<entry>Fonction</entry>
	<entry>Type en retour</entry>
	<entry>Description</entry>
	<entry>Exemple</entry>
       </row>
      </thead>
      <tbody>
       <row>
	<entry><literal><function>to_char</function>(<type>timestamp</type>,
<type>text</type>)</literal></entry>
	<entry><type>text</type></entry>
	<entry>convertit un champ de type timestamp en cha�ne</entry>
	<entry><literal>to_char(current_timestamp, 'HH12:MI:SS')</literal></entry>
       </row>
       <row>
	<entry><literal><function>to_char</function>(<type>interval</type>,
<type>text</type>)</literal></entry>
	<entry><type>text</type></entry>
	<entry>convertit un champ de type interval en cha�ne</entry>
	<entry><literal>to_char(interval '15h&nbsp;2m&nbsp;12s',
'HH24:MI:SS')</literal></entry>
       </row>
       <row>
	<entry><literal><function>to_char</function>(<type>int</type>,
<type>text</type>)</literal></entry>
	<entry><type>text</type></entry>
	<entry>convertit un champ de type integer en cha�ne</entry>
	<entry><literal>to_char(125, '999')</literal></entry>
       </row>
       <row>
	<entry><literal><function>to_char</function>(<type>double precision</type>,
        <type>text</type>)</literal></entry>
	<entry><type>text</type></entry>
	<entry>convertit un champ de type real/double precision en cha�ne</entry>
	<entry><literal>to_char(125.8::real, '999D9')</literal></entry>
       </row>
       <row>
	<entry><literal><function>to_char</function>(<type>numeric</type>,
<type>text</type>)</literal></entry>
	<entry><type>text</type></entry>
	<entry>convertit un champ de type numeric en cha�ne</entry>
	<entry><literal>to_char(-125.8, '999D99S')</literal></entry>
       </row>
       <row>
	<entry><literal><function>to_date</function>(<type>text</type>,
<type>text</type>)</literal></entry>
	<entry><type>date</type></entry>
	<entry>convertit une cha�ne en date</entry>
	<entry><literal>to_date('05&nbsp;Dec&nbsp;2000',
'DD&nbsp;Mon&nbsp;YYYY')</literal></entry>
       </row>
       <row>
	<entry><literal><function>to_number</function>(<type>text</type>,
<type>text</type>)</literal></entry>
	<entry><type>numeric</type></entry>
	<entry>convertit une cha�ne en champ de type numeric</entry>
	<entry><literal>to_number('12,454.8-', '99G999D9S')</literal></entry>
       </row>
       <row>
	<entry><literal><function>to_timestamp</function>(<type>text</type>,
<type>text</type>)</literal></entry>
	<entry><type>timestamp with time zone</type></entry>
	<entry>convertit une cha�ne string en champ de type timestamp</entry>
	<entry><literal>to_timestamp('05&nbsp;Dec&nbsp;2000',
'DD&nbsp;Mon&nbsp;YYYY')</literal></entry>
       </row>
       <row>
        <entry><literal><function>to_timestamp</function>(<type>double precision</type>)</literal></entry>
        <entry><type>timestamp with time zone</type></entry>
        <entry>convertit une valeur de type epoch UNIX en valeur de type
	timestamp</entry>
        <entry><literal>to_timestamp(200120400)</literal></entry>
       </row>
      </tbody>
     </tgroup>
    </table>

   <para>
    Dans une cha�ne de mod�le de sortie (pour <function>to_char</function>), certains
    mod�les sont reconnus et remplac�s par des donn�es proprement format�es
    issues de la valeur � formater. Tout texte qui n'est pas un motif du mod�le est
    copi� sans modification. De m�me, dans une cha�ne de mod�le d'entr�e (pour tout
    sauf <function>to_char</function>), les motifs du mod�le identifient les parties de la
    cha�ne en entr�e � rechercher et les valeurs � trouver.
   </para>

  <para>
   Le <xref linkend="functions-formatting-datetime-table"/> affiche les motifs
   disponibles pour formater les valeurs de types date et heure.
  </para>

    <table id="functions-formatting-datetime-table">
     <title>Mod�les pour le formatage de champs de type date/heure</title>
     <tgroup cols="2">
      <colspec colnum="1" colwidth="0.4*"/>
      <colspec colnum="2" colwidth="1.6*"/>
      <thead>
       <row>
	<entry>Mod�le</entry>
	<entry>Description</entry>
       </row>
      </thead>
      <tbody>
       <row>
	<entry><literal>HH</literal></entry>
	<entry>heure du jour (01-12)</entry>
       </row>
       <row>
	<entry><literal>HH12</literal></entry>
	<entry>heure du jour (01-12)</entry>
       </row>       
       <row>
	<entry><literal>HH24</literal></entry>
	<entry>heure du jour (00-23)</entry>
       </row>       
       <row>
	<entry><literal>MI</literal></entry>
	<entry>minute (00-59)</entry>
       </row>   
       <row>
	<entry><literal>SS</literal></entry>
	<entry>seconde (00-59)</entry>
       </row>
       <row>
	<entry><literal>MS</literal></entry>
	<entry>milliseconde (000-999)</entry>
       </row>
       <row>
	<entry><literal>US</literal></entry>
	<entry>microseconde (000000-999999)</entry>
       </row>
       <row>
	<entry><literal>SSSS</literal></entry>
	<entry>secondes �coul�es depuis minuit (0-86399)</entry>
       </row>
       <row>
	<entry><literal>AM</literal> ou <literal>A.M.</literal> ou
	<literal>PM</literal> ou <literal>P.M.</literal></entry>
	<entry>indicateur du m�ridien (en majuscules)</entry>
       </row>
       <row>
	<entry><literal>am</literal> ou <literal>a.m.</literal> ou
	<literal>pm</literal> ou <literal>p.m.</literal></entry>
	<entry>indicateur du m�ridien (en minuscules)</entry>
       </row>
       <row>
	<entry><literal>Y,YYY</literal></entry>
	<entry>ann�e (quatre chiffres et plus) avec virgule</entry>
       </row>
       <row>
	<entry><literal>YYYY</literal></entry>
	<entry>ann�e (quatre chiffres et plus)</entry>
       </row>
       <row>
	<entry><literal>YYY</literal></entry>
	<entry>trois derniers chiffres de l'ann�e</entry>
       </row>
       <row>
	<entry><literal>YY</literal></entry>
	<entry>deux derniers chiffres de l'ann�e</entry>
       </row>
       <row>
	<entry><literal>Y</literal></entry>
	<entry>dernier chiffre de l'ann�e</entry>
       </row>
       <row>
        <entry><literal>IYYY</literal></entry>
        <entry>ann�e ISO (quatre chiffres ou plus)</entry>
       </row>
       <row>
        <entry><literal>IYY</literal></entry>
        <entry>trois derniers chiffres de l'ann�e ISO</entry>
       </row>
       <row>
        <entry><literal>IY</literal></entry>
	<entry>deux derniers chiffres de l'ann�e ISO</entry>
       </row>
       <row>
        <entry><literal>I</literal></entry>
	<entry>dernier chiffre de l'ann�e ISO</entry>
       </row>
       <row>
	<entry><literal>BC</literal> ou <literal>B.C.</literal> ou
	<literal>AD</literal> ou <literal>A.D.</literal></entry>
	<entry>indicateur de l'�re (en majuscules)</entry>
       </row>
       <row>
	<entry><literal>bc</literal> ou <literal>b.c.</literal> ou
	<literal>ad</literal> ou <literal>a.d.</literal></entry>
	<entry>indicateur de l'�re (en minuscules)</entry>
       </row>
       <row>
	<entry><literal>MONTH</literal></entry>
	<!-- blank padded ? -->
	<entry>nom complet du mois en majuscules (espaces de compl�tement pour arriver �
         neuf caract�res)</entry>
       </row>
       <row>
	<entry><literal>Month</literal></entry>
	<entry>nom complet du mois en casse mixte (espaces de compl�tement pour arriver �
         neuf caract�res)</entry>
       </row>
       <row>
	<entry><literal>month</literal></entry>
	<entry>nom complet du mois en minuscules (espaces de compl�tement pour arriver �
         neuf caract�res)</entry>
       </row>
       <row>
	<entry><literal>MON</literal></entry>
	<entry>abr�viation du nom du mois en majuscules (trois
         caract�res en anglais, la longueur des versions localis�es peut varier)</entry>
       </row>
       <row>
	<entry><literal>Mon</literal></entry>
	<entry>abr�viation du nom du mois en casse mixte (trois caract�res en anglais, la
	 longueur des versions localis�es peut varier)</entry>
       </row>
       <row>
	<entry><literal>mon</literal></entry>
	<entry>abr�viation du nom du mois en minuscules (trois
         caract�res en anglais, la longueur des versions localis�es peut varier)</entry>
       </row>
       <row>
	<entry><literal>MM</literal></entry>
	<entry>num�ro du mois (01-12)</entry>
       </row>
       <row>
	<entry><literal>DAY</literal></entry>
	<entry>nom complet du jour en majuscules (espaces de compl�tement pour
         arriver � neuf caract�res)</entry>
       </row>
       <row>
	<entry><literal>Day</literal></entry>
	<entry>nom complet du jour en casse mixte (espaces de compl�tement pour
         arriver � neuf caract�res)</entry>
       </row>
       <row>
	<entry><literal>day</literal></entry>
	<entry>nom complet du jour en minuscules (espaces de compl�tement pour
         arriver � neuf caract�res)</entry>
       </row>
       <row>
	<entry><literal>DY</literal></entry>
	<entry>abr�viation du nom du jour en majuscules (trois caract�res en
	 anglais, la longueur des versions localis�es peut varier)</entry>
       </row>
       <row>
	<entry><literal>Dy</literal></entry>
	<entry>abr�viation du nom du jour en casse mixte (trois caract�res en anglais, la
	 longueur des versions localis�es peut varier)</entry>
       </row>
       <row>
	<entry><literal>dy</literal></entry>
	<entry>abr�viation du nom du jour en minuscules (trois caract�res en
	 anglais, la longueur des versions localis�es peut varier)</entry>
       </row>
       <row>
	<entry><literal>DDD</literal></entry>
	<entry>jour de l'ann�e (001-366)</entry>
       </row>
       <row>
	<entry><literal>DD</literal></entry>
	<entry>jour du mois (01-31)</entry>
       </row>
       <row>
	<entry><literal>D</literal></entry>
	<entry>jour de la semaine (de 1 � 7, dimanche �tant num�rot� 1)</entry>
       </row>
       <row>
	<entry><literal>W</literal></entry>
	<entry>num�ro de semaine du mois, de 1 � 5 (la premi�re semaine
         commence le premier jour du mois)</entry>
       </row> 
       <row>
	<entry><literal>WW</literal></entry>
	<entry>num�ro de la semaine dans l'ann�e, de 1 � 53 (la premi�re semaine
         commence le premier jour de l'ann�e)</entry>
       </row>
       <row>
	<entry><literal>IW</literal></entry>
	<entry>num�ro ISO de la semaine dans l'ann�e (le premier jeudi de la
	 nouvelle ann�e est dans la semaine 1)</entry>
       </row>
       <row>
	<entry><literal>CC</literal></entry>
	<entry>si�cle (deux chiffres) (le 21� si�cle commence le
	 1er janvier 2001)</entry>
       </row>
       <row>
	<entry><literal>J</literal></entry>
	<entry>Jour dans le calendrier Julien (nombre de jours depuis le 1er janvier 4712 avant
         JC)</entry>
       </row>
       <row>
	<entry><literal>Q</literal></entry>
	<entry>trimestre</entry>
       </row>
       <row>
	<entry><literal>RM</literal></entry>
	<entry>mois en nombre romain (I-XII&nbsp;; I �tant janvier) (en
         majuscules)</entry>
       </row>
       <row>
	<entry><literal>rm</literal></entry>
	<entry>mois en nombre romain (i-xii; i �tant janvier) (en
         minuscules)</entry>
       </row>
       <row>
	<entry><literal>TZ</literal></entry>
	<entry>nom du fuseau horaire (en majuscules)</entry>
       </row>
       <row>
	<entry><literal>tz</literal></entry>
	<entry>nom du fuseau horaire (en minuscules)</entry>
       </row>
      </tbody>
     </tgroup>
    </table>

   <para>
    Certains modificateurs peuvent �tre appliqu�s � tous les motifs pour en changer
    le comportement. Par exemple, <literal>FMMonth</literal>
    est le motif <literal>Month</literal> avec le modificateur
    <literal>FM</literal>.
    Le <xref linkend="functions-formatting-datetimemod-table"/> affiche les
    modificateurs de motifs pour le formatage des dates/heures.
   </para>

    <table id="functions-formatting-datetimemod-table">
     <title>Modificateurs de motifs pour le formatage des dates/heures</title>
     <tgroup cols="3">
      <colspec colnum="1" colwidth="0.5*"/>
      <colspec colnum="2" colwidth="2.0*"/>
      <colspec colnum="3" colwidth="0.5*"/>
      <thead>
       <row>
	<entry>Modificateur</entry>
	<entry>Description</entry>
	<entry>Exemple</entry>
       </row>
      </thead>
      <tbody>
       <row>
	<entry>pr�fixe <literal>FM</literal></entry>
	<entry>mode remplissage (<foreignphrase>Fill Mode</foreignphrase>)
	(supprime les espaces et les z�ros)</entry>
	<entry><literal>FMMonth</literal></entry>
       </row>
       <row>
	<entry>suffixe <literal>TH</literal></entry>
	<entry>suffixe du nombre ordinal en majuscules</entry>
	<entry><literal>DDTH</literal></entry>
       </row>	
       <row>
	<entry>suffixe <literal>th</literal></entry>
	<entry>suffixe du nombre ordinal en minuscules</entry>
	<entry><literal>DDth</literal></entry>
       </row>
       <row>
	<entry>pr�fixe <literal>FX</literal></entry>
	<entry>option globale de format fixe (voir les notes
         d'utilisation)</entry>
	<entry><literal>FX&nbsp;Month&nbsp;DD&nbsp;Day</literal></entry>
       </row>
       <row>
        <entry>pr�fixe <literal>TM</literal></entry>
        <entry>mode de traduction (affiche les noms des jours et mois localis�s
	 en fonction de <varname>lc_messages</varname>)</entry>
        <entry><literal>TMMonth</literal></entry>
       </row>
       <row>
	<entry>suffixe <literal>SP</literal></entry>
	<entry>mode �pel� (<foreignphrase>Spell Mode</foreignphrase>) (pas encore implant�)</entry>
	<entry><literal>DDSP</literal></entry>
       </row>
      </tbody>
     </tgroup>
    </table>

   <para>
    Notes d'utilisation pour le formatage date/heure&nbsp;:

    <itemizedlist>
     <listitem>
      <para>
       <literal>FM</literal> supprime les z�ros de d�but et les espaces de
       fin qui, autrement, sont ajout�s pour fixer la taille du motif de
       sortie&nbsp;;
      </para>
     </listitem>

<!-- trailing blanks, blank padded, leading zeros... -->
     <listitem>
      <para>
       <literal>TM</literal> n'inclut pas d'espaces en fin de cha�ne&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       <function>to_timestamp</function> et <function>to_date</function>
       ignorent les espaces multiples de la cha�ne en entr�e si l'option
       <literal>FX</literal> n'est pas utilis�e. <literal>FX</literal> doit
       �tre indiqu� comme premier �l�ment du mod�le. Par exemple,
       <literal>to_timestamp('2000&nbsp;&nbsp;&nbsp;&nbsp;JUN', 'YYYY
MON')</literal> est correct mais
       <literal>to_timestamp('2000&nbsp;&nbsp;&nbsp;&nbsp;JUN', 'FXYYYY
MON')</literal> renvoie une erreur car <function>to_timestamp</function>
       n'attend qu'une seule espace&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       il est possible d'ins�rer du texte ordinaire dans les mod�les
       <function>to_char</function>. il est alors litt�ralement remis en sortie.
       Une sous-cha�ne peut �tre plac�e entre guillemets doubles pour
       forcer son interpr�tation en tant que libell� m�me si elle contient
       des mots cl�s de motif. Par exemple, dans
       <literal>'"Hello Year "YYYY'</literal>, les caract�res
       <literal>YYYY</literal> sont remplac�s par l'ann�e mais
       l'<literal>Y</literal> isol� du mot <literal>Year</literal> ne l'est
       pas&nbsp;;
      </para>
     </listitem>

<!-- un slash, deux slashes ? Comme un match, deux matches ? -->
     <listitem>
      <para>
       pour afficher un guillemet double dans la sortie, il faut le faire
       pr�c�der d'un antislash. <literal>E'\\"YYYY
       Month\\"'</literal>, par exemple <!-- "" font-lock sanity :-) -->
       (deux antislashs sont n�cessaire parce que l'antislash a
       d�j� une signification sp�ciale lors de l'utilisation de la syntaxe
       d'�chappement des cha�nes)&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       la conversion <literal>YYYY</literal> d'une cha�ne en champ de type
       <type>timestamp</type> ou <type>date</type> comporte une restriction
       avec les ann�es � plus de quatre chiffres. Il faut alors utiliser un
       mod�le ou un caract�re non-num�rique apr�s <literal>YYYY</literal>,
       sans quoi l'ann�e est toujours interpr�t�e sur
       quatre chiffres. Par exemple, pour l'ann�e 20000&nbsp;:
       <literal>to_date('200001131', 'YYYYMMDD')</literal> est interpr�t�
       comme une ann�e � quatre chiffres&nbsp;; il faut alors utiliser un
       s�parateur non d�cimal apr�s l'ann�e comme
       <literal>to_date('20000-1131', 'YYYY-MMDD')</literal> ou
       <literal>to_date('20000Nov31', 'YYYYMonDD')</literal>&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       dans les conversions de cha�ne en <type>timestamp</type>
       ou <type>date</type>, le champ <literal>CC</literal> est ignor� s'il y a
       un champ <literal>YYY</literal>, <literal>YYYY</literal> ou
       <literal>Y,YYY</literal>. Si <literal>CC</literal> est utilis� avec
       <literal>YY</literal> ou <literal>Y</literal>, alors l'ann�e est calcul�e
       comme <literal>(CC-1)*100+YY</literal>&nbsp;;
     </para>
     </listitem>

     <listitem>
      <para>
       les valeurs en millisecondes (<literal>MS</literal>) et microsecondes
       (<literal>US</literal>) dans une conversion de cha�ne en champ
       de type <type>timestamp</type> sont utilis�es comme partie de la
       fraction d�cimale des secondes. Par exemple,
       <literal>to_timestamp('12:3', 'SS:MS')</literal> n'est pas 3
       millisecondes mais 300 car la conversion le compte comme 12 + 0,3
       secondes. Cela signifie que pour le format <literal>SS:MS</literal>, les
       valeurs d'entr�e <literal>12:3</literal>, <literal>12:30</literal> et
       <literal>12:300</literal> indiquent le m�me nombre de millisecondes.
       Pour obtenir trois millisecondes, il faut �crire
       <literal>12:003</literal> que la conversion compte comme
       12 + 0,003 = 12,003 secondes&nbsp;;
      </para>

      <para>
       Exemple plus complexe&nbsp;: 
       <literal>to_timestamp('15:12:02.020.001230', 'HH:MI:SS.MS.US')</literal>
       repr�sente 15 heures, 12 minutes et (2 secondes + 20 millisecondes +
       1230 microsecondes =) 2,021230 secondes. 
      </para>
     </listitem>

     <listitem>
      <para>la num�rotation du jour de la semaine de <function>to_char</function>
       (voir le mod�le de formatage de 'D') est diff�rente de celle de la
       fonction <function>extract</function>&nbsp;;
     </para>
     </listitem>

     <listitem>
      <para><function>to_char(interval)</function> formate <literal>HH</literal> et
        <literal>HH12</literal> comme les heures d'un seul jour alors que <literal>HH24</literal>
        peut afficher des heures d�passant un simple jour, c'est-�-dire &gt;24.
      </para>
     </listitem>

    </itemizedlist>
   </para>

  <para>
   Le <xref linkend="functions-formatting-numeric-table"/> affiche les motifs
   de mod�le disponibles pour le formatage des valeurs num�riques.
  </para>

    <table id="functions-formatting-numeric-table">
     <title>Motifs de mod�le pour le formatage de valeurs num�riques</title>
     <tgroup cols="2">
      <colspec colnum="1" colwidth="0.4*"/>
      <colspec colnum="2" colwidth="1.6*"/>
      <thead>
       <row>
	<entry>Motif</entry>
	<entry>Description</entry>
       </row>
      </thead>
      <tbody>
       <row>
	<entry><literal>9</literal></entry>
	<entry>valeur avec le nombre indiqu� de chiffres</entry>
       </row>
       <row>
	<entry><literal>0</literal></entry>
	<entry>valeur avec des z�ros de remplissage avant</entry>
       </row>
       <row>
	<entry><literal>.</literal> (point)</entry>
	<entry>point d�cimal</entry>
       </row>
       <row>
	<entry><literal>,</literal> (virgule)</entry>
	<entry>s�parateur de groupe (milliers)</entry>
       </row>
       <row>
	<entry><literal>PR</literal></entry>
	<entry>valeur n�gative entre chevrons</entry>
       </row>
       <row>
	<entry><literal>S</literal></entry>
	<entry>signe accroch� au nombre (utilise la locale)</entry>
       </row>
       <row>
	<entry><literal>L</literal></entry>
	<entry>symbole mon�taire (utilise la locale)</entry>
       </row>
       <row>
	<entry><literal>D</literal></entry>
	<entry>point d�cimal (utilise la locale)</entry>
       </row>
       <row>
	<entry><literal>G</literal></entry>
	<entry>s�parateur de groupe (utilise la locale)</entry>
       </row>
       <row>
	<entry><literal>MI</literal></entry>
	<entry>signe moins dans la position indiqu�e (si le nombre est
         inf�rieur � 0)</entry>
       </row>
       <row>
	<entry><literal>PL</literal></entry>
	<entry>signe plus dans la position indiqu�e (si le nombre est
         sup�rieur � 0)</entry>
       </row>
       <row>
	<entry><literal>SG</literal></entry>
	<entry>signe plus/moins dans la position indiqu�e</entry>
       </row>
       <row>
	<entry><literal>RN</literal></entry>
	<entry>num�ro romain (entr�e entre 1 et 3999)</entry>
       </row>
       <row>
	<entry><literal>TH</literal> ou <literal>th</literal></entry>
	<entry>suffixe du nombre ordinal</entry>
       </row>
       <row>
	<entry><literal>V</literal></entry>
	<entry>d�calage du nombre indiqu� de chiffres (voir les
         notes)</entry>
       </row>
       <row>
	<entry><literal>EEEE</literal></entry>
	<entry>notation scientifique (pas encore implant�e)</entry>
       </row>
      </tbody>
     </tgroup>
    </table>

   <para>
    Notes d'utilisation pour le formatage des nombres&nbsp;:

    <itemizedlist>
     <listitem>
      <para>
       un signe format� � l'aide de <literal>SG</literal>,
       <literal>PL</literal> ou <literal>MI</literal> n'est pas ancr� au
       nombre&nbsp;; par exemple, <literal>to_char(-12, 'S9999')</literal>
       produit <literal>'&nbsp;&nbsp;-12'</literal> mais
       <literal>to_char(-12, 'MI9999')</literal> produit
       <literal>'-&nbsp;&nbsp;12'</literal>. L'implantation Oracle n'autorise
       pas l'utilisation de <literal>MI</literal> devant <literal>9</literal>,
       mais requiert plut�t que <literal>9</literal> pr�c�de
       <literal>MI</literal>&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       <literal>9</literal> est transform� en valeur avec le m�me nombre de
       chiffres qu'il y a de 9. Si un chiffre n'est pas disponible, il est
       remplac� par une espace&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       <literal>TH</literal> ne convertit pas les valeurs inf�rieures � z�ro et
       ne convertit pas les nombres fractionnels&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       <literal>PL</literal>, <literal>SG</literal> et
       <literal>TH</literal> sont des extensions
       <productname>PostgreSQL</productname>&nbsp;;
      </para>
     </listitem>

     <listitem>
      <para>
       <literal>V</literal> multiplie effectivement les valeurs en entr�e par
       <literal>10^<replaceable>n</replaceable></literal>, o�
       <replaceable>n</replaceable> est le nombre de chiffres qui suit
       <literal>V</literal>. <function>to_char</function> ne supporte pas
       l'utilisation de <literal>V</literal> combin� avec un point d�cimal
       (donc <literal>99.9V99</literal> n'est pas autoris�).
      </para>
     </listitem>
    </itemizedlist>
   </para>   

  <para>
   Le <xref linkend="functions-formatting-examples-table"/> affiche quelques
   exemples de l'utilisation de la fonction <function>to_char</function>.
  </para>

    <table id="functions-formatting-examples-table">
     <title>Exemples avec <function>to_char</function></title>
     <tgroup cols="2">
      <colspec colnum="1" colwidth="1.3*"/>
      <colspec colnum="2" colwidth="0.7*"/>
      <thead>
       <row>
	<entry>Expression</entry>
	<entry>R�sultat</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry><literal>to_char(current_timestamp,
'Day,&nbsp;DD&nbsp;&nbsp;HH12:MI:SS')</literal></entry>
       
<entry><literal>'Tuesday&nbsp;&nbsp;,&nbsp;06&nbsp;&nbsp;05:39:18'</literal></entry>
       </row>
       <row>
        <entry><literal>to_char(current_timestamp,
'FMDay,&nbsp;FMDD&nbsp;&nbsp;HH12:MI:SS')</literal></entry>
        <entry><literal>'Tuesday,&nbsp;6&nbsp;&nbsp;05:39:18'</literal></entry>
       </row>          
       <row>
        <entry><literal>to_char(-0.1, '99.99')</literal></entry>
        <entry><literal>'&nbsp;&nbsp;-.10'</literal></entry>
       </row>
       <row>
        <entry><literal>to_char(-0.1, 'FM9.99')</literal></entry>
        <entry><literal>'-.1'</literal></entry>
       </row>
       <row>
        <entry><literal>to_char(0.1, '0.9')</literal></entry>
        <entry><literal>'&nbsp;0.1'</literal></entry>
       </row>
       <row>
        <entry><literal>to_char(12, '9990999.9')</literal></entry>
        <entry><literal>'&nbsp;&nbsp;&nbsp;&nbsp;0012.0'</literal></entry>
       </row>
       <row>
        <entry><literal>to_char(12, 'FM9990999.9')</literal></entry>
        <entry><literal>'0012.'</literal></entry>
       </row>
       <row>
        <entry><literal>to_char(485, '999')</literal></entry>
        <entry><literal>'&nbsp;485'</literal></entry>
       </row>
       <row>
        <entry><literal>to_char(-485, '999')</literal></entry>
        <entry><literal>'-485'</literal></entry>
       </row>
       <row>
        <entry><literal>to_char(485, '9&nbsp;9&nbsp;9')</literal></entry>
        <entry><literal>'&nbsp;4&nbsp;8&nbsp;5'</literal></entry>
       </row>
       <row>
        <entry><literal>to_char(1485, '9,999')</literal></entry>
        <entry><literal>'&nbsp;1,485'</literal></entry>
       </row>
       <row>
        <entry><literal>to_char(1485, '9G999')</literal></entry>
        <entry><literal>'&nbsp;1&nbsp;485'</literal></entry>
       </row>
       <row>
        <entry><literal>to_char(148.5, '999.999')</literal></entry>
        <entry><literal>'&nbsp;148.500'</literal></entry>
       </row>
       <row>
        <entry><literal>to_char(148.5, 'FM999.999')</literal></entry>
        <entry><literal>'148.5'</literal></entry>
       </row>
       <row>
        <entry><literal>to_char(148.5, 'FM999.990')</literal></entry>
        <entry><literal>'148.500'</literal></entry>
       </row>
       <row>
        <entry><literal>to_char(148.5, '999D999')</literal></entry>
        <entry><literal>'&nbsp;148,500'</literal></entry>	 
       </row>
       <row>
        <entry><literal>to_char(3148.5, '9G999D999')</literal></entry>
        <entry><literal>'&nbsp;3&nbsp;148,500'</literal></entry>
       </row>
       <row>
        <entry><literal>to_char(-485, '999S')</literal></entry>
        <entry><literal>'485-'</literal></entry>
       </row>
       <row>		
        <entry><literal>to_char(-485, '999MI')</literal></entry>
        <entry><literal>'485-'</literal></entry>	
       </row>
       <row>
        <entry><literal>to_char(485, '999MI')</literal></entry>
        <entry><literal>'485&nbsp;'</literal></entry>		
       </row>
       <row>
        <entry><literal>to_char(485, 'FM999MI')</literal></entry>
        <entry><literal>'485'</literal></entry>		
       </row>
       <row>
        <entry><literal>to_char(485, 'PL999')</literal></entry>
        <entry><literal>'+485'</literal></entry>	
       </row>
       <row>		
        <entry><literal>to_char(485, 'SG999')</literal></entry>
        <entry><literal>'+485'</literal></entry>	
       </row>
       <row>
        <entry><literal>to_char(-485, 'SG999')</literal></entry>
        <entry><literal>'-485'</literal></entry>	
       </row>
       <row>
        <entry><literal>to_char(-485, '9SG99')</literal></entry>
        <entry><literal>'4-85'</literal></entry>	
       </row>
       <row>
        <entry><literal>to_char(-485, '999PR')</literal></entry>
        <entry><literal>'&lt;485&gt;'</literal></entry>		
       </row>
       <row>
        <entry><literal>to_char(485, 'L999')</literal></entry>
        <entry><literal>'DM&nbsp;485</literal></entry>	 
       </row>
       <row>
        <entry><literal>to_char(485, 'RN')</literal></entry>		
       
<entry><literal>'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDLXXXV'</literal></entry>
       </row>
       <row>
        <entry><literal>to_char(485, 'FMRN')</literal></entry>	
        <entry><literal>'CDLXXXV'</literal></entry>
       </row>
       <row>
        <entry><literal>to_char(5.2, 'FMRN')</literal></entry>
        <entry><literal>'V'</literal></entry>		
       </row>
       <row>
        <entry><literal>to_char(482, '999th')</literal></entry>
        <entry><literal>'&nbsp;482nd'</literal></entry>				
       </row>
       <row>
        <entry><literal>to_char(485, '"Good&nbsp;number:"999')</literal></entry>
        <entry><literal>'Good&nbsp;number:&nbsp;485'</literal></entry>
       </row>
       <row>
        <entry><literal>to_char(485.8,
'"Pre:"999"&nbsp;Post:"&nbsp;.999')</literal></entry>
        <entry><literal>'Pre:&nbsp;485&nbsp;Post:&nbsp;.800'</literal></entry>
       </row>
       <row>
        <entry><literal>to_char(12, '99V999')</literal></entry>		
        <entry><literal>'&nbsp;12000'</literal></entry>
       </row>
       <row>
        <entry><literal>to_char(12.4, '99V999')</literal></entry>
        <entry><literal>'&nbsp;12400'</literal></entry>
       </row>
       <row>		
        <entry><literal>to_char(12.45, '99V9')</literal></entry>
        <entry><literal>'&nbsp;125'</literal></entry>
       </row>
      </tbody>
     </tgroup>
    </table>

  </sect1>


  <sect1 id="functions-datetime">
   <title>Fonctions et op�rateurs sur date/heure</title>

  <para>
   Le <xref linkend="functions-datetime-table"/> affiche les fonctions disponibles
   pour le traitement des valeurs date et heure, les d�tails apparaissant
   dans les sous-sections qui suivent. Le <xref
   linkend="operators-datetime-table"/> illustre les comportements des
   op�rateurs arithm�tiques basiques (<literal>+</literal>,
   <literal>*</literal>, etc.).  Pour les fonctions de formatage, on peut se
   r�f�rer � la <xref linkend="functions-formatting"/>. Il est important d'�tre familier avec
   les informations de base concernant les types de donn�es date/heure de la <xref
   linkend="datatype-datetime"/>.
  </para>

  <para>
   Toutes les fonctions et op�rateurs d�crits ci-dessous qui acceptent une entr�e de
   type <type>time</type> ou <type>timestamp</type> acceptent deux
   variantes&nbsp;: une avec <type>time with time zone</type> ou
   <type>timestamp with time zone</type> et une autre avec <type>time without
   time zone</type> ou <type>timestamp without time zone</type>. 
   Ces variantes ne sont pas affich�es s�par�ment. De plus, les op�rateurs
   <literal>+</literal> et <literal>*</literal> sont commutatifs (par exemple,
   date + integer et integer + date)&nbsp;; seule une possibilit� est pr�sent�e
   ici.
  </para>

    <table id="operators-datetime-table">
     <title>Op�rateurs date/heure</title>

     <tgroup cols="3">
      <colspec colnum="1" colwidth="0.4*"/>
      <colspec colnum="2" colwidth="1.3*"/>
      <colspec colnum="3" colwidth="1.3*"/>
      <thead>
       <row>
        <entry>Op�rateur</entry>
        <entry>Exemple</entry>
        <entry>R�sultat</entry>
       </row>
      </thead>

      <tbody>
       <row>
        <entry> <literal>+</literal> </entry>
        <entry><literal>date '2001-09-28' + integer '7'</literal></entry>
        <entry><literal>date '2001-10-05'</literal></entry>
       </row>

       <row>
        <entry> <literal>+</literal> </entry>
        <entry><literal>date '2001-09-28' + interval '1 hour'</literal></entry>
        <entry><literal>timestamp '2001-09-28 01:00:00'</literal></entry>
       </row>

       <row>
        <entry> <literal>+</literal> </entry>
        <entry><literal>date '2001-09-28' + time '03:00'</literal></entry>
        <entry><literal>timestamp '2001-09-28 03:00:00'</literal></entry>
       </row>

       <row>
        <entry> <literal>+</literal> </entry>
        <entry><literal>interval '1 day' + interval '1 hour'</literal></entry>
        <entry><literal>interval '1 day 01:00:00'</literal></entry>
       </row>

       <row>
        <entry> <literal>+</literal> </entry>
        <entry><literal>timestamp '2001-09-28 01:00' + interval '23 hours'</literal></entry>
        <entry><literal>timestamp '2001-09-29 00:00:00'</literal></entry>
       </row>

       <row>
        <entry> <literal>+</literal> </entry>
        <entry><literal>time '01:00' + interval '3 hours'</literal></entry>
        <entry><literal>time '04:00:00'</literal></entry>
       </row>

       <row>
        <entry> <literal>-</literal> </entry>
        <entry><literal>- interval '23 hours'</literal></entry>
        <entry><literal>interval '-23:00:00'</literal></entry>
       </row>

       <row>
        <entry> <literal>-</literal> </entry>
        <entry><literal>date '2001-10-01' - date '2001-09-28'</literal></entry>
        <entry><literal>integer '3'</literal></entry>
       </row>

       <row>
        <entry> <literal>-</literal> </entry>
        <entry><literal>date '2001-10-01' - integer '7'</literal></entry>
        <entry><literal>date '2001-09-24'</literal></entry>
       </row>

       <row>
        <entry> <literal>-</literal> </entry>
        <entry><literal>date '2001-09-28' - interval '1 hour'</literal></entry>
        <entry><literal>timestamp '2001-09-27 23:00:00'</literal></entry>
       </row>

       <row>
        <entry> <literal>-</literal> </entry>
        <entry><literal>time '05:00' - time '03:00'</literal></entry>
        <entry><literal>interval '02:00:00'</literal></entry>
       </row>

       <row>
        <entry> <literal>-</literal> </entry>
        <entry><literal>time '05:00' - interval '2 hours'</literal></entry>
        <entry><literal>time '03:00:00'</literal></entry>
       </row>

       <row>
        <entry> <literal>-</literal> </entry>
        <entry><literal>timestamp '2001-09-28 23:00' - interval '23 hours'</literal></entry>
        <entry><literal>timestamp '2001-09-28 00:00:00'</literal></entry>
       </row>

       <row>
        <entry> <literal>-</literal> </entry>
        <entry><literal>interval '1 day' - interval '1 hour'</literal></entry>
        <entry><literal>interval '1 day -01:00:00'</literal></entry>
       </row>

       <row>
        <entry> <literal>-</literal> </entry>
        <entry><literal>timestamp '2001-09-29 03:00' - timestamp '2001-09-27 12:00'</literal></entry>
        <entry><literal>interval '1 day 15:00:00'</literal></entry>
       </row>

       <row>
        <entry> <literal>*</literal> </entry>
        <entry><literal>900 * interval '1 second'</literal></entry>
        <entry><literal>interval '00:15:00'</literal></entry>
       </row>

       <row>
        <entry> <literal>*</literal> </entry>
        <entry><literal>21 * interval '1 day'</literal></entry>
        <entry><literal>interval '21 days'</literal></entry>
       </row>

       <row>
        <entry> <literal>*</literal> </entry>
        <entry><literal>double precision '3.5' * interval '1 hour'</literal></entry>
        <entry><literal>interval '03:30:00'</literal></entry>
       </row>

       <row>
        <entry> <literal>/</literal> </entry>
        <entry><literal>interval '1 hour' / double precision '1.5'</literal></entry>
        <entry><literal>interval '00:40:00'</literal></entry>
       </row>
      </tbody>
     </tgroup>
    </table>

   <indexterm>
    <primary>age</primary>
   </indexterm>
   <indexterm>
    <primary>clock_timestamp</primary>
   </indexterm>
   <indexterm>
    <primary>current_date</primary>
   </indexterm>
   <indexterm>
    <primary>current_time</primary>
   </indexterm>
   <indexterm>
    <primary>current_timestamp</primary>
   </indexterm>
   <indexterm>
    <primary>date_part</primary>
   </indexterm>
   <indexterm>
    <primary>date_trunc</primary>
   </indexterm>
   <indexterm>
    <primary>extract</primary>
   </indexterm>
   <indexterm>
    <primary>isfinite</primary>
   </indexterm>
   <indexterm>
    <primary>justify_days</primary>
   </indexterm>
   <indexterm>
    <primary>justify_hours</primary>
   </indexterm>
   <indexterm>
    <primary>justify_interval</primary>
   </indexterm>
   <indexterm>
    <primary>localtime</primary>
   </indexterm>
   <indexterm>
    <primary>localtimestamp</primary>
   </indexterm>
   <indexterm>
    <primary>now</primary>
   </indexterm>
   <indexterm>
    <primary>statement_timestamp</primary>
   </indexterm>
   <indexterm>
    <primary>timeofday</primary>
   </indexterm>
   <indexterm>
    <primary>transaction_timestamp</primary>
   </indexterm>

    <table id="functions-datetime-table">
     <title>Fonctions date/heure</title>
     <tgroup cols="5">
     <colspec colnum="1" colwidth="2.0*"/>
     <colspec colnum="2" colwidth="0.5*"/>
     <colspec colnum="3" colwidth="1.3*"/>
     <colspec colnum="4" colwidth="1.1*"/>
     <colspec colnum="5" colwidth="0.8*"/>
      <thead>
       <row>
	<entry>Fonction</entry>
	<entry>Code de retour</entry>
	<entry>Description</entry>
	<entry>Exemple</entry>
	<entry>R�sultat</entry>
       </row>
      </thead>

      <tbody>
     <row>
       <entry><literal><function>age</function>(<type>timestamp</type>, <type>timestamp</type>)</literal></entry>
       <entry><type>interval</type></entry>
       <entry>Soustrait les arguments, ce qui produit un r�sultat <quote>symbolique</quote>
        en ann�es, mois, jours</entry>
       <entry><literal>age(timestamp '2001-04-10', timestamp '1957-06-13')</literal></entry>
       <entry><literal>43 years 9 mons 27 days</literal></entry>
     </row>

     <row>
	<entry><literal><function>age</function>(<type>timestamp</type>)</literal></entry>
	<entry><type>interval</type></entry>
	<entry>Soustrait � la date courante (<function>current_date</function>)</entry>
	<entry><literal>age(timestamp '1957-06-13')</literal></entry>
	<entry><literal>43 years 8 mons 3 days</literal></entry>
      </row>

       <row>
        <entry><literal><function>clock_timestamp</function>()</literal></entry>
        <entry><type>timestamp with time zone</type></entry>
        <entry>Date et heure courantes (change pendant l'ex�cution de
	 l'instruction)&nbsp;;
         voir la <xref linkend="functions-datetime-current"/>
        </entry>
        <entry></entry>
        <entry></entry>
       </row>

       <row>
	<entry><literal><function>current_date</function></literal></entry>
	<entry><type>date</type></entry>
	<entry>Date courante&nbsp;; voir la <xref
         linkend="functions-datetime-current"/>
	</entry>
	<entry></entry>
	<entry></entry>1
       </row>

       <row>
        <entry><literal><function>current_time</function></literal></entry>
        <entry><type>time with time zone</type></entry>
        <entry>Heure courante&nbsp;; voir la <xref
         linkend="functions-datetime-current"/>
        </entry>
        <entry></entry>
        <entry></entry>
       </row>

       <row>
	<entry><literal><function>current_timestamp</function></literal></entry>
	<entry><type>timestamp with time zone</type></entry>
	<entry>Date et heure courantes (d�but de la transaction en cours)&nbsp;;
	 voir la <xref linkend="functions-datetime-current"/>
	</entry>
	<entry></entry>
	<entry></entry>
       </row>

       <row>
	<entry><literal><function>date_part</function>(<type>text</type>,
<type>timestamp</type>)</literal></entry>
	<entry><type>double precision</type></entry>
	<entry>Obtenir un sous-champ (�quivalent �
	 <function>extract</function>)&nbsp;; voir la <xref
         linkend="functions-datetime-extract"/>
        </entry>
	<entry><literal>date_part('hour', timestamp '2001-02-16
20:38:40')</literal></entry>
	<entry><literal>20</literal></entry>
       </row>

       <row>
	<entry><literal><function>date_part</function>(<type>text</type>,
<type>interval</type>)</literal></entry>
	<entry><type>double precision</type></entry>
	<entry>Obtenir un sous-champ (�quivalent �
	 <function>extract</function>)&nbsp;; voir la <xref
         linkend="functions-datetime-extract"/>
        </entry>
	<entry><literal>date_part('month', interval '2 years 3
months')</literal></entry>
	<entry><literal>3</literal></entry>
       </row>

       <row>
	<entry><literal><function>date_trunc</function>(<type>text</type>,
<type>timestamp</type>)</literal></entry>
	<entry><type>timestamp</type></entry>
	<entry>Tronquer � la pr�cision indiqu�e&nbsp;; voir aussi la <xref
         linkend="functions-datetime-trunc"/>
        </entry>
	<entry><literal>date_trunc('hour', timestamp '2001-02-16
20:38:40')</literal></entry>
	<entry><literal>2001-02-16 20:00:00</literal></entry>
       </row>

       <row>
	<entry><literal><function>extract</function>(<parameter>field</parameter> from
         <type>timestamp</type>)</literal></entry>
	<entry><type>double precision</type></entry>
	<entry>Obtenir un sous-champ&nbsp;; voir la <xref
         linkend="functions-datetime-extract"/>
        </entry>
	<entry><literal>extract(hour from timestamp '2001-02-16
20:38:40')</literal></entry>
	<entry><literal>20</literal></entry>
       </row>

       <row>
	<entry><literal><function>extract</function>(<parameter>field</parameter> from
         <type>interval</type>)</literal></entry>
	<entry><type>double precision</type></entry>
	<entry>Obtenir un sous-champ&nbsp;; voir la <xref
         linkend="functions-datetime-extract"/>
        </entry>
	<entry><literal>extract(month from interval '2 years 3
months')</literal></entry>
	<entry><literal>3</literal></entry>
       </row>

       <row>
	<entry><literal><function>isfinite</function>(<type>timestamp</type>)</literal>
</entry>
	<entry><type>boolean</type></entry>
	<entry>Teste si l'estampille temporelle est finie (non infinie)</entry>
	<entry><literal>isfinite(timestamp '2001-02-16 21:28:30')</literal></entry>
	<entry><literal>true</literal></entry>
       </row>

       <row>
	<entry><literal><function>isfinite</function>(<type>interval</type>)</literal></entry>
	<entry><type>boolean</type></entry>
	<entry>Teste si l'intervalle est fini</entry>
	<entry><literal>isfinite(interval '4 hours')</literal></entry>
	<entry><literal>true</literal></entry>
       </row>

       <row>
        <entry><literal><function>justify_days</function>(<type>interval</type>)</literal></entry>
        <entry><type>interval</type></entry>
        <entry>Ajuste l'intervalle pour que les p�riodes de 30 jours soient
	repr�sent�es comme des mois</entry>
        <entry><literal>justify_days(interval '30 days')</literal></entry>
        <entry><literal>1 month</literal></entry>
       </row>

       <row>
        <entry><literal><function>justify_hours</function>(<type>interval</type>)</literal></entry>
        <entry><type>interval</type></entry>
        <entry>Ajuste l'intervalle pour que les p�riodes de 24 heures soient
	repr�sent�es comme des jours</entry>
        <entry><literal>justify_hours( interval '24 hours')</literal></entry>
        <entry><literal>1 day</literal></entry>
       </row>

       <row>
        <entry><literal><function>justify_interval</function>(<type>interval</type>)</literal></entry>
        <entry><type>interval</type></entry>
        <entry>Ajuste l'intervalle en utilisant <function>justify_days</function> et
	<function>justify_hours</function>, avec des signes suppl�mentaires
	d'ajustement</entry>
        <entry><literal>justify_interval(interval '1 mon -1 hour')</literal></entry>
        <entry><literal>29 days 23:00:00</literal></entry>
       </row>

       <row>
        <entry><literal><function>localtime</function></literal></entry>
        <entry><type>time</type></entry>
        <entry>Heure du jour courante&nbsp;; voir la <xref
         linkend="functions-datetime-current"/>
        </entry>
        <entry></entry>
        <entry></entry>
       </row>

       <row>
        <entry><literal><function>localtimestamp</function></literal></entry>
        <entry><type>timestamp</type></entry>
        <entry>Date et heure courante (d�but de la transaction)&nbsp;; voir la <xref
         linkend="functions-datetime-current"/>
        </entry>
        <entry></entry>
        <entry></entry>
       </row>

       <row>
	<entry><literal><function>now</function>()</literal></entry>
	<entry><type>timestamp with time zone</type></entry>
	<entry>Date et heure courantes (d�but de la transaction)&nbsp;; voir la <xref
         linkend="functions-datetime-current"/>
	</entry>
	<entry></entry>
	<entry></entry>
       </row>

       <row>
        <entry><literal><function>statement_timestamp</function>()</literal></entry>
        <entry><type>timestamp with time zone</type></entry>
        <entry>Date et heure courantes (d�but de l'instruction en cours)&nbsp;;
         voir <xref linkend="functions-datetime-current"/>
        </entry>
        <entry></entry>
        <entry></entry>
       </row>

       <row>
	<entry><literal><function>timeofday</function>()</literal></entry>
	<entry><type>text</type></entry>
	<entry>Date et heure courantes (comme <function>clock_timestamp</function>
	 mais avec une cha�ne de type <type>text</type>)&nbsp;; voir la <xref
         linkend="functions-datetime-current"/>
	</entry>
	<entry></entry>
	<entry></entry>
       </row>

       <row>
        <entry><literal><function>transaction_timestamp</function>()</literal></entry>
        <entry><type>timestamp with time zone</type></entry>
        <entry>Date et heure courantes (d�but de la transaction en cours)&nbsp;;
         voir <xref linkend="functions-datetime-current"/>
        </entry>
        <entry></entry>
        <entry></entry>
       </row>

      </tbody>
     </tgroup>
    </table>

   <para>
    En plus de ces fonctions, l'op�rateur SQL <literal>OVERLAPS</literal> est
    support�&nbsp;:
<synopsis>( <replaceable>d�but1</replaceable>, <replaceable>fin1</replaceable> ) OVERLAPS ( <replaceable>d�but2</replaceable>, <replaceable>fin2</replaceable> )
( <replaceable>d�but1</replaceable>, <replaceable>longueur1</replaceable> ) OVERLAPS ( <replaceable>d�but2</replaceable>, <replaceable>longueur2</replaceable> )</synopsis>
    Cette expression renvoie vrai (true) lorsque les deux p�riodes de temps 
    (d�finies par leur point final) se chevauchent, et faux dans le cas
    contraire. Les limites peuvent �tre indiqu�es comme des paires de
    dates, d'heures ou de timestamps&nbsp;; ou comme une date, une heure ou un
    timestamp suivi d'un intervalle.
   </para>

<screen>SELECT (DATE '2001-02-16', DATE '2001-12-21') OVERLAPS
       (DATE '2001-10-30', DATE '2002-10-30');
<lineannotation>R�sultat :
</lineannotation><computeroutput>true</computeroutput>
SELECT (DATE '2001-02-16', INTERVAL '100 days') OVERLAPS
       (DATE '2001-10-30', DATE '2002-10-30');
<lineannotation>R�sultat :
</lineannotation><computeroutput>false</computeroutput></screen>

  <para>
   Lors de l'ajout ou de la soustraction d'une valeur de type
   <type>interval</type> avec une valeur
   de type <type>timestamp with time zone</type>, le composant jours incr�mente
   ou d�cremente la date du <type>timestamp with time zone</type> par le nombre
   de jours indiqu�s. Avec les modifications occasionn�es par les changements
   d'heure (avec un fuseau horaire de session qui reconna�t DST), cela
   signifie qu'un <literal>interval '1 day'</literal>  n'est pas forc�ment
   �gal � un <literal>interval '24 hours'</literal>. Par exemple, avec un
   fuseau horaire configur� � <literal>CST7CDT</literal>,
   <literal>timestamp with time zone '2005-04-02 12:00-07' + interval '1 day'
   </literal> produit un <literal>timestamp with time zone '2005-04-03
   12:00-06'</literal> alors qu'ajouter <literal>interval '24
   hours'</literal> au m�me <type>timestamp with time zone</type> initial
   produit un <literal>timestamp with time zone '2005-04-03
   13:00-06'</literal> parce qu'il y a un changement d'heure le <literal>2005-04-03
   02:00</literal> pour le fuseau horaire <literal>CST7CDT</literal>.
  </para>

  <sect2 id="functions-datetime-extract">
   <title><function>EXTRACT</function>, <function>date_part</function></title>

   <indexterm>
    <primary>date_part</primary>
   </indexterm>
   <indexterm>
    <primary>extract</primary>
   </indexterm>

<synopsis>EXTRACT (<replaceable>champ</replaceable> FROM <replaceable>source</replaceable>)</synopsis>

   <para>
    La fonction <function>extract</function> r�cup�re des sous-champs de valeurs
    date/heure, tels que l'ann�e ou l'heure.
    <replaceable>source</replaceable> est une expression de valeur de
    type <type>timestamp</type>, <type>time</type> ou <type>interval</type>.
    (Les expressions de type <type>date</type> sont
    converties en <type>timestamp</type> et peuvent aussi �tre utilis�es.)
    <replaceable>champ</replaceable> est un identifiant ou une cha�ne qui
    s�lectionne le champ � extraire de la valeur source. La fonction
    <function>extract</function> renvoie des valeurs de type
    <type>double precision</type>. La liste qui suit pr�sente les noms de champs
    valides&nbsp;:

    <!-- alphabetical -->
    <variablelist>
     <varlistentry>
      <term><literal>century</literal></term>
      <listitem>
       <para>
        Le si�cle.
       </para>

<screen>SELECT EXTRACT(CENTURY FROM TIMESTAMP '2000-12-16 12:21:13');
<lineannotation>R�sultat : </lineannotation><computeroutput>20</computeroutput>
SELECT EXTRACT(CENTURY FROM TIMESTAMP '2001-02-16 20:38:40');
<lineannotation>R�sultat : </lineannotation><computeroutput>21</computeroutput></screen>

       <para>
         Le premier si�cle commence le 1er janvier de l'an 1 (0001-01-01
         00:00:00 AD) bien qu'ils ne le savaient pas � cette �poque. Cette
         d�finition s'applique � tous les pays qui utilisent le calendrier Gr�gorien.
         Le si�cle 0 n'existe pas. On passe de -1 � 1.
         En cas de d�saccord, adresser une plainte �&nbsp;:
         Sa Saintet� le Pape, Cath�drale Saint-Pierre de Rome, Vatican.
       </para>

       <para>
	Les versions de <productname>PostgreSQL</productname> ant�rieures �
	la 8.0 ne suivaient pas la num�rotation conventionnelle des si�cles
	mais renvoyaient uniquement le champ ann�e divis�e par 100.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>day</literal></term>
      <listitem>
       <para>
        Le champ jour (du mois) : de 1 � 31.
       </para>

<screen>SELECT EXTRACT(DAY FROM TIMESTAMP '2001-02-16 20:38:40');
<lineannotation>R�sultat : </lineannotation><computeroutput>16</computeroutput></screen>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>decade</literal></term>
      <listitem>
       <para>
        Le champ ann�e divis� par 10.
       </para>

<screen>SELECT EXTRACT(DECADE FROM TIMESTAMP '2001-02-16 20:38:40');
<lineannotation>R�sultat : </lineannotation><computeroutput>200</computeroutput></screen>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>dow</literal></term>
      <listitem>
       <para>
        Le jour de la semaine (de 0 � 6&nbsp;; dimanche �tant le 0)
        (uniquement pour les valeurs de type <type>timestamp</type>).
       </para>

<screen>SELECT EXTRACT(DOW FROM TIMESTAMP '2001-02-16 20:38:40');
<lineannotation>R�sultat : </lineannotation><computeroutput>5</computeroutput></screen>
       <para>
	Cette num�rotation du jour de la semaine est diff�rente de celle
	de la fonction <function>to_char</function>.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>doy</literal></term>
      <listitem>
       <para>
        Le jour de l'ann�e (de 1 � 365/366) (uniquement
        pour les valeurs <type>timestamp</type>).
       </para>

<screen>SELECT EXTRACT(DOY FROM TIMESTAMP '2001-02-16 20:38:40');
<lineannotation>R�sultat : </lineannotation><computeroutput>47</computeroutput></screen>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>epoch</literal></term>
      <listitem>
       <para>
        Pour les valeurs de type <type>date</type> et <type>timestamp</type>,
        le nombre de secondes depuis le 1er janvier 1970 (exactement depuis le
        1970-01-01 00:00:00-00). Ce nombre peut �tre n�gatif. Pour les valeurs de
        type <type>interval</type>, il s'agit du nombre total de secondes dans
        l'intervalle.
       </para>

<screen>SELECT EXTRACT(EPOCH FROM TIMESTAMP WITH TIME ZONE '2001-02-16 20:38:40-08');
<lineannotation>R�sultat :
</lineannotation><computeroutput>982384720</computeroutput>

SELECT EXTRACT(EPOCH FROM INTERVAL '5 days 3 hours');
<lineannotation>R�sultat :
</lineannotation><computeroutput>442800</computeroutput></screen>

       <para>
	Convertir une valeur epoch en valeur de type
	date/heure&nbsp;:
       </para>

<screen>SELECT TIMESTAMP WITH TIME ZONE 'epoch' + 982384720 * INTERVAL '1 second';</screen>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>hour</literal></term>
      <listitem>
       <para>
        Le champ heure (0 - 23).
       </para>

<screen>SELECT EXTRACT(HOUR FROM TIMESTAMP '2001-02-16 20:38:40');
<lineannotation>R�sultat : </lineannotation><computeroutput>20</computeroutput></screen>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>microseconds</literal></term>
      <listitem>
       <para>
        Le champ secondes, incluant la partie d�cimale, multipli� par
        1&nbsp;000&nbsp;000. Cela inclut l'int�gralit� des secondes.
       </para>

<screen>SELECT EXTRACT(MICROSECONDS FROM TIME '17:12:28.5');
<lineannotation>R�sultat :
</lineannotation><computeroutput>28500000</computeroutput></screen>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>millennium</literal></term>
      <listitem>
       <para>
        Le mill�naire.
       </para>

<screen>SELECT EXTRACT(MILLENNIUM FROM TIMESTAMP '2001-02-16 20:38:40');
<lineannotation>R�sultat : </lineannotation><computeroutput>3</computeroutput></screen>

	<para>
	 Les ann�es 1900 sont dans le second mill�naire. Le troisi�me mill�naire
	 commence le 1er janvier 2001.
	</para>

	<para>
	Les versions de <productname>PostgreSQL</productname> ant�rieures � la 8.0
	ne suivaient pas les conventions de num�rotation des mill�naires mais
	renvoyaient seulement le champ ann�e divis� par 1000.
	</para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>milliseconds</literal></term>
      <listitem>
       <para>
        Le champ secondes, incluant la partie d�cimale, multipli� par 1000.
        Cela inclut l'int�gralit� des secondes.
       </para>

<screen>SELECT EXTRACT(MILLISECONDS FROM TIME '17:12:28.5');
<lineannotation>R�sultat :
</lineannotation><computeroutput>28500</computeroutput></screen>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>minute</literal></term>
      <listitem>
       <para>
        Le champ minutes (0 - 59).
       </para>

<screen>SELECT EXTRACT(MINUTE FROM TIMESTAMP '2001-02-16 20:38:40');
<lineannotation>R�sultat : </lineannotation><computeroutput>38</computeroutput></screen>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>month</literal></term>
      <listitem>
       <para>
        Pour les valeurs de type <type>timestamp</type>, le num�ro du mois dans
        l'ann�e (de 1 � 12)&nbsp;; pour les valeurs de type
        <type>interval</type>, le nombre de mois, modulo 12 (0 - 11).
       </para>

<screen>SELECT EXTRACT(MONTH FROM TIMESTAMP '2001-02-16 20:38:40');
<lineannotation>R�sultat : </lineannotation><computeroutput>2</computeroutput>

SELECT EXTRACT(MONTH FROM INTERVAL '2 years 3 months');
<lineannotation>R�sultat : </lineannotation><computeroutput>3</computeroutput>

SELECT EXTRACT(MONTH FROM INTERVAL '2 years 13 months');
<lineannotation>R�sultat : </lineannotation><computeroutput>1</computeroutput></screen>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>quarter</literal></term>
      <listitem>
       <para>
        Le trimestre (1 - 4) dont le jour fait partie (uniquement pour les
        valeurs de type <type>timestamp</type>).
       </para>

<screen>SELECT EXTRACT(QUARTER FROM TIMESTAMP '2001-02-16 20:38:40');
<lineannotation>R�sultat : </lineannotation><computeroutput>1</computeroutput></screen>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>second</literal></term>
      <listitem>
       <para>
        Le champs secondes, incluant la partie d�cimale (0 -
        59<footnote><simpara>60 si les secondes ��leap�� sont implant�es par
        le syst�me d'exploitation.</simpara></footnote>).
       </para>

<screen>SELECT EXTRACT(SECOND FROM TIMESTAMP '2001-02-16 20:38:40');
<lineannotation>R�sultat : </lineannotation><computeroutput>40</computeroutput>

SELECT EXTRACT(SECOND FROM TIME '17:12:28.5');
<lineannotation>R�sultat :
</lineannotation><computeroutput>28.5</computeroutput></screen>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term><literal>timezone</literal></term>
      <listitem>
       <para>
        Le d�calage du fuseau horaire depuis UTC, mesur� en secondes. Les
        valeurs positives correspondent aux fuseaux horaires � l'est d'UTC, les 
        valeurs n�gatives � l'ouest d'UTC.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>timezone_hour</literal></term>
      <listitem>
       <para>
        Le composant heure du d�calage du fuseau horaire.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>timezone_minute</literal></term>
      <listitem>
       <para>
        Le composant minute du d�calage du fuseau horaire.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>week</literal></term>
      <listitem>
       <para>
        Le num�ro de la semaine dans l'ann�e, � laquelle appartient le jour. Par
        d�finition (<acronym>ISO</acronym> 8601), la premi�re semaine d'une
        ann�e contient le 4 janvier de cette ann�e. (La semaine 
        <acronym>ISO</acronym>-8601 commence un lundi.) Dit autrement, le
        premier jeudi d'une ann�e se trouve dans la premi�re semaine de cette
        ann�e. (Uniquement pour les valeurs de type <type>timestamp</type>.)
       </para>
       <para>
        De ce fait, les dates de d�but janvier peuvent
	faire partie de la 52� ou 53� semaine de l'ann�e pr�c�dente. Par exemple,
        <literal>2005-01-01</literal> fait partie de la 53� semaine de 2004 et
        <literal>2006-01-01</literal> fait partie de la 52� semaine de l'ann�e 2005.
       </para>

<screen>SELECT EXTRACT(WEEK FROM TIMESTAMP '2001-02-16 20:38:40');
<lineannotation>R�sultat : </lineannotation><computeroutput>7</computeroutput></screen>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><literal>year</literal></term>
      <listitem>
       <para>
        Le champ ann�e. Il n'y a pas de <literal>0 AD</literal>,
        la soustraction d'ann�es <literal>BC</literal> aux ann�es
	<literal>AD</literal> n�cessite donc une attention particuli�re.
       </para>

<screen>SELECT EXTRACT(YEAR FROM TIMESTAMP '2001-02-16 20:38:40');
<lineannotation>R�sultat :
</lineannotation><computeroutput>2001</computeroutput></screen>
      </listitem>
     </varlistentry>

    </variablelist>

   </para>

   <para>
    La fonction <function>extract</function> a pour but principal l'ex�cution
    de calculs. Pour le formatage des valeurs date/heure en vue de leur affichage, voir la
    <xref linkend="functions-formatting"/>.
   </para>

   <para>
    La fonction <function>date_part</function> est model�e sur l'�quivalent
    traditionnel <productname>Ingres</productname> de la fonction
    <function>extract</function> du standard <acronym>SQL</acronym>&nbsp;:
<synopsis>date_part('<replaceable>champ</replaceable>', <replaceable>source</replaceable>)</synopsis>
    Le param�tre <replaceable>champ</replaceable> est obligatoirement une
    valeur de type cha�ne et non pas un nom. Les noms de champ valide pour
    <function>date_part</function> sont les m�mes que pour
    <function>extract</function>.
   </para>

<screen>SELECT date_part('day', TIMESTAMP '2001-02-16 20:38:40');
<lineannotation>R�sultat : </lineannotation><computeroutput>16</computeroutput>

SELECT date_part('hour', INTERVAL '4 hours 3 minutes');
<lineannotation>R�sultat : </lineannotation><computeroutput>4</computeroutput></screen>

  </sect2>

  <sect2 id="functions-datetime-trunc">
   <title><function>date_trunc</function></title>

   <indexterm>
    <primary>date_trunc</primary>
   </indexterm>

   <para>
    La fonction <function>date_trunc</function> est conceptuellement similaire
    � la fonction <function>trunc</function> pour les nombres.
   </para>

   <para>
<synopsis>date_trunc('<replaceable>champ</replaceable>', <replaceable>source</replaceable>)</synopsis>
    <replaceable>source</replaceable> est une expression de type
    <type>timestamp</type> ou <type>interval</type>.
    (Les valeurs de type <type>date</type> et
    <type>time</type> sont converties automatiquement en
    respectivement <type>timestamp</type> ou
    <type>interval</type>).
    <replaceable>champ</replaceable> indique la pr�cision avec laquelle tronquer
    la valeur en entr�e. La valeur de retour est de type
    <type>timestamp</type> ou <type>interval</type> avec tous les champs
    moins significatifs que celui s�lectionn� positionn�s � z�ro (ou un pour la date
    et le mois).
   </para>

   <para>
    Les valeurs valides pour <replaceable>champ</replaceable> sont&nbsp;:
    <simplelist>
     <member><literal>microseconds</literal></member>&nbsp;;
     <member><literal>milliseconds</literal></member>&nbsp;;
     <member><literal>second</literal></member>&nbsp;;
     <member><literal>minute</literal></member>&nbsp;;
     <member><literal>hour</literal></member>&nbsp;;
     <member><literal>day</literal></member>&nbsp;;
     <member><literal>week</literal></member>&nbsp;;
     <member><literal>month</literal></member>&nbsp;;
     <member><literal>quarter</literal></member>&nbsp;;
     <member><literal>year</literal></member>&nbsp;;
     <member><literal>decade</literal></member>&nbsp;;
     <member><literal>century</literal></member>&nbsp;;
     <member><literal>millennium</literal></member>.
    </simplelist>
   </para>

   <para>
    Exemples&nbsp;:
<screen>SELECT date_trunc('hour', TIMESTAMP '2001-02-16 20:38:40');
<lineannotation>R�sultat : </lineannotation><computeroutput>2001-02-16
20:00:00</computeroutput>

SELECT date_trunc('year', TIMESTAMP '2001-02-16 20:38:40');
<lineannotation>R�sultat : </lineannotation><computeroutput>2001-01-01
00:00:00</computeroutput></screen>
   </para>
  </sect2>

  <sect2 id="functions-datetime-zoneconvert">
   <title><literal>AT TIME ZONE</literal></title>

   <indexterm>
    <primary>fuseau horaire</primary>
    <secondary>conversion</secondary>
   </indexterm>

   <indexterm>
    <primary>AT TIME ZONE</primary>
   </indexterm>

   <para>
    La construction <literal>AT TIME ZONE</literal> permet les conversions
    d'<quote>estampilles temporelles</quote> (<foreignphrase>time
    stamps</foreignphrase>) dans les diff�rents fuseaux horaires. 
    Le <xref linkend="functions-datetime-zoneconvert-table"/> affiche ses variantes.
   </para>

    <table id="functions-datetime-zoneconvert-table">
     <title>Variantes <literal>AT TIME ZONE</literal></title>
     <tgroup cols="3">
      <colspec colnum="1" colwidth="1.3*"/>
      <colspec colnum="2" colwidth="0.4*"/>
      <colspec colnum="3" colwidth="1.3*"/>
      <thead>
       <row>
	<entry>Expression</entry>
	<entry>Type de retour</entry>
	<entry>Description</entry>
       </row>
      </thead>

      <tbody>
       <row>
	<entry>
	 <literal><type>timestamp without time zone</type> AT TIME ZONE
<replaceable>zone</replaceable></literal>
	</entry>
	<entry><type>timestamp with time zone</type></entry>
	<entry>Traite l'estampille donn�e <emphasis>without time
	zone</emphasis> (sans fuseau),
	comme situ�e dans le fuseau horaire indiqu�.</entry>
       </row>

       <row>
	<entry>
	 <literal><type>timestamp with time zone</type> AT TIME ZONE
<replaceable>zone</replaceable></literal>
	</entry>
	<entry><type>timestamp without time zone</type></entry>
	<entry>Convertit l'estampille donn�e <emphasis>with time
	zone</emphasis> (avec fuseau)
	dans le nouveau fuseau horaire.</entry>
       </row>

       <row>
	<entry>
	 <literal><type>time with time zone</type> AT TIME ZONE
<replaceable>zone</replaceable></literal>
	</entry>
	<entry><type>time with time zone</type></entry>
	<entry>Convertit l'heure donn�e <emphasis>with time
	zone</emphasis> (avec fuseau) dans
	le nouveau fuseau horaire.</entry>
       </row>
      </tbody>
     </tgroup>
    </table>

   <para>
    Dans ces expressions, le fuseau horaire d�sir� <replaceable>zone</replaceable>
    peut �tre indiqu� comme une cha�ne texte (par exemple, 
    <literal>'PST'</literal>) ou comme un intervalle (c'est-�-dire
    <literal>INTERVAL '-08:00'</literal>). Dans le cas textuel, un nom de
    fuseau peut �tre indiqu� de toute fa�on d�crite dans <xref
    linkend="datatype-timezones"/>.
   </para>

   <para>
    Exemples (en supposant que le fuseau horaire local soit
    <literal>PST8PDT</literal>)&nbsp;:
<screen>SELECT TIMESTAMP '2001-02-16 20:38:40' AT TIME ZONE 'MST';
<lineannotation>R�sultat : </lineannotation><computeroutput>2001-02-16
19:38:40-08</computeroutput>

SELECT TIMESTAMP WITH TIME ZONE '2001-02-16 20:38:40-05' AT TIME ZONE 'MST';
<lineannotation>R�sultat : </lineannotation><computeroutput>2001-02-16
18:38:40</computeroutput></screen>
    Le premier exemple prend une <quote>estampille temporelle sans fuseau</quote>
    et l'interpr�te comme une date MST (UTC-7), qui est ensuite convertie en PST
    (UTC-8) pour l'affichage. Le second exemple prend une estampille indiqu�e
    en EST (UTC-5) et la convertit en heure locale, c'est-�-dire en MST (UTC-7).
   </para>

   <para>
    La fonction <literal><function>timezone</function>(<replaceable>zone</replaceable>,
    <replaceable>timestamp</replaceable>)</literal> est �quivalente � la construction
    conforme au standard SQL, <literal><replaceable>timestamp</replaceable> AT TIME ZONE
    <replaceable>zone</replaceable></literal>. 
   </para>
  </sect2>

  <sect2 id="functions-datetime-current">
   <title>Date/Heure courante</title>

   <indexterm>
    <primary>date</primary>
    <secondary>courante</secondary>
   </indexterm>

   <indexterm>
    <primary>heure</primary>
    <secondary>courante</secondary>
   </indexterm>

   <para>
    <productname>PostgreSQL</productname> fournit diverses fonctions
    qui renvoient des valeurs relatives aux date et heure courantes. Ces
    fonctions du standard SQL renvoient toutes des valeurs fond�es sur l'heure
    de d�but de la transaction en cours&nbsp;:
<synopsis>
CURRENT_DATE&nbsp;;
CURRENT_TIME&nbsp;;
CURRENT_TIMESTAMP&nbsp;;
CURRENT_TIME(<replaceable>precision</replaceable>)&nbsp;;
CURRENT_TIMESTAMP(<replaceable>precision</replaceable>)&nbsp;;
LOCALTIME&nbsp;;
LOCALTIMESTAMP&nbsp;;
LOCALTIME(<replaceable>precision</replaceable>)&nbsp;;
LOCALTIMESTAMP(<replaceable>precision</replaceable>).
</synopsis>
    </para>

    <para>
     <function>CURRENT_TIME</function> et
     <function>CURRENT_TIMESTAMP</function> d�livrent les valeurs avec
     indication du fuseau horaire&nbsp;;
     <function>LOCALTIME</function> et
     <function>LOCALTIMESTAMP</function> d�livrent les valeurs sans
     indication du fuseau horaire.
    </para>

    <para>
     <function>CURRENT_TIME</function>,
     <function>CURRENT_TIMESTAMP</function>,
     <function>LOCALTIME</function>, et
     <function>LOCALTIMESTAMP</function>
     acceptent un param�tre optionnel de pr�cision. Celui-ci 
     permet d'arrondir le r�sultat au nombre de chiffres indiqu�s pour la
     partie fractionnelle des secondes. Sans ce param�tre de pr�cision, le
     r�sultat est donn� avec toute la pr�cision disponible.
    </para>

   <para>
    Quelques exemples&nbsp;:
<screen>SELECT CURRENT_TIME;
<lineannotation>R�sultat :
</lineannotation><computeroutput>14:39:53.662522-05</computeroutput>

SELECT CURRENT_DATE;
<lineannotation>R�sultat :
</lineannotation><computeroutput>2001-12-23</computeroutput>

SELECT CURRENT_TIMESTAMP;
<lineannotation>R�sultat : </lineannotation><computeroutput>2001-12-23
14:39:53.662522-05</computeroutput>

SELECT CURRENT_TIMESTAMP(2);
<lineannotation>R�sultat : </lineannotation><computeroutput>2001-12-23
14:39:53.66-05</computeroutput>

SELECT LOCALTIMESTAMP;
<lineannotation>R�sultat : </lineannotation><computeroutput>2001-12-23
14:39:53.662522</computeroutput></screen>
   </para>

   <para>
    Comme ces fonctions renvoient l'heure du d�but de la transaction
    en cours, leurs valeurs ne
    changent pas au cours de la transaction. Il s'agit d'une
    fonctionnalit�&nbsp;: le but est de permettre � une m�me transaction
    de disposer d'une notion coh�rente de l'heure <quote>courante</quote>. Les
    multiples modifications au sein d'une m�me transaction portent ainsi
    toutes la m�me heure.
   </para>

   <note>
    <para>
     D'autres syst�mes de bases de donn�es actualisent ces valeurs
     plus fr�quemment.
    </para>
   </note>

   <para>
    <productname>PostgreSQL</productname> fournit aussi des fonctions qui renvoie
    l'heure de d�but de l'instruction en cours, voire l'heure de l'appel de la
    fonction. La liste compl�te des fonctions, ne faisant pas partie du standard
    SQL, est&nbsp;:
<synopsis>now()&nbsp;;
transaction_timestamp()&nbsp;;
statement_timestamp()&nbsp;;
clock_timestamp()&nbsp;;
timeofday().
</synopsis>
   </para>

   <para>
    <function>now()</function> est l'�quivalent traditionnel <productname>PostgreSQL</productname>
    de <function>CURRENT_TIMESTAMP</function>.
    <function>transaction_timestamp()</function> est un peu l'�quivalent de
    <function>CURRENT_TIMESTAMP</function> mais est nomm� ainsi pour expliciter
    l'information retourn�e.
    <function>statement_timestamp()</function> renvoie l'heure de d�but de
    l'instruction en cours (plus exactement, l'heure de r�ception du
    dernier message de la commande en provenance du client).
    <function>statement_timestamp()</function> et <function>transaction_timestamp()</function>
    renvoient la m�me valeur pendant la premi�re commande d'une transaction,
    mais leurs r�sultats peuvent diff�rer pour les commandes suivantes.
    <function>clock_timestamp()</function> renvoie l'heure courante, et, de ce
    fait, sa valeur change m�me � l'int�rieur d'une commande SQL unique.
    <function>timeofday()</function> est une fonction historique de
    <productname>PostgreSQL</productname>. Comme
    <function>clock_timestamp()</function>, elle renvoie l'heure courante mais
    format�e en tant que cha�ne <type>text</type> plut�t qu'en valeur de
    type <type>timestamp with time zone</type>.
   </para>

   <para>
    Tous les types de donn�es date/heure acceptent aussi la valeur litt�rale 
    sp�ciale <literal>now</literal> pour indiquer la date et l'heure courantes
    (interpr�t�s comme l'heure de d�but de la transaction).
    De ce fait, les trois instructions suivantes renvoient le m�me r�sultat&nbsp;:
<programlisting>SELECT CURRENT_TIMESTAMP;
SELECT now();
SELECT TIMESTAMP 'now'; -- incorrect en utilisation avec DEFAULT</programlisting>
   </para>

    <tip>
     <para>
      La troisi�me forme ne doit pas �tre utilis�e pour la sp�cification 
      de la clause <literal>DEFAULT</literal> � la cr�ation d'une table. Le syst�me
      convertirait <literal>now</literal> en valeur de type
      <type>timestamp</type> d�s l'analyse de la constante. � chque fois que la
      valeur par d�faut serait n�cessaire, c'est l'heure de cr�ation de la
      table qui sera utilis�e. Les deux premi�res formes ne sont pas
      �valu�es avant l'utilisation de la valeur par d�faut car ce sont
      des appels de fonctions. C'est donc bien le comportement attendu d'heure
      d'insertion comme valeur par d�faut qui est obtenu.
     </para>
    </tip>
  </sect2>

  <sect2 id="functions-datetime-delay">
   <title>Retarder l'ex�cution</title>

   <indexterm>
    <primary>pg_sleep</primary>
   </indexterm>
   <indexterm>
    <primary>sleep</primary>
   </indexterm>
   <indexterm>
    <primary>delay</primary>
   </indexterm>

   <para>
    La fonction suivante permet de retarder l'ex�cution du processus
    serveur&nbsp;:
<synopsis>
pg_sleep(<replaceable>seconds</replaceable>)
</synopsis>

    <function>pg_sleep</function> endort le processus de la session courante
    pendant <replaceable>seconds</replaceable> secondes.
    <replaceable>seconds</replaceable> est une valeur de type
    <type>double precision</type>, ce qui autorise les d�lais en fraction de secondes. Par exemple&nbsp;:

<programlisting>SELECT pg_sleep(1.5);
</programlisting>
   </para>

   <note>
     <para>
      La r�solution r�elle de l'intervalle est sp�cifique � la plateforme&nbsp;;
      0,01 seconde est une valeur habituelle. Le d�lai dure au minimum celui
      pr�cis�. Il peut toutefois �tre plus long du fait de certains facteurs
      tels la charge serveur.
     </para>
   </note>

   <warning>
     <para>
      Il convient de s'assurer que la session courante ne d�tient pas plus de verrous que
      n�cessaire lors de l'appel � <function>pg_sleep</function>. Dans le cas
      contraire, d'autres sessions peuvent �tre amen�es � attendre que le
      processus de retard courant ne termine, ralentissant ainsi tout le syst�me.
     </para>
   </warning>
  </sect2>

 </sect1>

 <sect1 id="functions-geometry">
  <title>Fonctions et op�rateurs g�om�triques</title>

   <para>
    Les types g�om�triques <type>point</type>, <type>box</type>,
    <type>lseg</type>, <type>line</type>, <type>path</type>,
    <type>polygon</type> et <type>circle</type> disposent d'un large ensemble de
    fonctions et op�rateurs natifs. Ils sont list�s dans le <xref
    linkend="functions-geometry-op-table"/>, le <xref
    linkend="functions-geometry-func-table"/> et le <xref
    linkend="functions-geometry-conv-table"/>.
   </para>

   <caution>
    <para>
     L'op�rateur <quote>identique �</quote>, <literal>~=</literal>, repr�sente
     la notion habituelle d'�galit� pour les types <type>point</type>,
     <type>box</type>, <type>polygon</type> et <type>circle</type>. Certains
     disposent �galement d'un op�rateur <literal>=</literal>, mais
     <literal>=</literal> ne compare que les �galit�s d'<emphasis>aires</emphasis>. Les autres op�rateurs de
     comparaison scalaires (<literal>&lt;=</literal> et autres) comparent de la
     m�me fa�on des aires pour ces types.
    </para>
   </caution>

   <table id="functions-geometry-op-table">
     <title>Op�rateurs g�om�triques</title>
     <tgroup cols="3">
      <colspec colnum="1" colwidth="0.8*"/>
      <colspec colnum="2" colwidth="1.6*"/>
      <colspec colnum="3" colwidth="1.6*"/>
      <thead>
       <row>
	<entry>Op�rateur</entry>
	<entry>Description</entry>
	<entry>Exemple</entry>
       </row>
      </thead>
      <tbody>
       <row>
	<entry><literal>+</literal> </entry>
	<entry>Translation</entry>
	<entry><literal>box '((0,0),(1,1))' + point '(2.0,0)'</literal></entry>
       </row>
       <row>
	<entry><literal>-</literal> </entry>
	<entry>Translation</entry>
	<entry><literal>box '((0,0),(1,1))' - point '(2.0,0)'</literal></entry>
       </row>
       <row>
	<entry><literal>*</literal> </entry>
	<entry>Mise � l'�chelle/rotation</entry>
	<entry><literal>box '((0,0),(1,1))' * point '(2.0,0)'</literal></entry>
       </row>
       <row>
	<entry><literal>/</literal> </entry>
	<entry>Mise � l'�chelle/rotation</entry>
	<entry><literal>box '((0,0),(2,2))' / point '(2.0,0)'</literal></entry>
       </row>
       <row>
	<entry><literal>#</literal> </entry>
	<entry>Point ou bo�te d'intersection</entry>
	<entry><literal>'((1,-1),(-1,1))' # '((1,1),(-1,-1))'</literal></entry>
       </row>
       <row>
	<entry><literal>#</literal> </entry>
	<entry>Nombre de points dans le chemin ou le polygone</entry>
	<entry><literal># '((1,0),(0,1),(-1,0))'</literal></entry>
       </row>
       <row>
	<entry><literal>@-@</literal> </entry>
	<entry>Longueur ou circonf�rence</entry>
	<entry><literal>@-@ path '((0,0),(1,0))'</literal></entry>
       </row>
       <row>
	<entry><literal>@@</literal> </entry>
	<entry>Centre</entry>
	<entry><literal>@@ circle '((0,0),10)'</literal></entry>
       </row>
       <row>
	<entry><literal>##</literal> </entry>
	<entry>Point de la seconde op�rande le plus proche de la premi�re</entry>
	<entry><literal>point '(0,0)' ## lseg '((2,0),(0,2))'</literal></entry>
       </row>
       <row>
	<entry><literal>&lt;-&gt;</literal> </entry>
	<entry>Distance entre</entry>
	<entry><literal>circle '((0,0),1)' &lt;-&gt; circle
'((5,0),1)'</literal></entry>
       </row>
       <row>
	<entry><literal>&amp;&amp;</literal> </entry>
	<entry>Recouvrement&nbsp;?</entry>
	<entry><literal>box '((0,0),(1,1))' &amp;&amp; box
'((0,0),(2,2))'</literal></entry>
       </row>
       <row>
        <entry><literal>&lt;&lt;</literal> </entry>
        <entry>Est strictement � gauche de&nbsp;?</entry>
        <entry><literal>circle '((0,0),1)' &lt;&lt; circle '((5,0),1)'</literal></entry>
       </row>
       <row>
        <entry><literal>&gt;&gt;</literal> </entry>
	<entry>Est strictement � droite de&nbsp;?</entry>
        <entry><literal>circle '((5,0),1)' &gt;&gt; circle '((0,0),1)'</literal></entry>
       </row>
       <row>
	<entry><literal>&amp;&lt;</literal> </entry>
	<entry>Ne s'�tend pas � droite de&nbsp;?</entry>
	<entry><literal>box '((0,0),(1,1))' &amp;&lt; box
'((0,0),(2,2))'</literal></entry>
       </row>
       <row>
	<entry><literal>&amp;&gt;</literal> </entry>
	<entry>Ne s'�tend pas � gauche de&nbsp;?</entry>
	<entry><literal>box '((0,0),(3,3))' &amp;&gt; box
'((0,0),(2,2))'</literal></entry>
       </row>
       <row>
        <entry><literal>&lt;&lt;|</literal> </entry>
	<entry>Est strictement en-dessous de&nbsp;?</entry>
        <entry><literal>box '((0,0),(3,3))' &lt;&lt;| box '((3,4),(5,5))'</literal></entry>
       </row>
       <row>
        <entry><literal>|&gt;&gt;</literal> </entry>
	<entry>Est strictement au-dessus de&nbsp;?</entry>
        <entry><literal>box '((3,4),(5,5))' |&gt;&gt; box '((0,0),(3,3))'</literal></entry>
       </row>
       <row>
        <entry><literal>&amp;&lt;|</literal> </entry>
        <entry>Ne s'�tend pas au-dessus&nbsp;?</entry>
        <entry><literal>box '((0,0),(1,1))' &amp;&lt;| box '((0,0),(2,2))'</literal></entry>
       </row>
       <row>
        <entry><literal>|&amp;&gt;</literal> </entry>
        <entry>Ne s'�tend pas en-dessous de&nbsp;?</entry>
        <entry><literal>box '((0,0),(3,3))' |&amp;&gt; box '((0,0),(2,2))'</literal></entry>
       </row>
       <row>
        <entry><literal>&lt;^</literal> </entry>
        <entry>Est en-dessous de (peut toucher)&nbsp;?</entry>
        <entry><literal>circle '((0,0),1)' &lt;^ circle '((0,5),1)'</literal></entry>
       </row>
       <row>
        <entry><literal>&gt;^</literal> </entry>
	<entry>Est au-dessus de (peut toucher)&nbsp;?</entry>
        <entry><literal>circle '((0,5),1)' &gt;^ circle '((0,0),1)'</literal></entry>
       </row>
       <row>
	<entry><literal>?#</literal> </entry>
	<entry>Intersection&nbsp;?</entry>
	<entry><literal>lseg '((-1,0),(1,0))' ?# box
'((-2,-2),(2,2))'</literal></entry>
       </row>
       <row>
	<entry><literal>?-</literal> </entry>
	<entry>Horizontal&nbsp;?</entry>
	<entry><literal>?- lseg '((-1,0),(1,0))'</literal></entry>
       </row>
       <row>
	<entry><literal>?-</literal> </entry>
	<entry>Sont align�s horizontalement&nbsp;?</entry>
	<entry><literal>point '(1,0)' ?- point '(0,0)'</literal></entry>
       </row>
       <row>
	<entry><literal>?|</literal> </entry>
	<entry>Vertical&nbsp;?</entry>
	<entry><literal>?| lseg '((-1,0),(1,0))'</literal></entry>
       </row>
       <row>
	<entry><literal>?|</literal> </entry>
	<entry>Sont verticalement align�s&nbsp;?</entry>
	<entry><literal>point '(0,1)' ?| point '(0,0)'</literal></entry>
       </row>
       <row>
	<entry><literal>?-|</literal> </entry>
	<entry>Perpendiculaires&nbsp;?</entry>
	<entry><literal>lseg '((0,0),(0,1))' ?-| lseg '((0,0),(1,0))'</literal></entry>
       </row>
       <row>
	<entry><literal>?||</literal> </entry>
	<entry>Parall�les&nbsp;?</entry>
	<entry><literal>lseg '((-1,0),(1,0))' ?|| lseg
'((-1,2),(1,2))'</literal></entry>
       </row>
       <row>
	<entry><literal>@&gt;</literal> </entry>
	<entry>Contient&nbsp;?</entry>
	<entry><literal>circle '((0,0),2)' @&gt; point '(1,1)'</literal></entry>
       </row>
       <row>
	<entry><literal>&lt;@</literal> </entry>
	<entry>Contenu ou dessus&nbsp;?</entry>
	<entry><literal>point '(1,1)' &lt;@ circle '((0,0),2)'</literal></entry>
       </row>
       <row>
	<entry><literal>~=</literal> </entry>
	<entry>Identique �&nbsp;?</entry>
	<entry><literal>polygon '((0,0),(1,1))' ~= polygon
'((1,1),(0,0))'</literal></entry>
       </row>
      </tbody>
     </tgroup>
   </table>


   <note>
    <para>
     Avant <productname>PostgreSQL</productname> 8.2, les op�rateurs
     <literal>@&gt;</literal> et <literal>&lt;@</literal> s'appelaient
     respectivement <literal>~</literal> et <literal>@</literal>. Ces noms sont
     toujours disponibles mais, obsol�tes, ils seront �ventuellement supprim�s.
    </para>
   </note>

   <indexterm>
    <primary>area</primary>
   </indexterm>
   <indexterm>
    <primary>center</primary>
   </indexterm>
   <indexterm>
    <primary>diameter</primary>
   </indexterm>
   <indexterm>
    <primary>height</primary>
   </indexterm>
   <indexterm>
    <primary>isclosed</primary>
   </indexterm>
   <indexterm>
    <primary>isopen</primary>
   </indexterm>
   <indexterm>
    <primary>length</primary>
   </indexterm>
   <indexterm>
    <primary>npoints</primary>
   </indexterm>
   <indexterm>
    <primary>pclose</primary>
   </indexterm>
   <indexterm>
    <primary>popen</primary>
   </indexterm>
   <indexterm>
    <primary>radius</primary>
   </indexterm>
   <indexterm>
    <primary>width</primary>
   </indexterm>

   <table id="functions-geometry-func-table">
     <title>Fonctions g�om�triques</title>
     <tgroup cols="4">
      <thead>
       <row>
	<entry>Fonction</entry>
	<entry>Type de retour</entry>
	<entry>Description</entry>
	<entry>Exemple</entry>
       </row>
      </thead>
      <tbody>
       <row>
	<entry><literal><function>area</function>
	(<replaceable>object</replaceable>)</literal></entry>
	<entry><type>double precision</type></entry>
	<entry>aire</entry>
	<entry><literal>area(box '((0,0),(1,1))')</literal></entry>
       </row>
       <row>
	<entry><literal><function>center</function>
	(<replaceable>object</replaceable>)</literal></entry>
	<entry><type>point</type></entry>
	<entry>centre</entry>
	<entry><literal>center(box '((0,0),(1,2))')</literal></entry>
       </row>
       <row>
	<entry><literal><function>diameter</function>(<type>circle</type>)</literal></entry
>
	<entry><type>double precision</type></entry>
	<entry>diam�tre du cercle</entry>
	<entry><literal>diameter(circle '((0,0),2.0)')</literal></entry>
       </row>
       <row>
	<entry><literal><function>height</function>(<type>box</type>)</literal></entry>
	<entry><type>double precision</type></entry>
	<entry>taille verticale (hauteur) de la bo�te</entry>
	<entry><literal>height(box '((0,0),(1,1))')</literal></entry>
       </row>
       <row>
	<entry><literal><function>isclosed</function>(<type>path</type>)</literal></entry>
	<entry><type>boolean</type></entry>
	<entry>chemin ferm�&nbsp;?</entry>
	<entry><literal>isclosed(path '((0,0),(1,1),(2,0))')</literal></entry>
       </row>
       <row>
	<entry><literal><function>isopen</function>(<type>path</type>)</literal></entry>
	<entry><type>boolean</type></entry>
	<entry>chemin ouvert&nbsp;?</entry>
	<entry><literal>isopen(path '[(0,0),(1,1),(2,0)]')</literal></entry>
       </row>
       <row>
	<entry><literal><function>length</function>(<replaceable>object</replaceable>)</literal></entry>
	<entry><type>double precision</type></entry>
	<entry>longueur</entry>
	<entry><literal>length(path '((-1,0),(1,0))')</literal></entry>
       </row>
       <row>
	<entry><literal><function>npoints</function>(<type>path</type>)</literal></entry>
	<entry><type>int</type></entry>
	<entry>nombre de points</entry>
	<entry><literal>npoints(path '[(0,0),(1,1),(2,0)]')</literal></entry>
       </row>
       <row>
	<entry><literal><function>npoints</function>(<type>polygon</type>)</literal></entry
>
	<entry><type>int</type></entry>
	<entry>nombre de points</entry>
	<entry><literal>npoints(polygon '((1,1),(0,0))')</literal></entry>
       </row>
       <row>
	<entry><literal><function>pclose</function>(<type>path</type>)</literal></entry>
	<entry><type>path</type></entry>
	<entry>convertit un chemin en chemin ferm�</entry>
	<entry><literal>pclose(path '[(0,0),(1,1),(2,0)]')</literal></entry>
       </row>
<!--![IGNORE[ Not defined by this name. Implements the intersection op�rateur '#' 
       <row>
	<entry><literal><function>point</function>(<type>lseg</type>,
<type>lseg</type>)</literal></entry>
	<entry><type>point</type></entry>
	<entry>intersection</entry>
	<entry><literal>point(lseg '((-1,0),(1,0))',lseg
'((-2,-2),(2,2))')</literal></entry>
       </row>
]]-->
       <row>
	<entry><literal><function>popen</function>(<type>path</type>)</literal></entry>
	<entry><type>path</type></entry>
	<entry>convertit un chemin en chemin ouvert</entry>
	<entry><literal>popen(path '((0,0),(1,1),(2,0))')</literal></entry>
       </row>
       <row>
	<entry><literal><function>radius</function>(<type>circle</type>)</literal></entry>
	<entry><type>double precision</type></entry>
	<entry>rayon du cercle</entry>
	<entry><literal>radius(circle '((0,0),2.0)')</literal></entry>
       </row>
       <row>
	<entry><literal><function>width</function>(<type>box</type>)</literal></entry>
	<entry><type>double precision</type></entry>
	<entry>taille horizontale (largeur) d'une bo�te</entry>
	<entry><literal>width(box '((0,0),(1,1))')</literal></entry>
       </row>
      </tbody>
     </tgroup>
   </table>


   <table id="functions-geometry-conv-table">
     <title>Fonctions de conversion de type g�om�trique</title>
     <tgroup cols="4">
      <thead>
       <row>
	<entry>Fonction</entry>
	<entry>Type de retour</entry>
	<entry>Description</entry>
	<entry>Exemple</entry>
       </row>
      </thead>
      <tbody>
       <row>
	<entry><literal><function>box</function>(<type>circle</type>)</literal></entry>
	<entry><type>box</type></entry>
	<entry>cercle vers bo�te</entry>
	<entry><literal>box(circle '((0,0),2.0)')</literal></entry>
       </row>
       <row>
	<entry><literal><function>box</function>(<type>point</type>,
<type>point</type>)</literal></entry>
	<entry><type>box</type></entry>
	<entry>points vers bo�te</entry>
	<entry><literal>box(point '(0,0)', point '(1,1)')</literal></entry>
       </row>
       <row>
	<entry><literal><function>box</function>(<type>polygon</type>)</literal></entry
>
	<entry><type>box</type></entry>
	<entry>polygone vers bo�te</entry>
	<entry><literal>box(polygon '((0,0),(1,1),(2,0))')</literal></entry>
       </row>
       <row>
	<entry><literal><function>circle</function>(<type>box</type>)</literal></entry>
	<entry><type>circle</type></entry>
	<entry>bo�te vers cercle</entry>
	<entry><literal>circle(box '((0,0),(1,1))')</literal></entry>
       </row>
       <row>
	<entry><literal><function>circle</function>(<type>point</type>, <type>double
precision</type>)</literal></entry>
	<entry><type>circle</type></entry>
	<entry>centre et rayon vers cercle</entry>
	<entry><literal>circle(point '(0,0)', 2.0)</literal></entry>
       </row>
       <row>
        <entry><literal><function>circle</function>(<type>polygon</type>)</literal></entry>
        <entry><type>circle</type></entry>
        <entry>polygone vers cercle</entry>
        <entry><literal>circle(polygon '((0,0),(1,1),(2,0))')</literal></entry>
       </row>
       <row>
	<entry><literal><function>lseg</function>(<type>box</type>)</literal></entry>
	<entry><type>lseg</type></entry>
	<entry>diagonale de bo�te vers segment de ligne</entry>
	<entry><literal>lseg(box '((-1,0),(1,0))')</literal></entry>
       </row>
       <row>
	<entry><literal><function>lseg</function>(<type>point</type>,
<type>point</type>)</literal></entry>
	<entry><type>lseg</type></entry>
	<entry>points vers segment de ligne</entry>
	<entry><literal>lseg(point '(-1,0)', point '(1,0)')</literal></entry>
       </row>
       <row>
	<entry><literal><function>path</function>(<type>polygon</type>)</literal></entry>
	<entry><type>point</type></entry>
	<entry>polygone vers chemin</entry>
	<entry><literal>path(polygon '((0,0),(1,1),(2,0))')</literal></entry>
       </row>
       <row>
        <entry><literal><function>point</function>(<type>double
	       precision</type>, <type>double precision</type>)</literal></entry>
        <entry><type>point</type></entry>
        <entry>point de construction</entry>
        <entry><literal>point(23.4, -44.5)</literal></entry>
       </row>
       <row>
        <entry><literal><function>point</function>(<type>box</type>)</literal></entry>
        <entry><type>point</type></entry>
        <entry>centre de la bo�te</entry>
        <entry><literal>point(box '((-1,0),(1,0))')</literal></entry>
       </row>
       <row>
	<entry><literal><function>point</function>(<type>circle</type>)</literal></entry>
	<entry><type>point</type></entry>
	<entry>centre du cercle</entry>
	<entry><literal>point(circle '((0,0),2.0)')</literal></entry>
       </row>
       <row>
        <entry><literal><function>point</function>(<type>lseg</type>)</literal></entry>
        <entry><type>point</type></entry>
        <entry>centre de segment de ligne</entry>
        <entry><literal>point(lseg '((-1,0),(1,0))')</literal></entry>
       </row>
       <row>
	<entry><literal><function>point</function>(<type>polygon</type>)</literal></entry>
	<entry><type>point</type></entry>
	<entry>centre de polygone</entry>
	<entry><literal>point(polygon '((0,0),(1,1),(2,0))')</literal></entry>
       </row>
       <row>
	<entry><literal><function>polygon</function>(<type>box</type>)</literal></entry
>
	<entry><type>polygon</type></entry>
	<entry>bo�te vers polygone � quatre points</entry>
	<entry><literal>polygon(box '((0,0),(1,1))')</literal></entry>
       </row>
       <row>
	<entry><literal><function>polygon</function>(<type>circle</type>)</literal></entry>
	<entry><type>polygon</type></entry>
	<entry>cercle vers polygone � 12 points</entry>
	<entry><literal>polygon(circle '((0,0),2.0)')</literal></entry>
       </row>
       <row>
	<entry><literal><function>polygon</function>(<replaceable
class="parameter">npts</replaceable>, <type>circle</type>)</literal></entry>
	<entry><type>polygon</type></entry>
	<entry>cercle vers polygone � <replaceable
        class="parameter">npts</replaceable> points</entry>
	<entry><literal>polygon(12, circle '((0,0),2.0)')</literal></entry>
       </row>
       <row>
	<entry><literal><function>polygon</function>(<type>path</type>)</literal></entry>
	<entry><type>polygon</type></entry>
	<entry>chemin vers polygone</entry>
	<entry><literal>polygon(path '((0,0),(1,1),(2,0))')</literal></entry>
       </row>
      </tbody>
     </tgroup>
   </table>

    <para>
     Il est possible d'acc�der aux deux composants d'un <type>point</type>
     comme si c'�tait un tableau avec des index 0 et 1. Par exemple, si
     <literal>t.p</literal> est une colonne de type <type>point</type>, alors
     <literal>SELECT p[0] FROM t</literal> r�cup�re la coordonn�e X et
     <literal>UPDATE t SET p[1] = ...</literal> modifie la coordonn�e Y. De la m�me
     fa�on, une valeur de type <type>box</type> ou <type>lseg</type> peut �tre
     trait�e comme un tableau de deux valeurs de type <type>point</type>.
    </para>

    <para>
     La fonction <function>area</function> est utilisable avec les types
     <type>box</type>, <type>circle</type> et <type>path</type>.
     Elle ne fonctionne avec le type
     de donn�es <type>path</type> que s'il n'y a pas d'intersection entre les points du
     <type>path</type>. Le <type>path</type>
     <literal>'((0,0),(0,1),(2,1),(2,2),(1,2),(1,0),(0,0))'::PATH</literal>,
     par exemple, ne fonctionne pas. Le <type>path</type>, 
     visuellement identique,
     <literal>'((0,0),(0,1),(1,1),(1,2),(2,2),(2,1),(1,1),(1,0),(0,0))'::PATH</literal>,
     quant � lui, fonctionne. Si les concepts de <type>path</type> avec intersection et sans intersection
     sont sources de confusion, dessiner les deux <type>path</type> ci-dessus c�te-�-c�te.
    </para>

  </sect1>


 <sect1 id="functions-net">
  <title>Fonctions et op�rateurs sur les adresses r�seau</title>

  <para>
   Le <xref linkend="cidr-inet-operators-table"/> affiche les op�rateurs
   disponibles pour les types <type>cidr</type> et <type>inet</type>. Les
   op�rateurs <literal>&lt;&lt;</literal>,
   <literal>&lt;&lt;=</literal>, <literal>&gt;&gt;</literal> et
   <literal>&gt;&gt;=</literal> testent l'inclusion de sous-r�seau. Ils ne consid�rent
   que les parties r�seau des deux adresses, ignorant toute partie
   h�te, et d�terminent si une partie r�seau est identique ou consitue un
   sous-r�seau de l'autre.
  </para>

    <table id="cidr-inet-operators-table">
     <title>Op�rateurs <type>cidr</type> et <type>inet</type></title>
     <tgroup cols="3">
      <colspec colnum="1" colwidth="0.4*"/>
      <colspec colnum="2" colwidth="1*"/>
      <colspec colnum="3" colwidth="1.6*"/>
      <thead>
       <row>
	<entry>Op�rateur</entry>
	<entry>Description</entry>
	<entry>Exemple</entry>
       </row>
      </thead>
      <tbody>
       <row>
	<entry><literal>&lt;</literal> </entry>
	<entry>est plus petit que</entry>
	<entry><literal>inet '192.168.1.5' &lt; inet '192.168.1.6'</literal></entry>
       </row>
       <row>
	<entry><literal>&lt;=</literal> </entry>
	<entry>est plus petit que ou �gal �</entry>
	<entry><literal>inet '192.168.1.5' &lt;= inet '192.168.1.5'</literal></entry>
       </row>
       <row>
	<entry><literal>=</literal> </entry>
	<entry>est �gal �</entry>
	<entry><literal>inet '192.168.1.5' = inet '192.168.1.5'</literal></entry>
       </row>
       <row>
	<entry><literal>&gt;=</literal> </entry>
	<entry>est plus grand ou �gal �</entry>
	<entry><literal>inet '192.168.1.5' &gt;= inet '192.168.1.5'</literal></entry>
       </row>
       <row>
	<entry><literal>&gt;</literal> </entry>
	<entry>est plus grand que</entry>
	<entry><literal>inet '192.168.1.5' &gt; inet '192.168.1.4'</literal></entry>
       </row>
       <row>
	<entry><literal>&lt;&gt;</literal> </entry>
	<entry>n'est pas �gal �</entry>
	<entry><literal>inet '192.168.1.5' &lt;&gt; inet
'192.168.1.4'</literal></entry>
       </row>
       <row>
	<entry><literal>&lt;&lt;</literal> </entry>
	<entry>est contenu dans</entry>
	<entry><literal>inet '192.168.1.5' &lt;&lt; inet
'192.168.1/24'</literal></entry>
       </row>
       <row>
	<entry><literal>&lt;&lt;=</literal> </entry>
	<entry>est contenu dans ou �gal �</entry>
	<entry><literal>inet '192.168.1/24' &lt;&lt;= inet
'192.168.1/24'</literal></entry>
       </row>
       <row>
	<entry><literal>&gt;&gt;</literal> </entry>
	<entry>contient</entry>
	<entry><literal>inet'192.168.1/24' &gt;&gt; inet
'192.168.1.5'</literal></entry>
       </row>
       <row>
	<entry><literal>&gt;&gt;=</literal> </entry>
	<entry>contient ou est �gal �</entry>
	<entry><literal>inet '192.168.1/24' &gt;&gt;= inet
'192.168.1/24'</literal></entry>
       </row>
       <row>
        <entry> <literal>~</literal> </entry>
        <entry>bitwise NOT</entry>
        <entry><literal>~ inet '192.168.1.6'</literal></entry>
       </row>
       <row>
        <entry> <literal>&amp;</literal> </entry>
        <entry>bitwise AND</entry>
        <entry><literal>inet '192.168.1.6' &amp; inet '0.0.0.255'</literal></entry>
       </row>
       <row>
        <entry> <literal>|</literal> </entry>
        <entry>bitwise OR</entry>
        <entry><literal>inet '192.168.1.6' | inet '0.0.0.255'</literal></entry>
       </row>
       <row>
        <entry> <literal>+</literal> </entry>
        <entry>addition</entry>
        <entry><literal>inet '192.168.1.6' + 25</literal></entry>
       </row>
       <row>
        <entry> <literal>-</literal> </entry>
        <entry>soustraction</entry>
        <entry><literal>inet '192.168.1.43' - 36</literal></entry>
       </row>
       <row>
        <entry> <literal>-</literal> </entry>
        <entry>soustraction</entry>
        <entry><literal>inet '192.168.1.43' - inet '192.168.1.19'</literal></entry>
       </row>
      </tbody>
     </tgroup>
    </table>

  <para>
   Le <xref linkend="cidr-inet-functions-table"/> affiche les fonctions
   utilisables avec les types <type>cidr</type> et
   <type>inet</type>. Les fonctions <function>host</function>,
   <function>text</function> et <function>abbrev</function> ont principalement
   pour but d'offrir des formats d'affichage alternatifs.
  </para>

    <table id="cidr-inet-functions-table">
     <title>Fonctions <type>cidr</type> et <type>inet</type></title>
     <tgroup cols="5">
      <thead>
       <row>
	<entry>Fonction</entry>
	<entry>Type de retour</entry>
	<entry>Description</entry>
	<entry>Exemple</entry>
	<entry>R�sultat</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry><literal><function>abbrev</function>(<type>inet</type>)</literal></entry>
        <entry><type>text</type></entry>
        <entry>format textuel d'affichage raccourci</entry>
        <entry><literal>abbrev(inet '10.1.0.0/16')</literal></entry>
        <entry><literal>10.1.0.0/16</literal></entry>
       </row>
       <row>
        <entry><literal><function>abbrev</function>(<type>cidr</type>)</literal></entry>
        <entry><type>text</type></entry>
        <entry>format textuel d'affichage raccourci</entry>
        <entry><literal>abbrev(cidr '10.1.0.0/16')</literal></entry>
        <entry><literal>10.1/16</literal></entry>
       </row>
       <row>
	<entry><literal><function>broadcast</function>(<type>inet</type>)</literal></entry>
	<entry><type>inet</type></entry>
	<entry>adresse de broadcast pour le r�seau</entry>
	<entry><literal>broadcast('192.168.1.5/24')</literal></entry>
	<entry><literal>192.168.1.255/24</literal></entry>
       </row>
       <row>
        <entry><literal><function>family</function>(<type>inet</type>)</literal></entry>
        <entry><type>int</type></entry>
        <entry>extraction de la famille d'adresse&nbsp;; <literal>4</literal>
	 pour IPv4, <literal>6</literal> pour IPv6</entry>
        <entry><literal>family('::1')</literal></entry>
        <entry><literal>6</literal></entry>
       </row>
       <row>
	<entry><literal><function>host</function>(<type>inet</type>)</literal></entry>
	<entry><type>text</type></entry>
	<entry>extraction de l'adresse IP en texte</entry>
	<entry><literal>host('192.168.1.5/24')</literal></entry>
	<entry><literal>192.168.1.5</literal></entry>
       </row>
       <row>
        <entry><literal><function>hostmask</function>(<type>inet</type>)</literal></entry>
        <entry><type>inet</type></entry>
        <entry>construction du masque d'h�te pour le r�seau</entry>
        <entry><literal>hostmask('192.168.23.20/30')</literal></entry>
        <entry><literal>0.0.0.3</literal></entry>
       </row>
       <row>
	<entry><literal><function>masklen</function>(<type>inet</type>)</literal></entry>
	<entry><type>int</type></entry>
	<entry>extraction de la longueur du masque r�seau</entry>
	<entry><literal>masklen('192.168.1.5/24')</literal></entry>
	<entry><literal>24</literal></entry>
       </row>
       <row>
	<entry><literal><function>netmask</function>(<type>inet</type>)</literal></entry>
	<entry><type>inet</type></entry>
	<entry>construction du masque r�seau</entry>
	<entry><literal>netmask('192.168.1.5/24')</literal></entry>
	<entry><literal>255.255.255.0</literal></entry>
       </row>
       <row>
	<entry><literal><function>network</function>(<type>inet</type>)</literal></entry>
	<entry><type>cidr</type></entry>
	<entry>extraction de la partie r�seau de l'adresse</entry>
	<entry><literal>network('192.168.1.5/24')</literal></entry>
	<entry><literal>192.168.1.0/24</literal></entry>
       </row>
       <row>
        <entry><literal><function>set_masklen</function>(<type>inet</type>, <type>int</type>)</literal></entry>
        <entry><type>inet</type></entry>
        <entry>configure la longueur du masque r�seau pour les valeurs <type>inet</type></entry>
        <entry><literal>set_masklen('192.168.1.5/24', 16)</literal></entry>
        <entry><literal>192.168.1.5/16</literal></entry>
       </row>
       <row>
        <entry><literal><function>set_masklen</function>(<type>cidr</type>, <type>int</type>)</literal></entry>
        <entry><type>cidr</type></entry>
        <entry>configure la longueur du masque r�seau pour les valeurs <type>cidr</type></entry>
        <entry><literal>set_masklen('192.168.1.0/24'::cidr, 16)</literal></entry>
        <entry><literal>192.168.0.0/16</literal></entry>
       </row>
       <row>
	<entry><literal><function>text</function>(<type>inet</type>)</literal></entry>
	<entry><type>text</type></entry>
	<entry>extraction de l'adresse IP et de la longueur du masque
          r�seau comme texte</entry>
	<entry><literal>text(inet '192.168.1.5')</literal></entry>
	<entry><literal>192.168.1.5/32</literal></entry>
       </row>
      </tbody>
     </tgroup>
    </table>

  <para>
   Toute valeur <type>cidr</type> peut �tre convertie en <type>inet</type>
   implicitement ou explicitement&nbsp;; de ce fait, les fonctions indiqu�es
   ci-dessus comme op�rant sur le type <type>inet</type> op�rent aussi sur
   le type <type>cidr</type>. (Lorsque les fonctions sont s�par�es pour les types
   <type>inet</type> et <type>cidr</type>, c'est que leur comportement peut
   diff�rer.) Il est �galement permis de convertir une valeur
   <type>inet</type> en <type>cidr</type>. Dans ce cas, tout bit � la
   droite du masque r�seau est silencieusement positionn� � z�ro pour cr�er une
   valeur <type>cidr</type> valide. De plus, une valeur
   de type texte peut �tre transtyp�e en <type>inet</type> ou <type>cidr</type>
   � l'aide de la syntaxe habituelle de transtypage&nbsp;: par exemple
   <literal>inet(<replaceable>expression</replaceable>)</literal> ou
   <literal><replaceable>nom_colonne</replaceable>::cidr</literal>.
  </para>

  <para>
   Le <xref linkend="macaddr-functions-table"/> affiche les fonctions
   utilsables avec le type <type>macaddr</type>. La fonction
   <literal><function>trunc</function>(<type>macaddr</type>)</literal> renvoie
   une adresse MAC avec les trois derniers octets initialis�s � z�ro. Ceci peut
   �tre utilis� pour associer le pr�fixe restant � un manufacturier.
  </para>

    <table id="macaddr-functions-table">
     <title>Fonctions <type>macaddr</type></title>
     <tgroup cols="5">
      <thead>
       <row>
	<entry>Fonction</entry>
	<entry>Type de retour</entry>
	<entry>Description</entry>
	<entry>Exemple</entry>
	<entry>R�sultat</entry>
       </row>
      </thead>
      <tbody>
       <row>
	<entry><literal><function>trunc</function>(<type>macaddr</type>)</literal></entry>
	<entry><type>macaddr</type></entry>
	<entry>initialiser les trois octets finaux � z�ro</entry>
	<entry><literal>trunc(macaddr '12:34:56:78:90:ab')</literal></entry>
	<entry><literal>12:34:56:00:00:00</literal></entry>
       </row>
      </tbody>
     </tgroup>
    </table>

   <para>
    Le type <type>macaddr</type> supporte aussi les op�rateurs relationnels
    standards (<literal>&gt;</literal>, <literal>&lt;=</literal>, etc.) de tri lexicographique.
   </para>

  </sect1>

 <sect1 id="functions-sequence">
  <title>Fonctions de manipulation de s�quence</title>

  <indexterm>
   <primary>s�quence</primary>
  </indexterm>
  <indexterm>
   <primary>nextval</primary>
  </indexterm>
  <indexterm>
   <primary>currval</primary>
  </indexterm>
  <indexterm>
   <primary>lastval</primary>
  </indexterm>
  <indexterm>
   <primary>setval</primary>
  </indexterm>

  <para>
   Cette section d�crit les fonctions de <productname>PostgreSQL</productname>
   op�rant sur les <firstterm>objets de s�quence</firstterm>. Les objets de
   s�quence (aussi appel�s g�n�rateurs de s�quence ou simplement
   s�quences) sont des tables sp�ciales, mono-lignes, cr��es avec la commande
   <command>CREATE SEQUENCE</command>. Une s�quence est habituellement
   utilis�e pour engendrer des identifiants uniques de lignes d'une table. 
   Les fonctions de s�quence, list�es dans le <xref
   linkend="functions-sequence-table"/>, fournissent des m�thodes simples, et
   s�res en environnement multi-utilisateurs, d'obtention de valeurs successive de s�quence
   � partir d'objets s�quence.
  </para>

   <table id="functions-sequence-table">
    <title>Fonctions s�quence</title>
    <tgroup cols="3">
     <colspec colnum="1" colwidth="1.3*"/>
     <colspec colnum="2" colwidth="0.4*"/>
     <colspec colnum="3" colwidth="1.3*"/>
     <thead>
      <row>
        <entry>Fonction</entry>
        <entry>Type de retour</entry>
        <entry>Description</entry>
      </row>
     </thead>
     <tbody>
      <row>
	<entry><literal><function>currval</function>(<type>regclass</type>)</literal></entry>
	<entry><type>bigint</type></entry>
	<entry>Renvoie la valeur la plus r�cemment obtenue avec
        <function>nextval</function> pour la s�quence indiqu�e</entry>
      </row>
      <row>
	<entry><literal><function>nextval</function>(<type>regclass</type>)</literal></entry>
	<entry><type>bigint</type></entry>
	<entry>Incr�mente la s�quence et renvoie la nouvelle valeur</entry>
      </row>
      <row>
	<entry><literal><function>setval</function>(<type>regclass</type>,
<type>bigint</type>)</literal></entry>
	<entry><type>bigint</type></entry>
	<entry>Positionne la valeur courante de la s�quence</entry>
      </row>
      <row>
	<entry><literal><function>setval</function>(<type>regclass</type>,
<type>bigint</type>, <type>boolean</type>)</literal></entry>
	<entry><type>bigint</type></entry>
	<entry>Positionne la valeur courante de la s�quence et le drapeau
          <literal>is_called</literal></entry>
      </row>
     </tbody>
    </tgroup>
   </table>

  <para>
   La s�quence � traiter lors de l'appel � une fonction de traitement de s�quences est
   identifi�e par un argument <type>regclass</type>, qui n'est autre que l'OID de la
   s�quence dans le catalogue syst�me <structname>pg_class</structname>. Il
   n'est toutefois pas n�cessaire de se pr�occuper de la recherche de cet OID car
   le convertisseur de saisie du type de donn�es <type>regclass</type> s'en
   charge. Il suffit d'�crire le nom de la s�quence entre guillemets simples de
   fa�on � le faire ressembler � un libell�. Pour obtenir une
   compatibilit� avec la gestion des noms <acronym>SQL</acronym> ordinaires,
   la cha�ne est convertie en minuscules, sauf si le nom de la s�quence est
   entour� de guillemets doubles. Du coup,
<programlisting>nextval('foo')      <lineannotation>op�re sur la s�quence <literal>foo</literal></lineannotation>
nextval('FOO')      <lineannotation>op�re sur la s�quence <literal>foo</literal></lineannotation>
nextval('"Foo"')    <lineannotation>op�re sur la s�quence <literal>Foo</literal></lineannotation></programlisting>
   Le nom de la s�quence peut, au besoin, �tre qualifi� du nom du sch�ma&nbsp;:
<programlisting>nextval('mon_schema.foo')     <lineannotation>op�re sur <literal>mon_schema.foo</literal></lineannotation>
nextval('"mon_schema".foo')   <lineannotation>identique � ci-dessus</lineannotation>
nextval('foo')                <lineannotation>parcourt le chemin de recherche
pour trouver <literal>foo</literal></lineannotation></programlisting>
   Voir la <xref linkend="datatype-oid"/> pour plus d'informations sur
   <type>regclass</type>.
  </para>

  <note>
   <para>
    Avant la version 8.1 de <productname>PostgreSQL</productname>, les arguments des
    fonctions de triatement de s�quence �taient du type <type>text</type>, et non <type>regclass</type>.
    De ce fait, les conversions pr�c�demment d�crites d'une cha�ne de caract�res
    en valeur OID se produisaient � chaque appel. Pour des raisons de compatibilit�, 
    cette fonctionnalit� existe toujours. En revanche, en interne, un transtypage implicite
    est effectu� entre <type>text</type> et <type>regclass</type> avant l'appel de la fonction.
   </para>

   <para>
    Lorsque l'argument d'une fonction de traitement de s�quence est �crit comme une simple cha�ne
    de caract�res, il devient une constante de type <type>regclass</type>.
    Puisqu'il ne s'agit que d'un OID, il permet de suivre 
    la s�quence originelle m�me en cas de renommage, changement de sch�ma...
    Ce principe de <quote>lien fort</quote> est en g�n�ral souhaitable lors de 
    r�f�rences � la s�quence dans les vues et valeurs par d�faut de colonnes.
    Un <quote>lien faible</quote> est g�n�ralement souhait� lorsque la r�f�rence
    � la s�quence est r�solue � l'ex�cution. Ce comportement peut �tre obtenu en for�ant le 
    stockage des constantes sous la forme de constantes <type>text</type> plut�t
    que <type>regclass</type>&nbsp;:
<programlisting>nextval('foo'::text)      <lineannotation><literal>foo</literal> est recherch� � l'ex�cution</lineannotation></programlisting>
    Le lien faible est le seul comportement accesiible dans les versions de <productname>PostgreSQL</productname>
    ant�rieures � 8.1. Il peut donc �tre n�cessaire de le conserver pour maintenir la s�mantique d'anciennes
    applications.
   </para>

   <para>
    L'argument d'une fonction de traitement de s�quence peut �tre une expression ou une constante.
    S'il s'agit d'une expression textuelle, le transtypage implicite implique
    une recherche lors � l'ex�cution.
   <!-- run-time lookup -->
   </para>
  </note>

  <para>
   Les fonctions s�quence disponibles sont&nbsp;:

    <variablelist>
     <varlistentry>
      <term><function>nextval</function></term>
      <listitem>
       <para>
        Avance l'objet s�quence � sa prochaine valeur et renvoie cette valeur.
        Ce fonctionnement est atomique&nbsp;: m�me si de multiples sessions
        ex�cutent <function>nextval</function> concurrentiellement, chacune
	obtient sans risque une valeur de s�quence distincte.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><function>currval</function></term>
      <listitem>
       <para>
        Renvoie la valeur la plus r�cemment retourn�e par
        <function>nextval</function> pour cette s�quence dans la session
        courante. (Une erreur est rapport�e si <function>nextval</function> n'a
        jamais �t� appel�e pour cette s�quence dans cette session.) 
	Parce qu'elle renvoie une valeur locale � la session, la r�ponse est
	pr�visible<!-- predictable -->, que d'autres sessions aient ex�cut� ou non la
	fonction <function>nextval</function> apr�s la session en cours.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><function>lastval</function></term>
      <listitem>
       <para>
        Renvoie la valeur la plus r�cemment retourn�e par
        <function>nextval</function> dans la session courante. Cette fonction est
        identique � <function>currval</function>, sauf qu'au lieu de prendre le
	nom de la s�quence comme argument, elle r�cup�re la valeur de la derni�re
	s�quence utilis�e par <function>nextval</function> dans la session en
	cours. Si <function>nextval</function> n'a pas encore �t� appel�e dans la
	session en cours, un appel � <function>lastval</function> produit une
	erreur.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><function>setval</function></term>
      <listitem>
       <para>
        R�initialise la valeur du compteur de l'objet s�quence. La forme avec
        deux param�tres initialise le champ <literal>last_value</literal> de la
        s�quence � la valeur pr�cis�e et initialise le champ
        <literal>is_called</literal> � <literal>true</literal>, signifiant que
        le prochain <function>nextval</function> avancera la s�quence avant de
        renvoyer une valeur. Dans la forme � trois param�tres,
        <literal>is_called</literal> peut �tre initialis� �
        <literal>true</literal> ou � <literal>false</literal>. 
        Positionn� � <literal>false</literal>, le prochain
        <function>nextval</function> retourne exactement la valeur indiqu�e
        et l'incr�mentation de la s�quence commence avec le
        <function>nextval</function> suivant. Par exemple,

<screen>SELECT setval('foo', 42);           <lineannotation>Le <function>nextval</function> suivant retourne 43</lineannotation>
SELECT setval('foo', 42, true);     <lineannotation>Identique � ci-dessus</lineannotation>
SELECT setval('foo', 42, false);    <lineannotation>Le <function>nextval</function> suivant retourne 42</lineannotation></screen>

        Le r�sultat renvoy� par <function>setval</function> est la valeur
        du second argument.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
  </para>

  <para>
   Si un objet s�quence a �t� cr�� avec les param�tres par d�faut, les
   appels � <function>nextval</function> sur celui-ci renvoient des valeurs
   successives d�butant � 1. D'autres comportements peuvent �tre obtenus en
   utilisant des param�tres sp�ciaux de la commande <xref
   linkend="sql-createsequence" endterm="sql-createsequence-title"/>&nbsp;; voir
   la page de r�f�rence de la commande pour plus d'informations.
  </para>

  <important>
   <para>
    Pour �viter le blocage de transactions concurrentes qui obtiennent des
    nombres de la m�me s�quence, une op�ration <function>nextval</function>
    n'est jamais annul�e&nbsp;; c'est-�-dire qu'une fois la valeur
    r�cup�r�e, elle est consid�r�e utilis�e, m�me si la transaction qui ex�cuta
    le <function>nextval</function> avorte par la suite. Ceci signifie que les transactions
    annul�es pourraient laisser des <quote>trous</quote> inutilis�s dans la
    s�quence des valeurs assign�es. Les op�rations <function>setval</function>
    ne sont jamais annul�es non plus.
   </para>
  </important>

 </sect1>


 <sect1 id="functions-conditional">
  <title>Expressions conditionnelles</title>

  <indexterm>
   <primary>CASE</primary>
  </indexterm>

  <indexterm>
   <primary>expression conditionnelle</primary>
  </indexterm>

  <para>
   Cette section d�crit les expressions conditionnelles respectueuses du standard
   <acronym>SQL</acronym> disponibles avec <productname>PostgreSQL</productname>.
  </para>

  <tip>
   <para>
    S'il s'av�re n�cessaire d'aller au-del� des possibilit�s offertes par les expressions conditionnelles,
    il faut consid�rer l'�criture d'une proc�dure stock�e dans un langage de programmation plus
    expressif.
   </para>
  </tip>

  <sect2>
   <title><literal>CASE</literal></title>

  <para>
   L'expression <acronym>SQL</acronym> <token>CASE</token> est une expression
   conditionnelle g�n�rique, similaire aux instructions if/else des
   autres langages&nbsp;:

<synopsis>CASE WHEN <replaceable>condition</replaceable> THEN <replaceable>r�sultat</replaceable>
     <optional>WHEN ...</optional>
     <optional>ELSE <replaceable>r�sultat</replaceable></optional>
END</synopsis>

   Les clauses <token>CASE</token> peuvent �tre utilis�es partout o� une
   expression est valide. <replaceable>condition</replaceable> est une
   expression qui renvoie un r�sultat de type <type>boolean</type>. Si le
   r�sultat est vrai, alors la valeur de l'expression <token>CASE</token>
   est le <replaceable>r�sultat</replaceable> qui suit la condition. Si le
   r�sultat est faux, toutes les clauses <token>WHEN</token> suivantes sont
   parcourues de la m�me fa�on. Si aucune <replaceable>condition</replaceable>
   <token>WHEN</token> n'est vraie, alors la valeur de l'expression est le
   <replaceable>r�sultat</replaceable> de la clause <token>ELSE</token>. Si la
   clause <token>ELSE</token> est omise et qu'aucune condition ne correspond,
   alors le r�sultat est nul.
  </para>

   <para>
    Un exemple&nbsp;:
<screen>SELECT * FROM test;

 a
---
 1
 2
 3


SELECT a,
       CASE WHEN a=1 THEN 'un'
            WHEN a=2 THEN 'deux'
            ELSE 'autre'
       END
    FROM test;

 a | case
---+-------
 1 | un
 2 | deux
 3 | autre</screen>
   </para>

  <para>
   Les types de donn�es de toutes les expressions
   <replaceable>r�sultat</replaceable> doivent �tre convertibles dans un
   type de sortie unique. Voir la <xref linkend="typeconv-union-case"/> pour plus de
   d�tails.
  </para>

  <para>
   L'expression <token>CASE</token> <quote>simple</quote> qui suit est une
   variante sp�cialis�e de la forme g�n�rale ci-dessus&nbsp;:

<synopsis>CASE <replaceable>expression</replaceable>
    WHEN <replaceable>valeur</replaceable> THEN
    <replaceable>r�sultat</replaceable>
    <optional>WHEN ...</optional>
    <optional>ELSE <replaceable>r�sultat</replaceable></optional>
END</synopsis>

   L'<replaceable>expression</replaceable> est calcul�e et compar�e � toutes
   les sp�cifications de <replaceable>valeur</replaceable> des clauses
   <token>WHEN</token> jusqu'� en trouver une �gale. Si aucune ne correspond, le
   <replaceable>r�sultat</replaceable> de la clause
   <token>ELSE</token> (ou une valeur NULL) est renvoy�e. Ceci est similaire
   � l'instruction <function>switch</function> en C.
  </para>

   <para>
    L'exemple ci-dessus peut �tre r��crit en utilisant la syntaxe
    <token>CASE</token> simple&nbsp;:
<screen>SELECT a,
       CASE a WHEN 1 THEN 'un'
              WHEN 2 THEN 'deux'
              ELSE 'autre'
       END
    FROM test;

 a | case
---+-------
 1 | un
 2 | deux
 3 | autre</screen>
   </para>

   <para>
    Une expression <token>CASE</token> n'�value pas les sous-expressions qui
    ne sont pas n�cessaires pour d�terminer le r�sultat. Par exemple, une
    fa�on possible d'�viter une division par z�ro&nbsp;:
<programlisting>SELECT ... WHERE CASE WHEN x &lt;&gt; 0 THEN y/x &gt; 1.5 ELSE false END;</programlisting>
   </para>
  </sect2>

  <sect2>
   <title><literal>COALESCE</literal></title>

  <indexterm>
   <primary>COALESCE</primary>
  </indexterm>

  <indexterm>
   <primary>NVL</primary>
  </indexterm>

  <indexterm>
   <primary>IFNULL</primary>
  </indexterm>

<synopsis><function>COALESCE</function>(<replaceable>valeur</replaceable> <optional>, ...</optional>)</synopsis>

  <para>
   La fonction <function>COALESCE</function> renvoie le premier de ces
   arguments qui n'est pas nul. Une valeur NULL n'est renvoy�e que si tous
   les arguments sont nuls. Cette fonction est souvent utile pour substituer une
   valeur par d�faut aux valeurs NULL lorsque la donn�e est r�cup�r�e pour
   affichage. Par exemple&nbsp;:
<programlisting>SELECT COALESCE(description, description_courte, '(aucune)') ...</programlisting>
  </para>

   <para>
    � l'instar d'une expression <token>CASE</token>, <function>COALESCE</function>
    n'�value pas les arguments inutiles � la d�termination du
    r�sultat&nbsp;; c'est-�-dire que tous les arguments � la droite du premier
    argument non nul ne sont pas �valu�s. Cette fonction SQL standard fournit
    des fonctionnalit�s similaires � <function>NVL</function> et <function>IFNULL</function>,
    qui sont utilis�es dans d'autres syst�mes de bases de donn�es.
   </para>
  </sect2>

  <sect2>
   <title><literal>NULLIF</literal></title>

  <indexterm>
   <primary>NULLif</primary>
  </indexterm>

<synopsis><function>NULLIF</function>(<replaceable>valeur1</replaceable>, <replaceable>valeur2</replaceable>)</synopsis>

  <para>
   La fonction <function>NULLIF</function> renvoie une valeur NULL si
   <replaceable>valeur1</replaceable> et <replaceable>valeur2</replaceable>
   sont �gales&nbsp;; sinon, elle renvoie <replaceable>valeur1</replaceable>.
  </para>
  <para>
   On peut s'en servir pour effectuer l'op�ration inverse de l'exemple de
   <function>COALESCE</function> donn� ci-dessus&nbsp;:
<programlisting>SELECT NULLIF(valeur, '(aucune)') ...</programlisting>
  </para>
  <para>
   Si <replaceable>valeur1</replaceable> est <literal>(aucune)</literal>, renvoie une
   valeur NULL. Sinon, renvoie <replaceable>valeur1</replaceable>.
  </para>

  </sect2>

  <sect2>
   <title><literal>GREATEST</literal> et <literal>LEAST</literal></title>

  <indexterm>
   <primary>GREATEST</primary>
  </indexterm>
  <indexterm>
   <primary>LEAST</primary>
  </indexterm>

<synopsis><function>GREATEST</function>(<replaceable>valeur</replaceable> <optional>, ...</optional>)</synopsis>
<synopsis><function>LEAST</function>(<replaceable>valeur</replaceable> <optional>, ...</optional>)</synopsis>

   <para>
    Les fonctions <function>GREATEST</function> et <function>LEAST</function> s�lectionnent,
    respectivement, la valeur la plus grande et la valeur la plus petite
    d'une liste d'expressions. Elles doivent �tre
    toutes convertibles en un type de donn�es commun, type du
    r�sultat (voir la <xref linkend="typeconv-union-case"/> pour les d�tails).
    Les valeurs NULL contenues dans la liste sont ignor�es. Le r�sultat est
    NULL uniquement si toutes les expressions sont NULL.
   </para>

   <para>
    <function>GREATEST</function> et <function>LEAST</function> ne sont pas dans le
    standard SQL mais sont une extension habituelle.
   </para>
  </sect2>

 </sect1>


 <sect1 id="functions-array">
  <title>Fonctions et op�rateurs de tableaux</title>

  <para>
   Le <xref linkend="array-operators-table"/> pr�sente les op�rateurs disponibles
   pour les types <type>array</type>.
  </para>

    <table id="array-operators-table">
     <title>Op�rateurs <type>array</type></title>
     <tgroup cols="4">
      <colspec colnum="1" colwidth="0.5*"/>
      <colspec colnum="2" colwidth="0.5*"/>
      <colspec colnum="3" colwidth="1.5*"/>
      <colspec colnum="3" colwidth="1.5*"/>
      <thead>
       <row>
	<entry>Op�rateur</entry>
	<entry>Description</entry>
	<entry>Exemple</entry>
	<entry>R�sultat</entry>
       </row>
      </thead>
      <tbody>
       <row>
	<entry><literal>=</literal> </entry>
	<entry>�gal �</entry>
	<entry><literal>ARRAY[1.1,2.1,3.1]::int[] = ARRAY[1,2,3]</literal></entry>
	<entry><literal>t</literal></entry>
       </row>

       <row>
	<entry><literal>&lt;&gt;</literal> </entry>
	<entry>diff�rent de</entry>
	<entry><literal>ARRAY[1,2,3] &lt;&gt; ARRAY[1,2,4]</literal></entry>
	<entry><literal>t</literal></entry>
       </row>

       <row>
	<entry><literal>&lt;</literal> </entry>
	<entry>inf�rieur �</entry>
	<entry><literal>ARRAY[1,2,3] &lt; ARRAY[1,2,4]</literal></entry>
	<entry><literal>t</literal></entry>
       </row>

       <row>
	<entry><literal>&gt;</literal> </entry>
	<entry>sup�rieur �</entry>
	<entry><literal>ARRAY[1,4,3] &gt; ARRAY[1,2,4]</literal></entry>
	<entry><literal>t</literal></entry>
       </row>

       <row>
	<entry><literal>&lt;=</literal> </entry>
	<entry>inf�rieur ou �gal �</entry>
	<entry><literal>ARRAY[1,2,3] &lt;= ARRAY[1,2,3]</literal></entry>
	<entry><literal>t</literal></entry>
       </row>

       <row>
	<entry><literal>&gt;=</literal> </entry>
	<entry>sup�rieur ou �gal �</entry>
	<entry><literal>ARRAY[1,4,3] &gt;= ARRAY[1,4,3]</literal></entry>
	<entry><literal>t</literal></entry>
       </row>

       <row>
        <entry> <literal>@&gt;</literal> </entry>
        <entry>contient</entry>
        <entry><literal>ARRAY[1,4,3] @&gt; ARRAY[3,1]</literal></entry>
        <entry><literal>t</literal></entry>
       </row>

       <row>
        <entry> <literal>&lt;@</literal> </entry>
        <entry>est contenu par</entry>
        <entry><literal>ARRAY[2,7] &lt;@ ARRAY[1,7,4,2,6]</literal></entry>
        <entry><literal>t</literal></entry>
       </row>

<!-- overlap ? Superposition, chevauchement, croisement, intersection ?-->
       <row>
        <entry> <literal>&amp;&amp;</literal> </entry>
        <entry>se chevauchent (ont des �l�ments en commun)</entry>
        <entry><literal>ARRAY[1,4,3] &amp;&amp; ARRAY[2,1]</literal></entry>
        <entry><literal>t</literal></entry>
       </row>

       <row>
	<entry><literal>||</literal> </entry>
	<entry>concat�nation de tableaux</entry>
	<entry><literal>ARRAY[1,2,3] || ARRAY[4,5,6]</literal></entry>
	<entry><literal>{1,2,3,4,5,6}</literal></entry>
       </row>

       <row>
	<entry><literal>||</literal> </entry>
	<entry>concat�nation de tableaux</entry>
	<entry><literal>ARRAY[1,2,3] || ARRAY[[4,5,6],[7,8,9]]</literal></entry>
	<entry><literal>{{1,2,3},{4,5,6},{7,8,9}}</literal></entry>
       </row>

       <row>
	<entry><literal>||</literal> </entry>
	<entry>concat�nation d'un �l�ment avec un tableau</entry>
	<entry><literal>3 || ARRAY[4,5,6]</literal></entry>
	<entry><literal>{3,4,5,6}</literal></entry>
       </row>

       <row>
	<entry><literal>||</literal> </entry>
	<entry>concat�nation d'un tableau avec un �l�ment</entry>
	<entry><literal>ARRAY[4,5,6] || 7</literal></entry>
	<entry><literal>{4,5,6,7}</literal></entry>
       </row>
      </tbody>
     </tgroup>
    </table>

<!-- row-major doit-il �tre conserv�, sans traduction ? -->
  <para>
   Les comparaisons comparent les contenus des tableaux �l�ment par
   �l�ment, en utilisant la fonction de comparaison par d�faut du B-Tree pour
   le type de donn�es de l'�l�ment. Dans les tableaux multi-dimensionnels,
   les �l�ments sont visit�s dans l'ordre <quote>row-major</quote>
   (le dernier indice varie le plus rapidement).
   Si le contenu de deux tableaux est identique mais que les dimensions sont
   diff�rentes, la premi�re diff�rence dans l'information de dimension
   d�termine l'ordre de tri. (Ce fonctionnement diff�re de celui des versions de
   <productname>PostgreSQL</productname> ant�rieures � la 8.2&nbsp;: les
   anciennes versions indiquent que deux tableaux de m�me contenu sont
   identiques m�me si le nombre de dimensions ou les �chelles d'indices
   diff�rent.)
  </para>

  <para>
   Voir la <xref linkend="arrays"/> pour plus de d�tails sur le comportement des
   op�rateurs.
  </para>

  <para>
   Le <xref linkend="array-functions-table"/> pr�sente les fonctions utilisables 
   avec des types tableaux. Voir la <xref
   linkend="arrays"/> pour plus d'informations et des exemples d'utilisation de ces
   fonctions.
  </para>

    <table id="array-functions-table">
     <title>Fonctions sur <type>array</type></title>
     <tgroup cols="5">
      <thead>
       <row>
	<entry>Fonction</entry>
	<entry>Type de retour</entry>
	<entry>Description</entry>
	<entry>Exemple</entry>
	<entry>R�sultat</entry>
       </row>
      </thead>
      <tbody>
       <row>
	<entry>
     <literal>
      <function>array_append</function>
      (<type>anyarray</type>, <type>anyelement</type>)
     </literal>
    </entry>
	<entry><type>anyarray</type></entry>
	<entry>ajoute un �l�ment � la fin d'un tableau</entry>
	<entry><literal>array_append(ARRAY[1,2], 3)</literal></entry>
	<entry><literal>{1,2,3}</literal></entry>
       </row>
       <row>
	<entry>
     <literal>
      <function>array_cat</function>
      (<type>anyarray</type>, <type>anyarray</type>)
     </literal>
    </entry>
	<entry><type>anyarray</type></entry>
	<entry>concat�ne deux tableaux</entry>
	<entry><literal>array_cat(ARRAY[1,2,3], ARRAY[4,5])</literal></entry>
	<entry><literal>{1,2,3,4,5}</literal></entry>
       </row>
       <row>
	<entry>
     <literal>
      <function>array_dims</function> (<type>anyarray</type>)
     </literal>
    </entry>
	<entry><type>text</type></entry>
	<entry>renvoie une repr�sentation textuelle des dimensions d'un
	  tableau</entry>
	<entry><literal>array_dims(array[[1,2,3], [4,5,6]])</literal></entry>
	<entry><literal>[1:2][1:3]</literal></entry>
       </row>
       <row>
	<entry>
     <literal>
      <function>array_lower</function> (<type>anyarray</type>, <type>int</type>)
     </literal>
    </entry>
	<entry><type>int</type></entry>
	<entry>renvoie la limite inf�rieure du tableau donn�</entry>
	<entry><literal>array_lower('[0:2]={1,2,3}'::int[], 1)</literal></entry>
	<entry><literal>0</literal></entry>
       </row>
       <row>
	<entry>
     <literal>
      <function>array_prepend</function>
      (<type>anyelement</type>, <type>anyarray</type>)
     </literal>
    </entry>
	<entry><type>anyarray</type></entry>
	<entry>ajoute un �l�ment au d�but d'un tableau</entry>
	<entry><literal>array_prepend(1, ARRAY[2,3])</literal></entry>
	<entry><literal>{1,2,3}</literal></entry>
       </row>
       <row>
	<entry>
     <literal>
      <function>array_to_string</function> (<type>anyarray</type>, <type>text</type>)
     </literal>
    </entry>
	<entry><type>text</type></entry>
	<entry>concat�ne des �l�ments de tableau en utilisant le d�limiteur
         fourni</entry>
	<entry><literal>array_to_string(array[1, 2, 3], '~^~')</literal></entry>
	<entry><literal>1~^~2~^~3</literal></entry>
       </row>
       <row>
	<entry>
     <literal>
      <function>array_upper</function> (<type>anyarray</type>, <type>int</type>)
     </literal>
    </entry>
	<entry><type>int</type></entry>
	<entry>renvoie la limite sup�rieure du tableau donn�</entry>
	<entry><literal>array_upper(ARRAY[1,2,3,4], 1)</literal></entry>
	<entry><literal>4</literal></entry>
       </row>
       <row>
	<entry>
     <literal>
      <function>string_to_array</function>
      (<type>text</type>, <type>text</type>)
     </literal>
    </entry>
	<entry><type>text[]</type></entry>
	<entry>divise une cha�ne en tableau d'�l�ments en utilisant le d�limiteur
         fourni</entry>
	<entry><literal>string_to_array( 'xx~^~yy~^~zz',
'~^~')</literal></entry>
	<entry><literal>{xx,yy,zz}</literal></entry>
       </row>
      </tbody>
     </tgroup>
    </table>
  </sect1>

 <sect1 id="functions-aggregate">
  <title>Fonctions d'agr�gat</title>

  <indexterm zone="functions-aggregate">
   <primary>fonction d'agr�gat</primary>
   <secondary>int�gr�e</secondary>
  </indexterm>

  <para>
   Les <firstterm>fonctions d'agr�gat</firstterm> calculent une
   valeur unique � partir d'un ensemble de valeurs en entr�e. Les fonctions d'agr�gats
   int�gr�es sont list�es dans <xref linkend="functions-aggregate-table"/> et
   <xref linkend="functions-aggregate-statistics-table"/>. La syntaxe
   particuli�re des fonctions d'agr�gat est d�crite dans la
   <xref linkend="syntax-aggregates"/>.
   La <xref linkend="tutorial-agg"/> fournit un suppl�ment d'informations
   introductives.
  </para>

<!-- Fonctions d'agr�gat tout-terrain -->
<!-- Fonctions d'agr�gat multi-usage -->
  <table id="functions-aggregate-table">
   <title>Fonctions d'agr�gat � but g�n�ral</title>

   <tgroup cols="4">
    <thead>
     <row>
      <entry>Fonction</entry>
      <entry>Type d'argument</entry>
      <entry>Type de retour</entry>
      <entry>Description</entry>
     </row>
    </thead>

    <tbody>
     <row>
      <entry>
       <indexterm>
        <primary>average</primary>
       </indexterm>
       <function>avg(<replaceable class="parameter">expression</replaceable>)</function>
      </entry>
      <entry>
       <type>smallint</type>, <type>int</type>,
       <type>bigint</type>, <type>real</type>, 
       <type>double precision</type>, <type>numeric</type> ou <type>interval</type>
      </entry>
      <entry>
       <type>numeric</type> pour tout argument de type entier,
       <type>double precision</type> pour tout argument en virgule flottante,
       sinon identique au type de donn�es de l'argument
      </entry>
      <entry>la moyenne arithm�tique de toutes les valeurs en
       entr�e</entry>
     </row>

     <row>
       <entry>
         <indexterm>
           <primary>bit_and</primary>
         </indexterm>
         <function>bit_and(<replaceable class="parameter">expression</replaceable>)</function>
       </entry>
       <entry>
         <type>smallint</type>, <type>int</type>, <type>bigint</type> ou
         <type>bit</type>
       </entry>
       <entry>
         identique au type de donn�es de l'argument
       </entry>
       <entry>le AND bit � bit de toutes les valeurs non NULL en entr�e ou
         NULL s'il n'y en a pas</entry>
     </row>
     
     <row>
       <entry>
         <indexterm>
           <primary>bit_or</primary>
         </indexterm>
         <function>bit_or(<replaceable class="parameter">expression</replaceable>)</function>
       </entry>
       <entry>
         <type>smallint</type>, <type>int</type>, <type>bigint</type> ou
         <type>bit</type>
       </entry>
       <entry>
         identique au type de donn�es de l'argument
       </entry>
       <entry>le OR bit � bit de toutes les valeurs non NULL en entr�e ou
         NULL s'il n'y en a pas</entry>
     </row>
     
     <row>
       <entry>
         <indexterm>
           <primary>bool_and</primary>
         </indexterm>
         <function>bool_and(<replaceable class="parameter">expression</replaceable>)</function>
       </entry>
       <entry>
         <type>bool</type>
       </entry>
       <entry>
         <type>bool</type>
       </entry>
       <entry>true si toutes les valeurs en entr�e valent true, false sinon</entry>
     </row>
     
     <row>
       <entry>
         <indexterm>
           <primary>bool_or</primary>
         </indexterm>
         <function>bool_or(<replaceable class="parameter">expression</replaceable>)</function>
       </entry>
       <entry>
         <type>bool</type>
       </entry>
       <entry>
         <type>bool</type>
       </entry>
       <entry>true si au moins une valeur en entr�e vaut true, false sinon</entry>
     </row>
     
     <row>
      <entry><function>count(*)</function></entry>
      <entry></entry>
      <entry><type>bigint</type></entry>
      <entry>nombre de lignes en entr�e</entry>
     </row>

     <row>
      <entry><function>count(<replaceable class="parameter">expression</replaceable>)</function></entry>
      <entry>tout type</entry>
      <entry><type>bigint</type></entry>
      <entry>
       nombre de lignes en entr�e pour lesquelles
       l'<replaceable class="parameter">expression</replaceable> n'est pas NULL
      </entry>
     </row>

     <row>
      <entry><indexterm><primary>every</primary></indexterm>
       <function>every(<replaceable class="parameter">expression</replaceable>)</function>
      </entry>
      <entry><type>bool</type></entry>
      <entry><type>bool</type></entry>
      <entry>�quivalent � <function>bool_and</function></entry>
     </row>

     <row>
      <entry><function>max(<replaceable class="parameter">expression</replaceable>)</function></entry>
      <entry>tout type <type>array</type>, <type>numeric</type>,
      <type>string</type> ou <type>date</type>/<type>time</type></entry>
      <entry>identique au type en argument</entry>
      <entry>
       valeur maximale de l'<replaceable class="parameter">expression</replaceable> pour toutes les valeurs en
       entr�e
      </entry>
     </row>

     <row>
      <entry><function>min(<replaceable class="parameter">expression</replaceable>)</function></entry>
      <entry>tout type <type>array</type>, <type>numeric</type>, <type>string</type> ou
      <type>date</type>/<type>time</type></entry>
      <entry>identique au type en argument</entry>
      <entry>
       valeur minimale de l'<replaceable class="parameter">expression</replaceable> pour toutes les valeurs en
       entr�e
      </entry>
     </row>

     <row>
      <entry><function>sum(<replaceable class="parameter">expression</replaceable>)</function></entry>
      <entry>
       <type>smallint</type>, <type>int</type>,
       <type>bigint</type>, <type>real</type>, <type>double precision</type>, <type>numeric</type> ou
       <type>interval</type>
      </entry>
      <entry>
       <type>bigint</type> pour les arguments de type <type>smallint</type> ou
       <type>int</type>, <type>numeric</type> pour les arguments de type
       <type>bigint</type>, <type>double precision</type>
       pour les arguments en virgule flottante, sinon identique au type de
       donn�es de l'argument
      </entry>
      <entry>somme de l'<replaceable class="parameter">expression</replaceable>
       pour toutes les valeurs en entr�e</entry>
     </row>

    </tbody>
   </tgroup>
  </table>

  <para>
   En dehors de <function>count</function>, ces
   fonctions renvoient une valeur NULL si aucune ligne n'est s�lectionn�e. En
   particulier, une somme (<function>sum</function>) sur aucune ligne renvoie
   NULL et non z�ro. La fonction <function>coalesce</function> peut
   �tre utilis�e pour substituer des z�ros aux valeurs NULL quand cela est
   n�cessaire.
  </para>

  <note>
  <indexterm>
  <primary>ANY</primary>
  </indexterm>
  <indexterm>
  <primary>SOME</primary>
  </indexterm>
   <para>
    Les agr�gats bool�ens <function>bool_and</function> et
    <function>bool_or</function> correspondent aux agr�gats standard du SQL
    <function>every</function> et <function>any</function> ou
    <function>some</function>. 
    Pour <function>any</function> et <function>some</function>, il
    semble qu'il y a une ambigu�t� dans la syntaxe standard&nbsp;:
<programlisting>SELECT b1 = ANY((SELECT b2 FROM t2 ...)) FROM t1 ...;</programlisting>
    Ici, <function>ANY</function> peut �tre consid�r� � la fois comme une
    sous-requ�te ou comme un agr�gat si l'expression de s�lection ne renvoie
    qu'une ligne. Du coup, le nom standard ne peut �tre donn� � ces
    agr�gats.
   </para>
  </note>

  <note>
   <para>
    Les utilisateurs habitu�s � travailler avec d'autres syst�mes de gestion de
    bases de donn�es SQL peuvent �tre surpris par les performances de
    l'agr�gat <function>count</function> lorsqu'il est appliqu� � la
    table enti�re. En particulier, une requ�te identique �
<programlisting>SELECT count(*) FROM ma_table;</programlisting>
    est ex�cut� par <productname>PostgreSQL</productname> � l'aide d'un
    parcours s�quentiel de la table enti�re.
   </para>
  </note>

  <para>
   <xref linkend="functions-aggregate-statistics-table"/> pr�sente les fonctions
   d'agr�gat typiquement utilis�es dans l'analyse statistique.
   (Elles sont s�par�es pour �viter de grossir la liste des agr�gats les plus
   utilis�s.) L� o� la description mentionne
   <replaceable class="parameter">N</replaceable>, cela repr�sente le nombre
   de lignes en entr�e pour lesquelles toutes les expressions en entr�e sont
   non NULL. Dans tous les cas, NULL est renvoy� si le calcul n'a pas de
   signification, par exemple si <replaceable class="parameter">N</replaceable>
   vaut z�ro.
  </para>

  <indexterm>
   <primary>statistiques</primary>
  </indexterm>
  <indexterm>
   <primary>r�gression lin�aire</primary>
  </indexterm>

  <table id="functions-aggregate-statistics-table">
   <title>Fonctions d'agr�gats pour les statistiques</title>

   <tgroup cols="4">
    <thead>
     <row>
      <entry>Fonction</entry>
      <entry>Type de l'argument</entry>
      <entry>Type renvoy�</entry>
      <entry>Description</entry>
     </row>
    </thead>

    <tbody>

     <row>
      <entry>
       <indexterm>
        <primary>corr�lation</primary>
       </indexterm>
       <function>corr(<replaceable class="parameter">Y</replaceable>, <replaceable class="parameter">X</replaceable>)</function>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry>coefficient de corr�lation</entry>
     </row>

     <row>
      <entry>
       <indexterm>
        <primary>covariance</primary>
        <secondary>population</secondary>
       </indexterm>
       <function>covar_pop(<replaceable class="parameter">Y</replaceable>, <replaceable class="parameter">X</replaceable>)</function>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry>covariance de population</entry>
     </row>
<!-- Ne parle-t-on pas plut�t de covariance d'�chantillon ? -->
     <row>
      <entry>
       <indexterm>
        <primary>covariance</primary>
        <secondary>exemple</secondary>
       </indexterm>
       <function>covar_samp(<replaceable class="parameter">Y</replaceable>, <replaceable class="parameter">X</replaceable>)</function>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry>covariance exemple</entry>
     </row>

     <row>
      <entry>
       <function>regr_avgx(<replaceable class="parameter">Y</replaceable>, <replaceable class="parameter">X</replaceable>)</function>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry>moyenne de la variable ind�pendante
      (<literal>sum(<replaceable class="parameter">X</replaceable>)/<replaceable class="parameter">N</replaceable></literal>)</entry>
     </row>

     <row>
      <entry>
       <function>regr_avgy(<replaceable class="parameter">Y</replaceable>, <replaceable class="parameter">X</replaceable>)</function>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry>moyenne de la variable d�pendante
      (sum(<replaceable class="parameter">Y</replaceable>) /
      <replaceable class="parameter">N</replaceable>)</entry>
     </row>

     <row>
      <entry>
       <function>regr_count(<replaceable class="parameter">Y</replaceable>, <replaceable class="parameter">X</replaceable>)</function>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry>
       <type>bigint</type>
      </entry>
      <entry>nombre de lignes dans lesquelles les deux expressions sont non NULL</entry>
     </row>
<!-- Je doute de la traduction de y-intercept of the least-squares-fit linear
equation determined by the (X, Y) pairs, mais je n'ai pas de traduction plus
absconse � fournir... -->
<!-- A vrai dire, je manque du vocabulaire statistique n�cessaire � une
relecture efficace de cette partie -->
     <row>
      <entry>
       <indexterm>
        <primary>regression intercept</primary>
       </indexterm>
       <function>regr_intercept(<replaceable class="parameter">Y</replaceable>, <replaceable class="parameter">X</replaceable>)</function>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry>interception de l'axe y pour l'�quation lin�aire de la m�thode
      des moindres carr�s d�termin�e par les paires (<replaceable
      class="parameter">X</replaceable>, <replaceable
      class="parameter">Y</replaceable>)</entry>
     </row>

     <row>
      <entry>
       <function>regr_r2(<replaceable class="parameter">Y</replaceable>, <replaceable class="parameter">X</replaceable>)</function>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry>carr� du coefficient de corr�lation</entry>
     </row>

     <row>
      <entry>
       <indexterm>
        <primary>regression slope</primary>
       </indexterm>
       <function>regr_slope(<replaceable class="parameter">Y</replaceable>, <replaceable class="parameter">X</replaceable>)</function>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry>inclinaison pour l'�quation lin�aire de la m�thode des moindres
      carr�s d�termin�e par les paires (<replaceable class="parameter">X</replaceable>,
      <replaceable class="parameter">Y</replaceable>)</entry>
     </row>

     <row>
      <entry>
       <function>regr_sxx(<replaceable class="parameter">Y</replaceable>, <replaceable class="parameter">X</replaceable>)</function>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry><literal>sum(<replaceable class="parameter">X</replaceable>^2) - 
       sum(<replaceable class="parameter">X</replaceable>)^2 / 
           <replaceable class="parameter">N</replaceable></literal>
          (<quote>somme des carr�s</quote> de la variable ind�pendante)</entry>
     </row>

     <row>
      <entry>
       <function>regr_sxy(<replaceable class="parameter">Y</replaceable>, <replaceable class="parameter">X</replaceable>)</function>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry><literal>sum(<replaceable class="parameter">X</replaceable>*<replaceable class="parameter">Y</replaceable>) -
                      sum(<replaceable class="parameter">X</replaceable>) * 
		      sum(<replaceable class="parameter">Y</replaceable>) /
		      <replaceable class="parameter">N</replaceable></literal> 
		      (<quote>somme des produits</quote> des ind�peendantes
		      multipli�e par la variable d�pendante)</entry>
     </row>

     <row>
      <entry>
       <function>regr_syy(<replaceable class="parameter">Y</replaceable>, <replaceable class="parameter">X</replaceable>)</function>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry>
       <type>double precision</type>
      </entry>
      <entry><literal>sum(<replaceable class="parameter">Y</replaceable>^2) -
                      sum(<replaceable class="parameter">Y</replaceable>)^2 / 
		      <replaceable class="parameter">N</replaceable></literal>
		      (<quote>somme des carr�s</quote> de la variable d�pendante)</entry>
     </row>

     <row>
      <entry>
       <indexterm>
        <primary>standard deviation</primary>
       </indexterm>
       <function>stddev(<replaceable class="parameter">expression</replaceable>)</function>
      </entry>
      <entry>
       <type>smallint</type>, <type>int</type>,
       <type>bigint</type>, <type>real</type>, <type>double
       precision</type> ou <type>numeric</type>
      </entry>
      <entry>
       <type>double precision</type> pour les arguments en virgule flottante,
       <type>numeric</type> sinon
      </entry>
      <entry>alias historique pour <function>stddev_samp</function></entry>
     </row>

     <row>
      <entry>
       <indexterm>
        <primary>standard deviation</primary>
        <secondary>population</secondary>
       </indexterm>
       <function>stddev_pop(<replaceable class="parameter">expression</replaceable>)</function>
      </entry>
      <entry>
       <type>smallint</type>, <type>int</type>,
       <type>bigint</type>, <type>real</type>, <type>double
       precision</type> ou <type>numeric</type>
      </entry>
      <entry>
       <type>double precision</type> pour les arguments en virgule flottante,
       <type>numeric</type> sinon
      </entry>
      <entry>d�viation standard de la population pour les valeurs en entr�e</entry>
     </row>

<!-- l� encore, il s'agit peut-�tre plut�t d'un �chantillon -->
     <row>
      <entry>
       <indexterm>
        <primary>standard deviation</primary>
        <secondary>sample</secondary>
       </indexterm>
       <function>stddev_samp(<replaceable class="parameter">expression</replaceable>)</function>
      </entry>
      <entry>
       <type>smallint</type>, <type>int</type>,
       <type>bigint</type>, <type>real</type>, <type>double
       precision</type> ou <type>numeric</type>
      </entry>
      <entry>
       <type>double precision</type> pour les arguments en virgule flottante,
       <type>numeric</type> sinon
      </entry>
      <entry>exemple de d�viation standard pour les valeurs en entr�e</entry>
     </row>

     <row>
      <entry>
       <indexterm>
        <primary>variance</primary>
       </indexterm>
       <function>variance</function>(<replaceable class="parameter">expression</replaceable>)
      </entry>
      <entry>
       <type>smallint</type>, <type>int</type>,
       <type>bigint</type>, <type>real</type>, <type>double
       precision</type> ou <type>numeric</type>
      </entry>
      <entry>
       <type>double precision</type> pour les arguments en virgule flottante,
       <type>numeric</type> sinon
      </entry>
      <entry>alias historique de <function>var_samp</function></entry>
     </row>

     <row>
      <entry>
       <indexterm>
        <primary>variance</primary>
        <secondary>population</secondary>
       </indexterm>
       <function>var_pop</function>(<replaceable class="parameter">expression</replaceable>)
      </entry>
      <entry>
       <type>smallint</type>, <type>int</type>,
       <type>bigint</type>, <type>real</type>, <type>double
       precision</type> ou <type>numeric</type>
      </entry>
      <entry>
       <type>double precision</type> pour les arguments en virgule flottante,
       <type>numeric</type> sinon
      </entry>
      <entry>variance de la population pour les valeurs en entr�e (carr� de la
       d�viation standard de la population)</entry>
     </row>

<!-- Echantillon, toujours ? -->
     <row>
      <entry>
       <indexterm>
        <primary>variance</primary>
        <secondary>sample</secondary>
       </indexterm>
       <function>var_samp</function>(<replaceable class="parameter">expression</replaceable>)
      </entry>
      <entry>
       <type>smallint</type>, <type>int</type>,
       <type>bigint</type>, <type>real</type>, <type>double
       precision</type> ou <type>numeric</type>
      </entry>
      <entry>
       <type>double precision</type> pour les arguments en virgule flottante,
       <type>numeric</type> sinon
      </entry>
      <entry>exemple de la variance des valeurs en entr�e (carr� de la
       d�viation standard)</entry>
     </row>
    </tbody>
   </tgroup>
  </table>

 </sect1>


 <sect1 id="functions-subquery">
  <title>Expressions de sous-requ�tes</title>

  <indexterm>
   <primary>EXISTS</primary>
  </indexterm>

  <indexterm>
   <primary>IN</primary>
  </indexterm>

  <indexterm>
   <primary>NOT IN</primary>
  </indexterm>

  <indexterm>
   <primary>ANY</primary>
  </indexterm>

  <indexterm>
   <primary>ALL</primary>
  </indexterm>

  <indexterm>
   <primary>SOME</primary>
  </indexterm>

  <indexterm>
   <primary>sous-requ�te</primary>
  </indexterm>

  <para>
   Cette section d�crit les expressions de sous-requ�tes compatibles
   <acronym>SQL</acronym> disponibles sous
   <productname>PostgreSQL</productname>. Toutes les formes d'expressions
   document�es dans cette section renvoient des r�sultats bool�ens (true/false).
  </para>

  <sect2>
   <title><literal>EXISTS</literal></title>

<synopsis>EXISTS ( <replaceable>sous-requ�te</replaceable> )</synopsis>

  <para>
   L'argument d'<token>EXISTS</token> est une instruction <command>SELECT</command>
   arbitraire ou une <firstterm>sous-requ�te</firstterm>. La sous-requ�te est
   �valu�e pour d�terminer si elle renvoie des lignes. Si elle en renvoie au
   moins une, le r�sultat d'<token>EXISTS</token> est vrai
   (<quote>true</quote>)&nbsp;; si elle n'en renvoie aucune, le r�sultat
   d'<token>EXISTS</token> est faux (<quote>false</quote>).
  </para>

  <para>
   La sous-requ�te peut faire r�f�rence � des variables de la requ�te
   englobante qui agiront comme des constantes � chaque �valuation de la
   sous-requ�te.
  </para>

  <para>
   La sous-requ�te n'est habituellement pas ex�cut�e plus qu'il n'est
   n�cessaire pour d�terminer si au moins une ligne est 
   renvoy�e. Elle n'est donc pas forc�ment ex�cut�e dans son int�gralit�. Il
   est de ce fait fortement d�conseill� d'�crire
   une sous-requ�te qui pr�sente des effets de bord (tels que l'appel de fonctions de
   s�quence)&nbsp;; il est extr�mement difficile de pr�dire si celui-ci va
   intervenir.
  </para>

  <para>
   Puisque le r�sultat ne d�pend que d'un �ventuel retour de lignes, et pas de
   leur contenu, la liste des champs retourn�s par la sous-requ�te n'a normalement aucun int�r�t.
   Une convention de codage habituelle consiste � �crire tous les tests <literal>EXISTS</literal> sous la forme
   <literal>EXISTS(SELECT 1 WHERE ...)</literal>. Il y a toutefois des
   exceptions � cette r�gle, comme les sous-requ�tes
   utilisant <token>INTERSECT</token>.
  </para>

  <para>
   L'exemple suivant, simpliste, ressemble � une jointure interne sur <literal>col2</literal>
   mais il sort au plus une ligne pour chaque ligne de
   <literal>tab1</literal>, m�me s'il y a plusieurs correspondances dans les lignes de
   <literal>tab2</literal>&nbsp;:
<screen>SELECT col1 FROM tab1
    WHERE EXISTS(SELECT 1 FROM tab2 WHERE col2 = tab1.col2);</screen>
  </para>
  </sect2>

  <sect2>
   <title><literal>IN</literal></title>

<synopsis><replaceable>expression</replaceable> IN (<replaceable>sous-requ�te</replaceable>)</synopsis>

  <para>
   Le c�t� droit est une sous-expression entre parenth�ses qui ne peut
   retourner qu'une seule colonne. L'expression de gauche est �valu�e et compar�e � chaque ligne du
   r�sultat de la sous-requ�te. Le r�sultat de <token>IN</token> est vrai
   (<quote>true</quote>) si une ligne �quivalente de la sous-requ�te est trouv�e. Le
   r�sultat est faux (<quote>false</quote>) si aucune ligne correspondante n'est
   trouv�e (ce qui inclut le cas sp�cial de la sous-requ�te ne retournant aucune
   ligne).
  </para>

  <para>
   Si l'expression de gauche est NULL ou s'il n'existe pas de
   correspondance avec les valeurs du c�t� droit et qu'au moins une ligne du
   c�t� droit est NULL, le r�sultat de la construction <token>IN</token> est
   NULL, et non faux. Ceci est en accord avec les r�gles normales du SQL pour
   les combinaisons bool�ennes de valeurs NULL.
  </para>

  <para>
   Comme avec <token>EXISTS</token>, on ne peut pas assumer que la
   sous-requ�te est �valu�e compl�tement.
  </para>

  <synopsis><replaceable>constructeur_ligne</replaceable> IN (<replaceable>sous-requ�te</replaceable>)</synopsis>

  <para>
   Le c�t� gauche de cette forme de <token>IN</token> est un constructeur de ligne
   comme d�crit dans la <xref linkend="sql-syntax-row-constructors"/>.
   Le c�t� droit est une sous-requ�te entre
   parenth�ses qui doit renvoyer exactement autant de colonnes qu'il y a
   d'expressions dans le c�t� gauche. Les expressions c�t� gauche sont �valu�es
   et compar�es ligne � ligne au r�sultat de la sous-requ�te. Le r�sultat de
   <token>IN</token> est vrai (<quote>true</quote>) si une ligne �quivalente
   de la sous-requ�te est trouv�e. Le r�sultat est faux (<quote>false</quote>) si
   aucune ligne correspondante n'est trouv�e (ce qui inclut le cas sp�cial de
   la sous-requ�te ne retournant aucune ligne).
  </para>

<!-- NULL, nul... -->
  <para>
   Comme d'habitude, les valeurs NULL dans les lignes sont combin�es suivant
   les r�gles habituelles des expressions bool�ennes SQL. Deux lignes sont
   consid�r�es �gales si tous leurs membres correspondant sont non nuls et �gaux&nbsp;;
   les lignes diff�rent si le contenu de leurs membres sont non nuls et
   diff�rents&nbsp;; sinon le r�sultat de la comparaison de la ligne est inconnu,
   donc nul. Si tous les r�sultats par lignes sont diff�rents ou nuls,
   avec au moins un NULL, alors le r�sultat de <token>IN</token> est nul.
  </para>
  </sect2>

  <sect2>
   <title><literal>NOT IN </literal></title>

<synopsis><replaceable>expression</replaceable> NOT IN (<replaceable>sous-requ�te</replaceable>)</synopsis>

  <para>
   Le c�t� droit est une sous-requ�te entre parenth�ses, qui doit
   retourner exactement une colonne. L'expression de gauche est �valu� et
   compar�e � cauqe ligne de r�sultat de la sous-requ�te.
   Le r�sultat de <token>NOT IN</token> n'est <quote>true</quote> que si des
   lignes diff�rentes de la sous-requ�te sont trouv�es (ce qui inclut le cas
   sp�cial de la sous-requ�te ne retournant pas de ligne). 
   Le r�sultat est <quote>false</quote> si une ligne �gale est trouv�e.
  </para>

  <para>
   Si l'expression de gauche est nulle, ou qu'il n'y a pas de valeur �gale �
   droite et qu'au moins une ligne de droite est nulle, le r�sultat du 
   <token>NOT IN</token> est nul, pas vrai. Cela concorde avec les r�gles
   normales du SQL pour les combinaisons boul�ennes de valeurs nulles.
  </para>

  <para>
   Comme pour <token>EXISTS</token>, on ne peut assumer que la sous-requ�te est
   �valu�e dans son int�gralit�.
  </para>


<synopsis><replaceable>constructeur_ligne</replaceable> NOT IN (<replaceable>sous-requ�te</replaceable>)</synopsis>

  <para>
   Le c�t� gauche de cette forme de <token>NOT IN</token> est un constructeur
   de lignes, comme d�crit dans la <xref linkend="sql-syntax-row-constructors"/>.
   Le c�t� droit est une sous-requ�te entre parenth�ses qui doit renvoyer
   exactement autant colonnes qu'il y a d'expressions dans la ligne de gauche. 
   Les expressions de gauche sont �valu�es et compar�e ligne � ligne au
   r�sultat de la sous-requ�te. Le r�sultat de <token>NOT IN</token>
   n'est vrai (<quote>true</quote>) que si seules des lignes diff�rentes de la sous-requ�te
   sont trouv�es (ce qui inclut le cas sp�cial de la sous-requ�te ne retournant
   aucune ligne). Le r�sultat est faux (<quote>false</quote>) si une ligne �gale est
   trouv�e.
  </para>

  <para>
   Comme d'habitude, les valeurs nulles des lignes sont combin�es en accord
   avec les r�gles normales des expressions boul�ennes SQL. Deux lignes sont
   consid�r�es �gales si tous leurs membres correspondant sont non-nuls et
   �gaux&nbsp;; les lignes sont diff�rentes si les membres correspondant sont
   non-nuls et diff�rents&nbsp;; dans tous les autres cas, le r�sultat de cette
   comparaison de ligne est inconnu (nul). Si tous les r�sultats par ligne sont
   diff�rents ou nuls, avec au minimum un nul, alors le r�sultat du <token>NOT
   IN</token> est nul.
  </para>
 </sect2>

  <sect2>
   <title><literal>ANY</literal>/<literal>SOME</literal></title>

<synopsis><replaceable>expression</replaceable> <replaceable>op�rateur</replaceable> ANY (<replaceable>sous-requ�te</replaceable>)
<replaceable>expression</replaceable> <replaceable>op�rateur</replaceable> SOME (<replaceable>sous-requ�te</replaceable>)</synopsis>

  <para>
   Le c�t� droit est une sous-requ�te entre parenth�ses qui ne doit retourner
   qu'une seule colonne. L'expression du c�t� gauche est �valu�e et compar�e �
   chaque ligne du r�sultat de la sous-requ�te � l'aide de
   l'<replaceable>op�rateur</replaceable> indiqu�, ce qui doit aboutir � une
   r�sultat bool�en. Le r�sultat de <token>ANY</token> est vrai
   (<quote>true</quote>) si l'un des r�sultats est vrai. Le r�sultat est faux
   (<quote>false</quote>) si aucun
   r�sultat vrai n'est trouv� (ce qui inclut le cas sp�cial de la requ�te ne
   retournant aucune ligne).
  </para>

  <para>
   <token>SOME</token> est un synonyme de <token>ANY</token>.
   <token>IN</token> est �quivalent � <literal>= ANY</literal>.
  </para>

  <para>
   En l'absence de succ�s, mais si au moins une ligne du c�t� droit conduit �
   NULL avec l'op�rateur, le r�sultat de la construction <token>ANY</token>
   est nul et non faux. Ceci est en accord avec les r�gles standard SQL
   pour les combinaisons bool�enne de valeurs NULL.
  </para>

  <para>
   Comme pour <token>EXISTS</token>, on ne peut assumer que la sous-requ�te
   est �valu�e enti�rement.
  </para>

<synopsis><replaceable>constructeur_ligne</replaceable> <replaceable>operator</replaceable> ANY (<replaceable>sous-requ�te</replaceable>)
<replaceable>constructeur_ligne</replaceable> <replaceable>operator</replaceable> SOME (<replaceable>sous-requ�te</replaceable>)</synopsis>

  <para>
   Le c�t� gauche de cette forme <token>ANY</token> est un constructeur de
   ligne, tel que d�crit dans la <xref linkend="sql-syntax-row-constructors"/>.
   Le c�t� droit est une sous-requ�te entre
   parenth�ses, qui doit renvoyer exactement autant de colonnes qu'il y a
   d'expressions dans la ligne de gauche. Les expressions du c�t� gauche sont
   �valu�es et compar�es ligne � ligne au r�sultat de la
   sous-requ�te � l'aide de l'<replaceable>op�rateur</replaceable> donn�.
   Le r�sultat de <token>ANY</token> est <quote>true</quote> si la comparaison
   renvoie true pour une ligne quelconque de la sous-requ�te.
   Le r�sultat est <quote>false</quote> si la comparaison renvoie false pour
   chaque ligne de la sous-requ�te (ce qui inclut le cas sp�cial de la sous-requ�te
   ne retournant aucune ligne). Le r�sultat est NULL si la comparaison ne renvoie
   true pour aucune ligne, et renvoie NULL pour au moins une
   ligne.
  </para>

  <para>
   Voir <xref linkend="row-wise-comparison"/> pour la signification d�taill�e
   d'une comparaison ligne � ligne. <!-- row-wise comparison -->
  </para>
  </sect2>

  <sect2>
   <title><literal>ALL</literal></title>

<synopsis><replaceable>expression</replaceable> <replaceable>op�rateur</replaceable> ALL
(<replaceable>sous-requ�te</replaceable>)</synopsis>

  <para>
   Le c�t� droit est une sous-requ�te entre parenth�ses qui ne doit renvoyer
   qu'une seule colonne. L'expression gauche est �valu�e et compar�e � chaque
   ligne du r�sultat de la sous-requ�te � l'aide de
   l'<replaceable>op�rateur</replaceable>, ce qui doit renvoyer un r�sultat bool�en.
   Le r�sultat de <token>ALL</token> est vrai (<quote>true</quote>) si toutes les
   lignes renvoient true (ce qui inclut le cas sp�cial de la sous-requ�te ne
   retournant aucune ligne). Le r�sultat est faux (<quote>false</quote>) si un r�sultat
   faux est d�couvert. Le r�sultat est NULL si la comparaison ne renvoie pas
   false pour toutes les lignes, et si elle renvoie NULL pour au moins une ligne.
  </para>

  <para>
   <token>NOT IN</token> est �quivalent � <literal>&lt;&gt; ALL</literal>.
  </para>

  <para>
   Comme pour <token>EXISTS</token>, on ne peut assumer que la
   sous-requ�te est �valu�e enti�rement.
  </para>

<synopsis><replaceable>constructeur_ligne</replaceable> <replaceable>op�rateur</replaceable> ALL (<replaceable>sous-requ�te</replaceable>)</synopsis>

  <para>
   Le c�t� gauche de cette forme de <token>ALL</token> est un constructeur de
   lignes, tel que d�crit dans la <xref linkend="sql-syntax-row-constructors"/>.
   Le c�t� droit est une sous-requ�te entre
   parenth�ses qui doit renvoyer exactement le m�me nombre de colonnes qu'il y a
   d'expressions dans la ligne de gauche. Les expressions du c�t� gauche sont
   �valu�es et compar�es ligne � ligne au r�sultat de la
   sous-requ�te � l'aide de l'<replaceable>op�rateur</replaceable> donn�.
   Le r�sultat de <token>ALL</token> est <quote>true</quote> si la comparaison
   renvoie true pour toutes les lignes de la sous-requ�te (ce qui inclut le cas
   sp�cial de la sous-requ�te ne retournant aucune ligne).
   Le r�sultat est <quote>false</quote> si la comparaison renvoie false pour
   une ligne quelconque de la sous-requ�te.
   Le r�sultat est NULL si la comparaison ne renvoie false pour aucune ligne
   de la sous-requ�te, et si elle renvoit NULL pour au moins une ligne.
  </para>

  <para>
   Voir <xref linkend="row-wise-comparison"/> pour la signification d�taill�e 
   d'une comparaison ligne � ligne.
  </para>
  </sect2>

  <sect2>
   <title>Comparaison de lignes</title>

   <indexterm zone="functions-subquery">
    <primary>comparaison</primary>
    <secondary>ligne de r�sultats d'une sous-requ�te</secondary>
   </indexterm>

<synopsis><replaceable>constructeur_ligne</replaceable> <replaceable>op�rateur</replaceable> (<replaceable>sous-requ�te</replaceable>)</synopsis>

  <para>
   Le c�t� gauche est un constructeur de lignes, tel que d�crit dans la 
   <xref linkend="sql-syntax-row-constructors"/>. Le c�t� droit est une
   sous-requ�te entre parenth�ses qui doit renvoyer exactement autant de
   colonnes qu'il y a d'expressions du c�t� gauche. De plus, la
   sous-requ�te ne peut pas renvoyer plus d'une ligne. (Si elle ne renvoie aucune
   ligne, le r�sultat est consid�r� nul.) Le c�t� gauche est �valu�
   et compar� ligne compl�te avec la ligne de r�sultat de la sous-requ�te.
  </para>

  <para>
   Voir <xref linkend="row-wise-comparison"/> pour plus de d�tails sur la
   signification d'une comparaison ligne � ligne.
  </para>
  </sect2>
 </sect1>

 <sect1 id="functions-comparisons">
  <title>Comparaisons de lignes et de tableaux</title>

  <indexterm>
   <primary>IN</primary>
  </indexterm>

  <indexterm>
   <primary>NOT IN</primary>
  </indexterm>

  <indexterm>
   <primary>ANY</primary>
  </indexterm>

  <indexterm>
   <primary>ALL</primary>
  </indexterm>

  <indexterm>
   <primary>SOME</primary>
  </indexterm>

  <indexterm>
   <primary>comparaison par ligne</primary>
  </indexterm>

  <indexterm>
   <primary>comparaison</primary>
   <secondary>par ligne</secondary>
  </indexterm>

  <indexterm>
   <primary>IS DISTINCT FROM</primary>
  </indexterm>

  <indexterm>
   <primary>IS NOT DISTINCT FROM</primary>
  </indexterm>

  <para>
   Cette section d�crit des constructions adapt�es aux
   comparaisons entre groupes de valeurs. Ces formes sont
   syntaxiquement li�es aux formes des sous-requ�tes de la section
   pr�c�dente, mais elles n'impliquent pas de sous-requ�tes. Les formes qui
   impliquent des sous-expressions de tableaux sont des extensions de
   <productname>PostgreSQL</productname>&nbsp;; le reste est compatible avec
   <acronym>SQL</acronym>. Toutes les formes d'expression document�es dans cette
   section renvoient des r�sultats bool�ens (true/false).
  </para>

  <sect2>
   <title><literal>IN</literal></title>

<synopsis><replaceable>expression</replaceable> IN (<replaceable>valeur</replaceable> <optional>, ...</optional>)</synopsis>

  <para>
   Le c�t� droit est une liste entre parenth�ses d'expressions scalaires. Le
   r�sultat est vrai (<quote>true</quote>) si le c�t� gauche de l'expression
   est �gal � une des expressions du c�t� droit. C'est une notation raccourcie
   de

<synopsis><replaceable>expression</replaceable> = <replaceable>valeur1</replaceable>
OR
<replaceable>expression</replaceable> = <replaceable>valeur2</replaceable>
OR
...</synopsis>
  </para>

  <para>
   Si l'expression du c�t� gauche renvoie NULL, ou s'il n'y a pas
   de valeurs du c�t� droit �gales et qu'au moins une expression du c�t�
   droit renvoie NULL, le r�sultat de la construction
   <token>IN</token> est NULL et non pas faux. Ceci est en accord avec les
   r�gles du standard SQL pour les combinaisons bool�ennes de valeurs NULL.
  </para>
  </sect2>

  <sect2>
   <title><literal>NOT IN</literal></title>

<synopsis><replaceable>expression</replaceable> NOT IN (<replaceable>valeur</replaceable> <optional>, ...</optional>)</synopsis>

  <para>
   Le c�t� droit est une liste entre parenth�ses d'expressions scalaires. Le
   r�sultat est vrai (<quote>true</quote>) si le r�sultat de l'expression du c�t� gauche est
   diff�rent de toutes les expressions du c�t� droit. C'est une notation
   raccourcie de

<synopsis><replaceable>expression</replaceable> &lt;&gt; <replaceable>valeur1</replaceable>
AND
<replaceable>expression</replaceable> &lt;&gt; <replaceable>valeur2</replaceable>
AND
...</synopsis>
  </para>

  <para>
   Si l'expression du c�t� gauche renvoie NULL, ou s'il
   existe des valeurs diff�rentes du c�t� droit et qu'au moins une expression
   du c�t� droit renvoie NULL, le r�sultat de la construction
   <token>NOT IN</token> est NULL et non pas vrai. Ceci est en accord avec les
   r�gles du standard du SQL pour les combinaisons bool�ennes de valeurs NULL.
  </para>

  <tip>
  <para>
   <literal>x NOT IN y</literal> est �quivalent � <literal>NOT (x IN
   y)</literal> dans tout les cas. N�anmoins, les valeurs NULL ont plus de
   chances de surprendre le novice avec <token>NOT IN</token> qu'avec
   <token>IN</token>. Quand cela est possible, il est pr�f�rable d'exprimer
   la condition de fa�on positive.
  </para>
  </tip>
  </sect2>

  <sect2>
   <title><literal>ANY</literal>/<literal>SOME</literal> (array)</title>

<synopsis><replaceable>expression</replaceable> <replaceable>op�rateur</replaceable> ANY (<replaceable>expression tableau</replaceable>)
<replaceable>expression</replaceable> <replaceable>op�rateur</replaceable> SOME (<replaceable>expression tableau</replaceable>)</synopsis>

  <para>
   Le c�t� droit est une expression entre parenth�ses qui doit renvoyer une
   valeur de type array. L'expression du c�t� gauche est �valu�e et compar�e �
   chaque �l�ment du tableau en utilisant l'<replaceable>op�rateur</replaceable>
   donn�, qui doit renvoyer un r�sultat bool�en. Le r�sultat de
   <token>ANY</token> est vrai (<quote>true</quote>) si un r�sultat vrai est obtenu. Le
   r�sultat est faux (<quote>false</quote>) si aucun r�sultat vrai n'est trouv�
   (ce qui inclut le cas sp�cial du tableau qui ne contient aucun �l�ment).
  </para>

  <para>
   Si l'expression de tableau ram�ne un tableau NULL, le r�sultat de
   <token>ANY</token> est NULL. Si l'expression du c�t� gauche retourne
   NULL, le r�sultat de <token>ANY</token> est habituellement NULL (bien qu'un
   op�rateur de comparaison non strict puisse conduire � un r�sultat diff�rent).
   De plus, si le tableau du c�t� droit contient des �l�ments NULL et qu'aucune
   comparaison vraie n'est obtenue, le r�sultat de <token>ANY</token> est NULL,
   et non pas faux (<quote>false</quote>) (l� aussi avec l'hypoth�se d'un op�rateur de comparaison
   strict). Ceci est en accord avec les r�gles du standard SQL pour les
   combinaisons bool�ennes de valeurs NULL.
  </para>

  <para>
   <token>SOME</token> est un synonyme de <token>ANY</token>.
  </para>
  </sect2>

  <sect2>
   <title><literal>ALL</literal> (array)</title>

<synopsis><replaceable>expression</replaceable> <replaceable>op�rateur</replaceable> ALL (<replaceable>expression tableau</replaceable>)</synopsis>

  <para>
   Le c�t� droit est une expression entre parenth�ses qui doit renvoyer une
   valeur de type tableau. L'expression du c�t� gauche est �valu�e et compar�e �
   chaque �l�ment du tableau � l'aide de l'<replaceable>op�rateur</replaceable>
   donn�, qui doit renvoyer un r�sultat bool�en. Le r�sultat de <token>ALL</token>
   est vrai (<quote>true</quote>) si toutes les comparaisons renvoient vrai (ce
   qui inclut le cas sp�cial du tableau qui ne contient aucun �l�ment). Le r�sultat est faux
   (<quote>false</quote>) si un r�sultat faux est trouv�.
  </para>

  <para>
   Si l'expression de tableau ram�ne un tableau NULL, le r�sultat de
   <token>ALL</token> est NULL. Si l'expression du c�t� gauche retourne
   NULL, le r�sultat de <token>ALL</token> est habituellement NULL (bien qu'un
   op�rateur de comparaison non strict puisse conduire � un r�sultat diff�rent).
   De plus, si le tableau du c�t� droit contient des �l�ments NULL et qu'aucune
   comparaison false n'est obtenue, le r�sultat de <token>ALL</token> est NULL,
   et non pas true (l� aussi avec l'hypoth�se d'un op�rateur de comparaison
   strict). Ceci est en accord avec les r�gles du standard SQL pour les
   combinaisons bool�ennes de valeurs NULL.
  </para>
  </sect2>

  <sect2 id="row-wise-comparison">
   <title>Comparaison de lignes enti�res</title>

<!-- Etrangement, � ce niveau-l�, le fichier de traduction contient d�j� 300
lignes de plus que la VO... -->
<synopsis><replaceable>constructeur_ligne</replaceable> op�rateur <replaceable>constructeur_ligne</replaceable></synopsis>

  <para>
   Chaque c�t� est un constructeur de lignes, tel que d�crit dans la <xref
   linkend="sql-syntax-row-constructors"/>. Les deux valeurs de lignes doivent
   avoir le m�me nombre de lignes.  Chaque c�t� est �valu�. Ils sont alors
   compar�s sur toute la ligne. Les comparaisons de lignes sont autoris�es
   quand l'<replaceable>op�rateur</replaceable> est
   <literal>=</literal>,
   <literal>&lt;&gt;</literal>,
   <literal>&lt;</literal>,
   <literal>&lt;=</literal>,
   <literal>&gt;</literal>,
   <literal>&gt;=</literal>,
   ou a une s�mantique similaire � l'un d'eux. (Pour �tre pr�cis, un op�rateur
   peut �tre un op�rateur de comparaison de ligne s'il est membre d'une classe
   d'op�rateurs B-Tree ou est le n�gateur du membre <literal>=</literal> d'une classe
   d'op�rateurs B-Tree.)
  </para>

  <para>
   Les cas <literal>=</literal> et <literal>&lt;&gt;</literal> fonctionnent
   l�g�rement diff�remment des autres. Les lignes sont
   consid�r�es �gales si leurs membres correspondants sont non-nuls et
   �gaux&nbsp;; les lignes sont diff�rentes si des membres correspondants sont
   non-nuls et diff�rents&nbsp;; autrement, le r�sultat de la comparaison de ligne est
   inconnu (NULL).
  </para>

  <para>
   Pour les cas <literal>&lt;</literal>, <literal>&lt;=</literal>,
   <literal>&gt;</literal> et <literal>&gt;=</literal>, les �l�ments de ligne
   sont compar�s de gauche � droite. La comparaison s'arr�te d�s qu'une paire
   d'�l�ments diff�rents ou NULL est d�couverte. Si un des �l�ments de cette paire est NULL,
   le r�sultat de la comparaison de la ligne est inconnu, donc NULL&nbsp;; sinon
   la comparaison de cette paire d'�l�ments d�termine le r�sultat. Par exemple,
   <literal>ROW(1,2,NULL) &lt; ROW(1,3,0)</literal>
   est vrai, non NULL, car la troisi�me paire d'�l�ments n'est pas consid�r�e.
  </para>

  <note>
   <para>
    Avant <productname>PostgreSQL</productname> 8.2, les cas
    <literal>&lt;</literal>, <literal>&lt;=</literal>, <literal>&gt;</literal>
    et <literal>&gt;=</literal> n'�taient pas g�r�s d'apr�s les sp�cifications
    SQL. Une comparaison comme <literal>ROW(a,b) &lt; ROW(c,d)</literal>
    �tait cod�e sous la forme <literal>a &lt; c AND b &lt; d</literal> alors que
    le bon comportement est �quivalent �
    <literal>a &lt; c OR (a = c AND b &lt; d)</literal>.
   </para>
  </note>

  <synopsis><replaceable>constructeur_ligne</replaceable> IS DISTINCT FROM <replaceable>constructeur_ligne</replaceable></synopsis>

  <para>
    Cette construction est similaire � une comparaison de ligne
    <literal>&lt;&gt;</literal>, mais elle ne conduit pas � un r�sultat NULL pour des
    entr�es NULL. Au lieu de cela, une valeur NULL est consid�r�e diff�rente
    (distincte) d'une valeur non-NULL et deux valeurs NULL sont consid�r�es
    �gales (non distinctes). Du coup, le r�sultat est toujours soit
    true soit false, jamais NULL.
  </para>

<synopsis>
<replaceable>constructeur_ligne</replaceable> IS NOT DISTINCT FROM <replaceable>constructeur_ligne</replaceable>
</synopsis>

  <para>
   Cette construction est similaire � une comparaison de lignes
   <literal>=</literal>, mais elle ne conduit pas � un r�sultat NULL pour des
   entr�es NULL. Au lieu de cela, une valeur NULL est consid�r�e diff�rente
   (distincte) d'une valeur non NULL et deux valeurs NULL sont consid�r�es
   identiques (non distinctes). Du coup, le r�sultat
   est toujours soit true soit false, jamais NULL.
  </para>

  </sect2>
</sect1>

<sect1 id="functions-srf">
  <title>Fonctions retournant des ensembles</title>
  
  <indexterm zone="functions-srf">
    <primary>fonctions retournant des ensembles</primary>
    <secondary>fonctions</secondary>
  </indexterm>
  
  <indexterm>
   <primary>generate_series</primary>
  </indexterm>

<!-- Joli contresens :-) 
     et g�n�rer N'est PAS fran�ais -->
  <para>
    Cette section d�crit des fonctions qui peuvent renvoyer plus d'une
    ligne. Actuellement, les seules fonctions dans cette classe sont les
    les fonctions de g�n�ration de s�ries, d�taill�es dans le <xref
    linkend="functions-srf-series"/>.
  </para>
    
    <table id="functions-srf-series">
      <title>Fonctions de g�n�ration de s�ries</title>
      <tgroup cols="4">
        <thead>
          <row>
            <entry>Fonction</entry>
            <entry>Type d'argument</entry>
            <entry>Type de retour</entry>
            <entry>Description</entry>
          </row>
        </thead>
        
        <tbody>
          <row>
            <entry><literal><function>generate_series</function> (<parameter>d�but</parameter>, <parameter>fin</parameter>)</literal></entry>
            <entry><type>int</type> ou <type>bigint</type></entry>
            <entry><type>setof int</type> ou <type>setof bigint</type>
             (m�me type que l' argument)</entry>
            <entry>
              Produit une s�rie de valeurs, de <parameter>d�but</parameter> �
              <parameter>fin</parameter> avec un incr�ment de un.
            </entry>
          </row>
          
          <row>
            <entry><literal><function>generate_series</function> (<parameter>d�but</parameter>, <parameter>fin</parameter>, <parameter>pas</parameter>)</literal></entry>
            <entry><type>int</type> ou <type>bigint</type></entry>
            <entry><type>setof int</type> ou <type>setof bigint</type>
             (m�me type que l'argument)</entry>
            <entry>
              Produit une s�rie de valeurs, de <parameter>d�but</parameter> �
              <parameter>fin</parameter> avec un incr�ment de <parameter>pas</parameter>.
            </entry>
          </row>
          
        </tbody>
      </tgroup>
    </table>
    
    <para>
      Quand <parameter>pas</parameter> est positif, aucune ligne n'est
      renvoy�e si <parameter>d�but</parameter> est sup�rieur �
      <parameter>fin</parameter>. � l'inverse, quand
      <parameter>pas</parameter> est n�gatif, aucune ligne n'est renvoy�e
      si <parameter>d�but</parameter> est inf�rieur �
      <parameter>fin</parameter>. De m�me, aucune ligne n'est renvoy�e pour
      les entr�es <literal>NULL</literal>. Une erreur est lev�e si
      <parameter>pas</parameter> vaut z�ro.
    </para>
    
    <para>
     Quelques exemples&nbsp;:
      <programlisting>select * from generate_series(2,4);
 generate_series
-----------------
 2
 3
 4
(3 rows)

select * from generate_series(5,1,-2);
 generate_series
-----------------
 5
 3
 1
(3 rows)

select * from generate_series(4,3);
 generate_series
-----------------
(0 rows)

select current_date + s.a as dates from generate_series(0,14,7) as s(a);
    dates
------------
 2004-02-05
 2004-02-12
 2004-02-19
(3 rows)</programlisting>
    </para>
  </sect1>

  <sect1 id="functions-info">
    <title>Fonctions d'informations syst�me</title>

    <para>
      Le <xref linkend="functions-info-session-table"/> pr�sente diverses
      fonctions qui extraient des informations de session et syst�me.
      </para>

      <table id="functions-info-session-table">
        <title>Fonctions d'information de session</title>
        <tgroup cols="3">
         <colspec colnum="1" colwidth="1.0*"/>
         <colspec colnum="2" colwidth="0.8*"/>
         <colspec colnum="3" colwidth="1.2*"/>
          <thead>
            <row>
              <entry>Nom</entry>
              <entry>Type de retour</entry>
              <entry>Description</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry><literal><function>current_database</function>()</literal></entry>
              <entry><type>nom</type></entry>
              <entry>nom de la base de donn�es courante</entry>
            </row>

            <row>
              <entry><literal><function>current_schema</function>()</literal></entry>
              <entry><type>nom</type></entry>
              <entry>nom du sch�ma courant</entry>
            </row>

            <row>
              <entry><literal><function>current_schemas</function>(<type>boolean</type>)</literal></entry>
              <entry><type>nom[]</type></entry>
              <entry>nom des sch�mas dans le chemin de recherche, avec
	      optionnellement les sch�mas implicites</entry>
            </row>

            <row>
              <entry><literal><function>current_user</function></literal></entry>
              <entry><type>nom</type></entry>
              <entry>nom d'utilisateur du contexte d'ex�cution courant</entry>
            </row>

            <row>
              <entry><literal><function>inet_client_addr</function>()</literal></entry>
              <entry><type>inet</type></entry>
              <entry>adresse de la connexion distante</entry>
            </row>

            <row>
              <entry><literal><function>inet_client_port</function>()</literal></entry>
              <entry><type>int</type></entry>
              <entry>port de la connexion distante</entry>
            </row>

            <row>
              <entry><literal><function>inet_server_addr</function>()</literal></entry>
              <entry><type>inet</type></entry>
              <entry>adresse de la connexion locale</entry>
            </row>

            <row>
              <entry><literal><function>inet_server_port</function>()</literal></entry>
              <entry><type>int</type></entry>
              <entry>port de la connexion locale</entry>
            </row>

            <row>
              <entry><literal><function>pg_my_temp_schema</function>()</literal></entry>
              <entry><type>oid</type></entry>
              <entry>OID du sch�ma temporaire de la session, 0 si aucun</entry>
            </row>

            <row>
              <entry><literal><function>pg_is_other_temp_schema</function>(<type>oid</type>)</literal></entry>
              <entry><type>boolean</type></entry>
              <entry>s'agit-il du sch�ma temporaire d'une autre session&nbsp;?</entry>
            </row>

            <row>
              <entry><literal><function>pg_postmaster_start_time</function>()</literal></entry>
              <entry><type>timestamp with time zone</type></entry>
              <entry>heure de d�marrage du serveur</entry>
            </row>

            <row>
              <entry><literal><function>session_user</function></literal></entry>
              <entry><type>name</type></entry>
              <entry>nom de l'utilisateur de session</entry>
            </row>

            <row>
              <entry><literal><function>user</function></literal></entry>
              <entry><type>name</type></entry>
              <entry>�quivalent � <function>current_user</function></entry>
            </row>

            <row>
              <entry><literal><function>version</function>()</literal></entry>
              <entry><type>text</type></entry>
              <entry>informations de version de <productname>PostgreSQL</productname></entry>
            </row>
          </tbody>
        </tgroup>
      </table>

      <indexterm zone="functions-info">
        <primary>user</primary>
        <secondary>en cours</secondary>
      </indexterm>

      <indexterm zone="functions-info">
        <primary>sch�ma</primary>
        <secondary>en cours</secondary>
      </indexterm>

      <indexterm zone="functions-info">
        <primary>chemin de recherche</primary>
        <secondary>en cours</secondary>
      </indexterm>
      
      <para>
        <function>session_user</function> est habituellement l'utilisateur
        qui a initi� la connexion � la base de donn�es&nbsp;; mais les
        superutilisateurs peuvent modifier ce param�trage avec
	<xref linkend="sql-set-session-authorization" endterm="sql-set-session-authorization-title"/>.
        <function>current_user</function> est l'identifiant de l'utilisateur,
        utilisable pour les v�rifications de permissions. Il est habituellement
	identique � l'utilisateur de la session, mais il peut �tre modifi� avec
	<xref linkend="sql-set-role" endterm="sql-set-role-title"/>. Il change
	aussi pendant l'ex�cution des fonctions comprenant l'attribut <literal>SECURITY
        DEFINER</literal>. En langage Unix, l'utilisateur de la session
        est le <quote>real user</quote> (NdT&nbsp;: l'utilisateur r�el) et
        l'utilisateur courant est l'<quote>effective user</quote>
        (NdT&nbsp;: l'utilisateur effectif) .
      </para>

<!-- trailing : � droite -->
      <note>
        <para>
          <function>current_user</function>, 
          <function>session_user</function> et <function>user</function>
          ont un statut syntaxique sp�cial en
          <acronym>SQL</acronym>&nbsp;: ils doivent �tre appel�s sans
          parenth�ses � droite.
        </para>
      </note>
        
      <para>
        <function>current_schema</function> renvoie le nom du premier
        sch�ma dans le chemin de recherche (ou une valeur NULL si ce dernier
        est vide). C'est le sch�ma utilis� pour toute cr�ation de table ou
        autre objet nomm� sans pr�cision d'un sch�ma cible.
        <function>current_schemas(boolean)</function> renvoie un tableau
        qui contient les noms de tous les sch�mas du chemin de recherche. L'option
        bool�enne indique si les sch�mas syst�me implicitement inclus,
        comme <literal>pg_catalog</literal>, doivent �tre inclus dans le chemin de
        recherche retourn�.
      </para>
      
      <note>
        <para>
          Le chemin de recherche est modifiable � l'ex�cution. La commande
          est&nbsp;:
<programlisting>SET search_path TO <replaceable>schema</replaceable> <optional>, <replaceable>schema</replaceable>, ...</optional></programlisting>
        </para>
      </note>
  
  <indexterm zone="functions-info">
    <primary>inet_client_addr</primary>
  </indexterm>
  
  <indexterm zone="functions-info">
    <primary>inet_client_port</primary>
  </indexterm>
  
  <indexterm zone="functions-info">
    <primary>inet_server_addr</primary>
  </indexterm>
  
  <indexterm zone="functions-info">
    <primary>inet_server_port</primary>
  </indexterm>
  
  <para>
    <function>inet_client_addr</function> renvoie l'adresse IP du client
    courant et <function>inet_client_port</function> le num�ro du port.
    <function>inet_server_addr</function> renvoie l'adresse IP sur laquelle
    le serveur a accept� la connexion courante et 
    <function>inet_server_port</function> le num�ro du port. Toutes
    ces fonctions renvoient NULL si la connexion courante est �tablie via
    une socket de domaine Unix.
  </para>
  
   <indexterm zone="functions-info">
    <primary>pg_my_temp_schema</primary>
   </indexterm>

   <indexterm zone="functions-info">
    <primary>pg_is_other_temp_schema</primary>
   </indexterm>

   <para>
    <function>pg_my_temp_schema</function> renvoie l'OID du sch�ma
    temporaire de la session courante, ou 0 s'il n'existe pas (parce qu'il
    n'y a pas eu de cr�ation de tables temporaires).
    <function>pg_is_other_temp_schema</function> renvoie true si l'OID donn�
    est l'OID d'un sch�ma temporaire d'une autre session. (Ceci peut �tre
    utile pour exclure les tables temporaires d'autres sessions lors de
    l'affichage d'un catalogue, par exemple.)
   </para>

   <indexterm zone="functions-info">
    <primary>pg_postmaster_start_time</primary>
   </indexterm>

   <para>
     <function>pg_postmaster_start_time</function> renvoie la date et l'heure
     (type <type>timestamp with time zone</type>) de d�marrage du serveur.
   </para>

  <indexterm zone="functions-info">
    <primary>version</primary>
  </indexterm>
  
  <para>
    <function>version</function> renvoie une cha�ne qui d�crit la version
    du serveur <productname>PostgreSQL</productname>.
  </para>
  
  <indexterm>
    <primary>droit</primary>
    <secondary>requ�te</secondary>
  </indexterm>
  
  <para>
    Le <xref linkend="functions-info-access-table"/> liste les fonctions qui
    permettent aux utilisateurs de consulter les privil�ges d'acc�s. Voir la
    <xref linkend="ddl-priv"/> pour plus d'informations sur les privil�ges.
  </para>
      
  <table id="functions-info-access-table">
    <title>Fonctions de consultation des privil�ges d'acc�s</title>
    <tgroup cols="3">
    <colspec colnum="1" colwidth="1.3*"/>
    <colspec colnum="2" colwidth="0.4*"/>
    <colspec colnum="3" colwidth="1.3*"/>
    <thead>
      <row>
        <entry>Nom</entry>
        <entry>Type de retour</entry>
        <entry>Description</entry>
      </row>
    </thead>
          
    <tbody>
      <row>
        <entry><literal><function>has_database_privilege</function>
          (<parameter>utilisateur</parameter>,
          <parameter>base</parameter>,
          <parameter>privil�ge</parameter>)</literal>
        </entry>
        <entry><type>boolean</type></entry>
        <entry><parameter>utilisateur</parameter> a-t-il le privil�ge
	<parameter>privil�ge</parameter> sur <parameter>base</parameter></entry>
      </row>
      <row>
        <entry><literal><function>has_database_privilege</function>
          (<parameter>base</parameter>,
          <parameter>privil�ge</parameter>)</literal>
        </entry>
        <entry><type>boolean</type></entry>
        <entry>l'utilisateur courant a-t-il le privil�ge
	        <parameter>privil�ge</parameter> sur
		<parameter>base</parameter></entry>
      </row>
      <row>
        <entry><literal><function>has_function_privilege</function>
          (<parameter>utilisateur</parameter>,
          <parameter>fonction</parameter>,
          <parameter>privil�ge</parameter>)</literal>
        </entry>
        <entry><type>boolean</type></entry>
        <entry><parameter>utilisateur</parameter> a-t-il le privil�ge
	        <parameter>privil�ge</parameter> sur
		<parameter>fonction</parameter></entry>
      </row>
      <row>
        <entry><literal><function>has_function_privilege</function>
          (<parameter>fonction</parameter>,
          <parameter>privil�ge</parameter>)</literal>
        </entry>
        <entry><type>boolean</type></entry>
        <entry>l'utilisateur courant a-t-il e privil�ge
	        <parameter>privil�ge</parameter> sur
		<parameter>fonction</parameter></entry>
      </row>
      <row>
        <entry><literal><function>has_language_privilege</function>
          (<parameter>utilisateur</parameter>,
          <parameter>langage</parameter>,
          <parameter>privil�ge</parameter>)</literal>
        </entry>
        <entry><type>boolean</type></entry>
        <entry><parameter>utilisateur</parameter> a-t-il le privil�ge
	<parameter>privil�ge</parameter> sur <parameter>langage</parameter></entry>
      </row>
      <row>
        <entry><literal><function>has_language_privilege</function>
          (<parameter>langage</parameter>,
          <parameter>droit</parameter>)</literal>
        </entry>
        <entry><type>boolean</type></entry>
        <entry>l'utilisateur courant a-t-il le privil�ge
	<parameter>privil�ge</parameter> sur <parameter>langage</parameter></entry>
      </row>
      <row>
       <entry><literal><function>has_schema_privilege</function>(<parameter>utilisateur</parameter>,
                                  <parameter>sch�ma</parameter>,
                                  <parameter>privil�ge</parameter>)</literal>
       </entry>
       <entry><type>boolean</type></entry>
       <entry><parameter>utilisateur</parameter> a-t-il le privil�ge
       <parameter>privil�ge</parameter> sur <parameter>sch�ma</parameter></entry>
      </row>
      <row>
       <entry><literal><function>has_schema_privilege</function>(<parameter>sch�ma</parameter>,
                                  <parameter>privil�ge</parameter>)</literal>
       </entry>
       <entry><type>boolean</type></entry>
       <entry>l'utilisateur courant a-t-il le privil�ge
              <parameter>privil�ge</parameter> sur
	      <parameter>sch�ma</parameter></entry>
      </row>
      <row>
       <entry><literal><function>has_table_privilege</function>(<parameter>utilisateur</parameter>,
                                  <parameter>table</parameter>,
                                  <parameter>privil�ge</parameter>)</literal>
       </entry>
       <entry><type>boolean</type></entry>
       <entry><parameter>utilisateur</parameter> a-t-il le privil�ge
       <parameter>privil�ge</parameter> sur <parameter>table</parameter></entry>
      </row>
      <row>
       <entry><literal><function>has_table_privilege</function>(<parameter>table</parameter>,
                                  <parameter>privilege</parameter>)</literal>
       </entry>
       <entry><type>boolean</type></entry>
       <entry>l'utilisateur courant a-t-il le privil�ge
              <parameter>privil�ge</parameter> sur <parameter>table</parameter></entry>
      </row>
        <row>
          <entry><literal><function>has_tablespace_privilege</function>
            (<parameter>utilisateur</parameter>, <parameter>tablespace</parameter>,
            <parameter>privil�ge</parameter>)</literal>
          </entry>
          <entry><type>boolean</type></entry>
          <entry><parameter>utilisateur</parameter> a-t-il le privil�ge
	  <parameter>privil�ge</parameter> sur
	  <parameter>tablespace</parameter></entry>
        </row>
        <row>
          <entry><literal><function>has_tablespace_privilege</function>
            (<parameter>tablespace</parameter>,
            <parameter>privil�ge</parameter>)</literal>
          </entry>
          <entry><type>boolean</type></entry>
          <entry>l'utilisateur courant a-t-il le privil�ge
	         <parameter>privil�ge</parameter> sur
	         <parameter>tablespace</parameter></entry>
        </row>
      <row>
       <entry><literal><function>pg_has_role</function>(<parameter>utilisateur</parameter>,
                                  <parameter>r�le</parameter>,
                                  <parameter>privil�ge</parameter>)</literal>
       </entry>
       <entry><type>boolean</type></entry>
       <entry><parameter>utilisateur</parameter> a-t-il le privil�ge
                 <parameter>privil�ge</parameter> sur
		 <parameter>r�le</parameter></entry>
      </row>
      <row>
       <entry><literal><function>pg_has_role</function>(<parameter>r�le</parameter>,
                                  <parameter>privil�ge</parameter>)</literal>
       </entry>
       <entry><type>boolean</type></entry>
       <entry>l'utilisateur courant a-t-il le privil�ge
                <parameter>privil�ge</parameter> sur
		<parameter>r�le</parameter></entry>
      </row>
        </tbody>
        </tgroup>
      </table>

   <indexterm zone="functions-info">
    <primary>has_database_privilege</primary>
   </indexterm>
   <indexterm zone="functions-info">
    <primary>has_function_privilege</primary>
   </indexterm>
   <indexterm zone="functions-info">
    <primary>has_language_privilege</primary>
   </indexterm>
   <indexterm zone="functions-info">
    <primary>has_schema_privilege</primary>
   </indexterm>
   <indexterm zone="functions-info">
    <primary>has_table_privilege</primary>
   </indexterm>
   <indexterm zone="functions-info">
    <primary>has_tablespace_privilege</primary>
   </indexterm>
   <indexterm zone="functions-info">
    <primary>pg_has_role</primary>
   </indexterm>

      <para>
        <function>has_database_privilege</function> v�rifie si l'utilisateur
	poss�de un privil�ge particulier d'acc�s � une base de donn�es. Ses
	arguments sont analogues �
	<function>has_table_privilege</function>. Les privil�ges possibles sont
	<literal>CREATE</literal>, <literal>CONNECT</literal>, <literal>TEMPORARY</literal> ou
        <literal>TEMP</literal> (�quivalent � <literal>TEMPORARY</literal>).
      </para>
      
      <para>
        <function>has_function_privilege</function> v�rifie si l'utilisateur
	poss�de un privil�ge particulier d'acc�s � une fonction. Ses
	arguments sont analogues � <function>has_table_privilege</function>.
        Si la fonction est pr�cis�e par une cha�ne texte plut�t que par son OID,
	l'entr�e autoris�e est la m�me que pour le type de donn�es <type>regprocedure</type>
        (voir la <xref linkend="datatype-oid"/>). Le seul privil�ge possible
	est <literal>EXECUTE</literal>. Par exemple&nbsp;:
        <programlisting>SELECT has_function_privilege('joeuser', 'myfunc(int, text)', 'execute');</programlisting>
      </para>
      
      <para>
        <function>has_language_privilege</function> v�rifie si l'utilisateur
	poss�de un privil�ge particulier d'acc�s � un langage proc�dural. Ses
	sont analogues � <function>has_table_privilege</function>. Le seul
	privil�ge possible est <literal>USAGE</literal>.
      </para>

      <para>
        <function>has_schema_privilege</function> v�rifie si l'utilisateur
	poss�de un privil�ge particulier d'acc�s � un sch�ma. Ses
	arguments sont analogues � <function>has_table_privilege</function>.
        Les privil�ges possibles sont <literal>CREATE</literal>
        et <literal>USAGE</literal>.
      </para>
      
   <para>
    <function>has_table_privilege</function> v�rifie si l'utilisateur poss�de
    un privil�ge particulier d'acc�s � une table. L'utilisateur peut �tre
    indiqu� par son nom ou son OID (<literal>pg_authid.oid</literal>). Si
    l'argument est omis, <function>current_user</function> est utilis�. La table
    peut �tre indiqu�e par son nom ou par son OID. (Il existe donc six
    versions de <function>has_table_privilege</function> qui se distinguent
    par le nombre et le types de leurs arguments.) Lors de l'indication par
    nom, il est possible de pr�ciser le sch�ma. Les privil�ges possibles,
    indiqu�s sous la forme d'une cha�ne de caract�res, sont&nbsp;:
    <literal>SELECT</literal>, <literal>INSERT</literal>,
    <literal>UPDATE</literal>, <literal>DELETE</literal>,
    <literal>REFERENCES</literal> et <literal>TRIGGER</literal>.
    (La casse n'a pas d'importance.)
    Par exemple&nbsp;:
<programlisting>SELECT has_table_privilege('monschema.matable', 'select');
</programlisting>
   </para>

      <para>
        <function>has_tablespace_privilege</function> v�rifie si l'utilisateur
	poss�de un privil�ge particulier d'acc�s � un
	<foreignphrase>tablespace</foreignphrase>. Ses
	arguments sont analogues � <function>has_table_privilege</function>.
        Le seul privil�ge possible est <literal>CREATE</literal>.
      </para>

   <para>
    <function>pg_has_role</function> v�rifie si l'utilisateur poss�de
    un privil�ge particulier d'acc�s � un r�le. Ses arguments sont
    analogues � <function>has_table_privilege</function>. Les privil�ges
    possible sont <literal>MEMBER</literal> et <literal>USAGE</literal>.
    <literal>MEMBER</literal> indique une appartenance directe ou indirecte au
    r�le (c'est-�-dire le droit d'ex�cuter <literal>SET ROLE</literal>) alors que
    <literal>USAGE</literal> indique que les droits du r�le sont
    imm�diatement disponibles sans avoir � ex�cuter <literal>SET ROLE</literal>.
   </para>

      <para>
        Pour tester si l'utilisateur peut accorder un privil�ge, on ajoute
	<literal>WITH GRANT OPTION</literal> au mot-cl� indiquant le privil�ge&nbsp;;
	par exemple <literal>'UPDATE WITH GRANT OPTION'</literal>.
      </para>

      <para>
        Le <xref linkend="functions-info-schema-table"/> affiche les fonctions qui
        permettent de savoir si un objet particulier est <firstterm>visible</firstterm> dans le chemin
	de recherche courant. Une table est dite visible si son sch�ma
	contenant est dans le chemin de recherche et qu'aucune table de m�me
	nom n'appara�t avant dans le chemin de recherche. C'est �quivalent
	au fait que la table peut �tre r�f�renc�e par son nom sans qualification
	explicite de sch�ma. Par exemple, pour lister les noms de toutes les
	tables visibles&nbsp;:
        <programlisting>SELECT relname FROM pg_class WHERE pg_table_is_visible(oid);</programlisting>
      </para>
      
      <table id="functions-info-schema-table">
        <title>Fonctions d'interrogation de visibilit� dans les sch�mas</title>
        <tgroup cols="3">
         <colspec colnum="1" colwidth="1.3*"/>
         <colspec colnum="2" colwidth="0.4*"/>
         <colspec colnum="3" colwidth="1.3*"/>
          <thead>
            <row><entry>Nom</entry> <entry>Type de retour</entry> <entry>Description</entry></row>
          </thead>

          <tbody>
            <row>
              <entry><literal><function>pg_conversion_is_visible</function>
	      (<parameter>conversion_oid</parameter>)</literal>
              </entry>
              <entry><type>boolean</type></entry>
	      <entry>la conversion est-elle visible dans le chemin de recherche</entry>
            </row>
            <row>
              <entry><literal><function>pg_function_is_visible</function>
	      (<parameter>function_oid</parameter>)</literal>
              </entry>
              <entry><type>boolean</type></entry>
	      <entry>la fonction est-elle visible dans le chemin de recherche</entry>
            </row>
            <row>
              <entry><literal><function>pg_operator_is_visible</function>
	      (<parameter>operator_oid</parameter>)</literal>
              </entry>
              <entry><type>boolean</type></entry>
	      <entry>l'op�rateur est-il visible dans le chemin de recherche</entry>
            </row>
            <row>
              <entry><literal><function>pg_opclass_is_visible</function>
	      (<parameter>opclass_oid</parameter>)</literal>
              </entry>
              <entry><type>boolean</type></entry>
	      <entry>la classe d'op�rateur est-elle visible dans le chemin de recherche</entry>
            </row>
            <row>
              <entry><literal><function>pg_table_is_visible</function>(<parameter>table_oid</parameter>)</literal>
              </entry>
              <entry><type>boolean</type></entry>
              <entry>la table est-elle visible dans le chemin de recherche</entry>
            </row>
            <row>
              <entry><literal><function>pg_type_is_visible</function>(<parameter>type_oid</parameter>)</literal>
              </entry>
              <entry><type>boolean</type></entry>
              <entry>le type (ou domaine) est-il visible dans le chemin de recherche</entry>
            </row>
          </tbody>
        </tgroup>
      </table>

      <indexterm zone="functions-info">
        <primary>pg_conversion_is_visible</primary>
      </indexterm>
      <indexterm zone="functions-info">
        <primary>pg_function_is_visible</primary>
      </indexterm>
      <indexterm zone="functions-info">
        <primary>pg_operator_is_visible</primary>
      </indexterm>
      <indexterm zone="functions-info">
        <primary>pg_opclass_is_visible</primary>
      </indexterm>
      <indexterm zone="functions-info">
        <primary>pg_table_is_visible</primary>
      </indexterm>
      <indexterm zone="functions-info">
        <primary>pg_type_is_visible</primary>
      </indexterm>

      <para>
        <function>pg_conversion_is_visible</function>,
        <function>pg_function_is_visible</function>,
        <function>pg_operator_is_visible</function>,
        <function>pg_opclass_is_visible</function>,
        <function>pg_table_is_visible</function> et
        <function>pg_type_is_visible</function> permettent de v�rifier 
	la visibilit� des conversions, fonctions, op�rateurs, classes
	d'op�rateur, tables et types. 
	<function>pg_table_is_visible</function> peut aussi �tre utilis�e avec
	les vues, index et s�quences, <function>pg_type_is_visible</function>
	avec les domaines. Pour les fonctions et les
	op�rateurs, un objet est visible dans le chemin de recherche si aucun
	objet de m�me nom <emphasis>et prenant des arguments de m�mes types
	de donn�es</emphasis> n'est pr�c�demment pr�sent dans le chemin de recherche. Pour les
	classes d'op�rateurs, on consid�re � la fois le nom et la m�thode
	d'acc�s � l'index associ�e.
      </para>

      <para>
	Toutes ces fonctions n�cessitent des OID pour identifier les objets
	� v�rifier. Pour tester un objet par son nom, il
	est pr�f�rable d'utiliser les types d'alias d'OID (<type>regclass</type>,
	<type>regtype</type>, <type>regprocedure</type> ou
	<type>regoperator</type>). Par exemple
<programlisting>SELECT pg_type_is_visible('mon_schema.widget'::regtype);</programlisting>
	Il n'est pas tr�s utile de tester ainsi un nom non qualifi�
	&mdash; si le nom peut �tre reconnu, c'est qu'il est visible.
      </para>

<indexterm zone="functions-info">
  <primary>format_type</primary>
</indexterm>

<indexterm zone="functions-info">
  <primary>pg_get_viewdef</primary>
</indexterm>

<indexterm zone="functions-info">
  <primary>pg_get_ruledef</primary>
</indexterm>

<indexterm zone="functions-info">
  <primary>pg_get_indexdef</primary>
</indexterm>

<indexterm zone="functions-info">
  <primary>pg_get_triggerdef</primary>
</indexterm>

<indexterm zone="functions-info">
  <primary>pg_get_constraintdef</primary>
</indexterm>

<indexterm zone="functions-info">
  <primary>pg_get_expr</primary>
</indexterm>

<indexterm zone="functions-info">
  <primary>pg_get_userbyid</primary>
</indexterm>

<indexterm zone="functions-info">
  <primary>pg_get_serial_sequence</primary>
</indexterm>

<indexterm zone="functions-info">
  <primary>pg_tablespace_databases</primary>
</indexterm>

      <para>
        Le <xref linkend="functions-info-catalog-table"/> liste les fonctions qui
	extraient des informations des catalogues syst�me.
      </para>

      <table id="functions-info-catalog-table">
        <title>Fonctions d'information du catalogue syst�me</title>
          <tgroup cols="3">
          <colspec colnum="1" colwidth="1.3*"/>
          <colspec colnum="2" colwidth="0.4*"/>
          <colspec colnum="3" colwidth="1.3*"/>
          <thead>
            <row><entry>Nom</entry> <entry>Type de retour</entry> <entry>Description</entry></row>
          </thead>

          <tbody>
            <row>
              <entry><literal><function>format_type</function>
	      (<parameter>type_oid</parameter>, <parameter>typemod</parameter>)</literal></entry>
              <entry><type>text</type></entry>
              <entry>r�cup�re le nom SQL d'un type de donn�es</entry>
            </row>
      <row>
       <entry><literal><function>pg_get_constraintdef</function>(<parameter>constraint_oid</parameter>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>r�cup�re la d�finition d'une contrainte</entry>
      </row>
      <row>
       <entry><literal><function>pg_get_constraintdef</function>(<parameter>constraint_oid</parameter>, <parameter>pretty_bool</parameter>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>r�cup�re la d�finition d'une contrainte</entry>
      </row>
      <row>
       <entry><literal><function>pg_get_expr</function>(<parameter>expr_text</parameter>, <parameter>relation_oid</parameter>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>d�compile la forme interne d'une expression, en supposant que tous
        les Vars font r�f�rence � la relation indiqu�e par le second param�tre</entry>
      </row>
      <row>
       <entry><literal><function>pg_get_expr</function>(<parameter>expr_text</parameter>, <parameter>relation_oid</parameter>, <parameter>pretty_bool</parameter>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>d�compile la forme interne d'une expression, en supposant que tous
        les Vars font r�f�rence � la relation indiqu�e par le second param�tre</entry>
      </row>
      <row>
       <entry><literal><function>pg_get_indexdef</function>(<parameter>index_oid</parameter>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>r�cup�re la commande <command>CREATE INDEX</command> de l'index</entry>
      </row>
      <row>
       <entry><literal><function>pg_get_indexdef</function>(<parameter>index_oid</parameter>, <parameter>column_no</parameter>, <parameter>pretty_bool</parameter>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>r�cup�re la commande <command>CREATE INDEX</command> pour l'index,
        ou la d�finition d'une seule colonne d'index quand
        <parameter>column_no</parameter> ne vaut pas z�ro</entry>
      </row>
      <row>
       <entry><literal><function>pg_get_ruledef</function>(<parameter>rule_oid</parameter>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>r�cup�re la commande <command>CREATE RULE</command> pour une r�gle</entry>
      </row>
      <row>
       <entry><literal><function>pg_get_ruledef</function>(<parameter>rule_oid</parameter>, <parameter>pretty_bool</parameter>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>r�cup�re la commande <command>CREATE RULE</command> de la r�gle</entry>
      </row>
      <row>
       <entry><literal><function>pg_get_serial_sequence</function>(<parameter>table_name</parameter>, <parameter>column_name</parameter>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>r�cup�re le nom de la s�quence qu'une colonne <type>serial</type> ou
        <type>bigserial</type> utilise</entry>
      </row>
      <row>
       <entry><function>pg_get_triggerdef</function>(<parameter>trigger_oid</parameter>)</entry>
       <entry><type>text</type></entry>
       <entry>r�cup�re la commande <command>CREATE [ CONSTRAINT ] TRIGGER</command>
        du d�clencheur</entry>
      </row>
      <row>
       <entry><literal><function>pg_get_userbyid</function>(<parameter>roleid</parameter>)</literal></entry>
       <entry><type>name</type></entry>
       <entry>r�cup�re le nom du r�le poss�dant cet ID</entry>
      </row>
      <row>
       <entry><literal><function>pg_get_viewdef</function>(<parameter>view_name</parameter>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>r�cup�re la commande <command>SELECT</command> sous-jacente � la
        vue (<emphasis>obsol�te</emphasis>)</entry>
      </row>
      <row>
       <entry><literal><function>pg_get_viewdef</function>(<parameter>view_name</parameter>, <parameter>pretty_bool</parameter>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>r�cup�re la commande <command>SELECT</command> sous-jacente � la
        vue (<emphasis>obsol�te</emphasis>)</entry>
      </row>
      <row>
       <entry><literal><function>pg_get_viewdef</function>(<parameter>view_oid</parameter>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>r�cup�re la commande <command>SELECT</command> sous-jacente � la
        vue</entry>
      </row>
      <row>
       <entry><literal><function>pg_get_viewdef</function>(<parameter>view_oid</parameter>, <parameter>pretty_bool</parameter>)</literal></entry>
       <entry><type>text</type></entry>
       <entry>r�cup�re la commande <command>SELECT</command> sous-jacente � la
        vue</entry>
      </row>
      <row>
       <entry><literal><function>pg_tablespace_databases</function>(<parameter>tablespace_oid</parameter>)</literal></entry>
       <entry><type>setof oid</type></entry>
       <entry>r�cup�re l'ensemble des OID des bases qui poss�dent des objets dans ce
        tablespace</entry>
      </row>
     </tbody>
    </tgroup>
   </table>

  <para>
   <function>format_type</function> renvoie le nom SQL d'un type de donn�es
   identifi� par son OID de type et �ventuellement un modificateur
   de type. On passe NULL pour le modificateur de type si aucun modificateur
   sp�cifique n'est connu.
  </para>

  <para>
   <function>pg_get_constraintdef</function>,
   <function>pg_get_indexdef</function>, <function>pg_get_ruledef</function>
   et <function>pg_get_triggerdef</function> reconstruisent respectivement
   la commande de cr�ation d'une contrainte, d'un index, d'une r�gle ou d'un
   d�clencheur. (Il s'agit d'une reconstruction d�compil�e, pas
   du texte originale de la commande.)
   <function>pg_get_expr</function> d�compile la forme interne d'une expression
   individuelle, comme la valeur par d�faut d'une colonne. Cela peut �tre utile
   pour examiner le contenu des catalogues syst�me.
   <function>pg_get_viewdef</function> reconstruit la requ�te <command>SELECT</command>
   qui d�finit une vue. La plupart de ces fonctions existent en deux versions,
   l'une d'elles permettant, optionnellement, d'<quote>afficher joliment</quote>
   le r�sultat. Ce format est plus lisible, mais il est plus probable que les
   futures versions de <productname>PostgreSQL</productname> sachent toujours
   interpr�ter le format par d�faut de la m�me fa�on&nbsp;; la version
   <quote>jolie</quote> doit �tre �vit�e dans les sauvegardes. Passer
   <literal>false</literal> pour le param�tre de <quote>jolie</quote> sortie
   conduit au m�me r�sultat que la variante sans ce param�tre.
  </para>

  <para>
   <function>pg_get_serial_sequence</function> renvoie le nom de la s�quence
   associ�e � une colonne ou NULL si aucune s�quence n'est associ�e
   � la colonne. Le premier argument en entr�e est un nom de table,
   �ventuellement qualifi� du sch�ma. Le second param�tre est un nom de colonne. Comme
   le premier param�tre peut contenir le nom du sch�ma et de
   la table, il n'est pas trait� comme un identifiant entre guillemets
   doubles, ce qui signifie qu'il est converti en minuscules par d�faut, alors que le second
   param�tre, simple nom de colonne, est trait� comme s'il �tait entre
   guillemets doubles et sa casse est pr�serv�e. La fonction renvoie une valeur
   convenablement format�e pour �tre trait�e par les fonctions de traitement des
   s�quences (voir <xref linkend="functions-sequence"/>). Cette association
   peut �tre modifi�e ou supprim�e avec <command>ALTER SEQUENCE OWNED
   BY</command>. (La fonction aurait probablement d� s'appeler
   <function>pg_get_owned_sequence</function>&nbsp;; son nom refl�te le fait
   qu'elle est typiquement utilis�e avec les colonnes <type>serial</type> et
   <type>bigserial</type>.)
  </para>

  <para>
   <function>pg_get_userbyid</function> r�cup�re le nom d'un r�le d'apr�s son OID.
  </para>

  <para>
   <function>pg_tablespace_databases</function> autorise l'examen d'un
   <foreignphrase>tablespace</foreignphrase>. Il renvoie l'ensemble des OID
   des bases qui poss�dent des objets stock�s
   dans le <foreignphrase>tablespace</foreignphrase>. Si la fonction renvoie
   une ligne, le <foreignphrase>tablespace</foreignphrase>
   n'est pas vide et ne peut pas �tre supprim�e. Pour afficher les objets
   sp�cifiques peuplant le <foreignphrase>tablespace</foreignphrase>, il est
   n�cessaire de se connecter aux bases identifi�es par
   <function>pg_tablespace_databases</function> et de requ�ter le catalogue
   <structname>pg_class</structname>.
  </para>

   <indexterm zone="functions-info">
    <primary>col_description</primary>
   </indexterm>

   <indexterm zone="functions-info">
    <primary>obj_description</primary>
   </indexterm>

   <indexterm zone="functions-info">
    <primary>shobj_description</primary>
   </indexterm>

   <indexterm zone="functions-info">
    <primary>commentaire</primary>
    <secondary sortas="database objects">sur les objets de la base</secondary>
   </indexterm>

   <para>
    Les fonctions affich�es dans <xref linkend="functions-info-comment-table"/>
    extraient les commentaires stock�es pr�c�demment avec la commande <xref
    linkend="sql-comment" endterm="sql-comment-title"/>. Une valeur NULL est
    renvoy�e si aucun commentaire ne correspond aux param�tres
    donn�s.
   </para>

   <table id="functions-info-comment-table">
      <title>Fonctions d'informations sur les commentaires</title>
      <tgroup cols="3">
      <colspec colnum="1" colwidth="1.3*"/>
      <colspec colnum="2" colwidth="0.4*"/>
      <colspec colnum="3" colwidth="1.3*"/>
      <thead>
        <row><entry>Nom</entry> <entry>Type de retour</entry> <entry>Description</entry></row>
      </thead>

      <tbody>
        <row>
         <entry><literal><function>col_description</function>(<parameter>table_oid</parameter>,  <parameter>column_number</parameter>)</literal></entry>
         <entry><type>text</type></entry>
         <entry>r�cup�re le commentaire d'une colonne de la table</entry>
        </row>
        <row>
          <entry><literal><function>obj_description</function>
	  (<parameter>object_oid</parameter>, <parameter>catalog_name</parameter>)</literal></entry>
          <entry><type>text</type></entry>
          <entry>r�cup�re le commentaire d'un objet de la base de donn�es</entry>
        </row>
        <row>
          <entry><literal><function>obj_description</function>(<parameter>object_oid</parameter>)</literal></entry>
          <entry><type>text</type></entry>
	  <entry>r�cup�re le commentaire d'un objet de la base de donn�es
	  (<emphasis>obsol�te</emphasis>)</entry>
        </row>
        <row>
         <entry><literal><function>shobj_description</function>(<parameter>object_oid</parameter>, <parameter>catalog_name</parameter>)</literal></entry>
         <entry><type>text</type></entry>
         <entry>r�cup�re le commentaire d'un objet partag� de la base de
	 donn�es</entry>
        </row>
      </tbody>
    </tgroup>
  </table>

   <para>
    <function>col_description</function> renvoie le commentaire d'une colonne
    de table, la colonne �tant pr�cis�e par l'OID de la table et son
    num�ro de colonne.
    <function>obj_description</function> ne peut pas �tre utilis� pour les
    colonnes de table car les colonnes n'ont pas d'OID propres.
   </para>

   <para>
     La forme � deux param�tres de <function>obj_description</function>
     renvoie le commentaire d'un objet de la base de donn�es, pr�cis�
     par son OID et le nom du catalogue syst�me le contenant. Par exemple,
     <literal>obj_description(123456,'pg_class')</literal> r�cup�re le
     commentaire pour la table d'OID 123456. La forme � un param�tre de
     <function>obj_description</function> ne requiert que l'OID de l'objet.
     Elle est maintenant obsol�te car il n'existe aucune garantie que les
     OID soient uniques au travers des diff�rents catalogues syst�me&nbsp;;
     un mauvais commentaire peut alors �tre renvoy�.
   </para>
   
   <para>
     <function>shobj_description</function> est utilis� comme
     <function>obj_description</function>, mais pour
     les commentaires des objets partag�s. Certains catalogues
     syst�mes sont globaux � toutes les bases de donn�es � l'int�rieur de
     chaque cluster et leurs descriptions sont stock�es globalement.
   </para>
</sect1>

<sect1 id="functions-admin">
  <title>Fonctions d'administration syst�me</title>
  
  <para>
    Le <xref linkend="functions-admin-set-table"/> affiche les fonctions
    disponibles pour consulter et modifier les param�tres de configuration
    en ex�cution.
  </para>
    
    <table id="functions-admin-set-table">
      <title>Fonctions agissant sur les param�tres de configuration</title>
      <tgroup cols="3">
        <colspec colnum="1" colwidth="1.3*"/>
        <colspec colnum="2" colwidth="0.4*"/>
        <colspec colnum="3" colwidth="1.3*"/>
        <thead>
          <row>
            <entry>Nom</entry>
            <entry>Type de retour</entry>
            <entry>Description</entry>
         </row>
        </thead>
        
        <tbody>
          <row>
            <entry>
              <literal><function>current_setting</function>
               (<parameter>nom_param�tre</parameter>)</literal>
            </entry>
            <entry><type>text</type></entry>
            <entry>valeur courante du param�tre</entry>
          </row>
          <row>
            <entry>
              <literal><function>set_config
               (<parameter>nom_param�tre</parameter>,
               <parameter>nouvelle_valeur</parameter>,
               <parameter>est_local</parameter>)</function></literal>
            </entry>
            <entry><type>text</type></entry>
            <entry>configure le param�tre et renvoie la nouvelle
             valeur</entry>
          </row>
        </tbody>
      </tgroup>
    </table>
    
    <indexterm zone="functions-admin">
      <primary>SET</primary>
    </indexterm>
    
    <indexterm zone="functions-admin">
      <primary>SHOW</primary>
    </indexterm>
    
    <indexterm zone="functions-admin">
      <primary>configuration</primary>
      <secondary sortas="server">du serveur</secondary>
      <tertiary>fonctions</tertiary>
    </indexterm>
    
    <para>
      La fonction <function>current_setting</function> renvoie la valeur
      courante du param�tre <parameter>nom_param�tre</parameter>. Elle
      correspond � la commande <acronym>SQL</acronym> 
      <command>SHOW</command>. Par exemple&nbsp;:
      <programlisting>SELECT current_setting('datestyle');

 current_setting
-----------------
ISO, MDY
(1 row)</programlisting>
    </para>
    
    <para>
      <function>set_config</function> positionne le param�tre
      <parameter>nom_param�tre</parameter> �
      <parameter>nouvelle_valeur</parameter>.  Si 
      <parameter>est_local</parameter> vaut <literal>true</literal>, la
      nouvelle valeur s'applique uniquement la transaction en cours. Si
      la nouvelle valeur doit s'appliquer � la session en cours,
      on utilise <literal>false</literal>. La fonction correspond �
      la commande SQL <command>SET</command>. Par exemple&nbsp;:
      <programlisting>SELECT set_config('log_statement_stats', 'off', false);

 set_config
------------
off
(1 row)</programlisting>
    </para>
    
    <indexterm zone="functions-admin">
      <primary>pg_cancel_backend</primary>
    </indexterm>
    <indexterm zone="functions-admin">
      <primary>pg_reload_conf</primary>
    </indexterm>
    <indexterm zone="functions-admin">
      <primary>pg_rotate_logfile</primary>
    </indexterm>
    
    <indexterm zone="functions-admin">
      <primary>signal</primary>
      <secondary sortas="backend">processus serveur</secondary>
    </indexterm>
    
    <para>
      Les fonctions pr�sent�es dans le <xref linkend="functions-admin-signal-table"/>
      envoient des signaux de contr�le aux autres processus serveur.
      L'utilisation de ces fonctions est restreinte aux superutilisateurs.
    </para>
      
      <table id="functions-admin-signal-table">
        <title>Fonctions d'envoi de signal au serveur</title>
        <tgroup cols="3">
          <colspec colnum="1" colwidth="1.3*"/>
          <colspec colnum="2" colwidth="0.4*"/>
          <colspec colnum="3" colwidth="1.3*"/>
          <thead>
            <row>
              <entry>Nom</entry>
              <entry>Type de retour</entry>
              <entry>Description</entry>
            </row>
          </thead>
          
          <tbody>
            <row>
              <entry>
                <literal><function>pg_cancel_backend</function>
                (<parameter>pid</parameter> <type>int</type>)</literal>
              </entry>
              <entry><type>boolean</type></entry>
              <entry>Annule une requ�te en cours sur le serveur</entry>
            </row>
      <row>
       <entry>
        <literal><function>pg_reload_conf</function>()</literal>
        </entry>
       <entry><type>boolean</type></entry>
       <entry>Impose le rechargement des fichiers de configuration par les processus
       serveur</entry>
      </row>
      <row>
       <entry>
        <literal><function>pg_rotate_logfile</function>()</literal>
        </entry>
       <entry><type>boolean</type></entry>
       <entry>Impose une rotation du journal des traces du serveur</entry>
      </row>
          </tbody>
        </tgroup>
      </table>
      
   <para>
    Ces fonctions renvoient <literal>true</literal> en cas de succ�s,
    <literal>false</literal> en cas d'�chec.
   </para>

   <para>
    <function>pg_cancel_backend</function> envoie un signal demandant l'annulation de
    la requ�te (<systemitem>SIGINT</systemitem>) � un processus serveur identifi�
    par l'ID du processus. L'identifiant du processus serveur actif
    peut �tre trouv� dans la colonne <structfield>procpid</structfield>
    dans la vue <structname>pg_stat_activity</structname> ou en listant les
    processus <command>postgres</command> sur le serveur avec
    <application>ps</application>.
   </para>

   <para>
    <function>pg_reload_conf</function> envoie un signal <systemitem>SIGHUP</systemitem>
    au serveur impliquant un nouveau chargement
    des fichiers de configuration pour tous les processus serveur.
   </para>

   <para>
    <function>pg_rotate_logfile</function> signale au gestionnaire de journaux de trace
    de basculer imm�diatement vers un nouveau fichier de sortie. Ceci fonctionne
    seulement quand <varname>redirect_stderr</varname> est utilis� pour les traces,
    sinon il n'y a pas de sous-processus de gestion des traces.
   </para>

    <indexterm zone="functions-admin">
      <primary>pg_start_backup</primary>
    </indexterm>
    <indexterm zone="functions-admin">
      <primary>pg_stop_backup</primary>
    </indexterm>
   <indexterm zone="functions-admin">
    <primary>pg_switch_xlog</primary>
   </indexterm>
   <indexterm zone="functions-admin">
    <primary>pg_current_xlog_location</primary>
   </indexterm>
   <indexterm zone="functions-admin">
    <primary>pg_current_xlog_insert_location</primary>
   </indexterm>
   <indexterm zone="functions-admin">
    <primary>pg_xlogfile_name_offset</primary>
   </indexterm>
   <indexterm zone="functions-admin">
    <primary>pg_xlogfile_name</primary>
   </indexterm>
    <indexterm zone="functions-admin">
      <primary>sauvegarde</primary>
    </indexterm>
    
    <para>
     Les fonctions pr�sent�es dans le
     <xref linkend="functions-admin-backup-table"/> aident � l'ex�cution de
     sauvegardes � chaud. L'utilisation des trois premi�res fonctions
     est r�serv�e aux superutilisateurs.
    </para>
      
      <table id="functions-admin-backup-table">
        <title>Fonctions de contr�le de la sauvegarde</title>
        <tgroup cols="3">
          <colspec colnum="1" colwidth="1.3*"/>
          <colspec colnum="2" colwidth="0.4*"/>
          <colspec colnum="3" colwidth="1.3*"/>
          <thead>
            <row>
              <entry>Nom</entry>
              <entry>Type de retour</entry>
              <entry>Description</entry>
            </row>
          </thead>
          
          <tbody>
            <row>
              <entry>
                <literal><function>pg_start_backup</function>
                (<parameter>label</parameter> <type>text</type>)</literal>
              </entry>
              <entry><type>text</type></entry>
              <entry>Pr�paration de la sauvegarde � chaud</entry>
            </row>
            <row>
              <entry>
                <literal><function>pg_stop_backup</function>()</literal>
              </entry>
              <entry><type>text</type></entry>
              <entry>Arr�t de la sauvegarde � chaud</entry>
            </row>
           <row>
             <entry><literal><function>pg_switch_xlog</function>()</literal></entry>
             <entry><type>text</type></entry>
             <entry>Passage forc� � un nouveau journal de transactions</entry>
           </row>
           <row>
             <entry>
	       <literal><function>pg_current_xlog_location</function>()</literal>
	     </entry>
             <entry><type>text</type></entry>
             <entry>R�cup�ration de l'emplacement d'�criture du journal de transactions
	       courant</entry>
           </row>
           <row>
            <entry>
              <literal><function>pg_current_xlog_insert_location</function>()</literal>
            </entry>
            <entry><type>text</type></entry>
            <entry>R�cup�ration de l'emplacement d'insertion du journal de transactions
	      courant</entry>
           </row>
           <row>
            <entry>
              <literal><function>pg_xlogfile_name_offset</function>(<parameter>location</parameter> <type>text</type>)</literal>
            </entry>
            <entry><type>text</type>, <type>integer</type></entry>
            <entry>Conversion de la cha�ne d�crivant l'emplacement du journal de
	      transactions en nom de fichier et d�calage en octets
	      dans le fichier</entry>
           </row>
           <row>
             <entry>
               <literal><function>pg_xlogfile_name</function>(<parameter>location</parameter> <type>text</type>)</literal>
             </entry>
             <entry><type>text</type></entry>
             <entry>Conversion de la cha�ne d�crivant l'emplacement du journal de
	       transactions en nom de fichier</entry>
           </row>
          </tbody>
        </tgroup>
      </table>

    <para>
      <function>pg_start_backup</function> accepte un param�tre unique, 
      label utilisateur de la sauvegarde (typiquement, le nom
      du fichier d'enregistrement de la sauvegarde). La fonction �crit un
      fichier de label dans le r�pertoire de donn�es du cluster et renvoie
      la position du d�but de la sauvegarde dans le journal de transactions
      au format texte. Ce r�sultat ne n�cessite pas qu'on s'y int�resse, mais
      il est fourni dans cette �ventualit�.
<programlisting>postgres=# select pg_start_backup('le_label_ici');
 pg_start_backup
-----------------
 0/D4445B8
(1 row)</programlisting>
    </para>

    <para>
      <function>pg_stop_backup</function> supprime le fichier de label cr�� par
      <function>pg_start_backup</function> et cr�e, � la place, un fichier
      d'historique dans l'aire de stockage des archives des journaux de transactions.
      Ce fichier contient le label pass� � <function>pg_start_backup</function>,
      les emplacements de d�but et de fin des journaux de transactions
      correspondant � la sauvegarde et les heures de d�but et de fin de la sauvegarde. La
      valeur de retour est l'emplacement du journal de la transaction de fin de
      sauvegarde (de peu d'int�r�t, l� encore). Apr�s notification de l'emplacement de fin, le
      point d'insertion courant du journal de transactions est automatiquement
      avanc� au prochain journal de transactions, de fa�on � ce que le journal
      de transactions de fin de sauvegarde puisse �tre archiv� imm�diatement pour
      terminer la sauvegarde.
    </para>

<!-- SAS 20071218 : Partie qui n'appara�t plus dans la doc PG83b4
    <para>
      Pour des d�tails sur le bon usage de ces fonctions, voir la
      <xref linkend="continuous-archiving"/>.
    </para>
-->

   <para>
    <function>pg_switch_xlog</function> bascule sur le prochain journal de
    transactions, ce qui permet d'archiver le journal courant (en supposant que
    l'archivage continu soit utilis�). La fonction retourne l'emplacement de la
    transaction finale dans le journal ainsi termin�. 
    S'il n'y a pas eu d'activit� dans les journaux de
    transactions depuis le dernier changement de journal,
    <function>pg_switch_xlog</function> ne fait rien et renvoie l'emplacement
    de fin du journal de transactions pr�c�dent.
   </para>

   <para>
    <function>pg_current_xlog_location</function> affiche la position d'�criture
    du journal de transactions en cours dans le m�me format que celui utilis�
    dans les fonctions ci-dessus. De fa�on similaire,
    <function>pg_current_xlog_insert_location</function> affiche le point
    d'insertion dans le journal de transactions courant. Le point d'insertion est la
    fin <quote>logique</quote> du journal de transactions � tout instant alors
    que l'emplacement d'�criture est la fin de ce qui a d�j� �t� �crit � partir
    des tampons internes du serveur. La position d'�criture est la fin de ce
    qui peut �tre examin� ext�rieurement au serveur. C'est habituellement
    l'information n�cessaire � qui souhaite archiver des journaux de
    transactions partiels. Le point d'insertion n'est donn� principalement que 
    pour des raisons de d�bogage du serveur. Il s'agit l� d'op�rations de
    lecture seule qui ne n�cessitent pas de droits superutilisateur.
   </para>

   <para>
    <function>pg_xlogfile_name_offset</function> peut �tre utilis�e pour
    extraire le nom du journal de transactions correspondant et le d�calage en octets
    � partir du r�sultat de n'importe quelle fonction ci-dessus. Par exemple&nbsp;:
<programlisting>postgres=# select * from pg_xlogfile_name_offset(pg_stop_backup());
        file_name         | file_offset 
--------------------------+-------------
 00000001000000000000000D |     4039624
(1 row)</programlisting>
    De fa�on similaire, <function>pg_xlogfile_name</function> n'extrait que
    le nom du journal de la transaction. Quand la position dans le journal de
    la transaction donn�e est exactement sur une limite de journal,
    les deux fonctions renvoient le nom du journal pr�c�dent.
    C'est g�n�ralement le comportement souhait� pour g�rer l'archivage
    des journaux, car le fichier pr�c�dent est le dernier � devoir �tre
    archiv�.
   </para>

    <para>
      Pour les d�tails sur le bon usage de ces fonctions, voir la
      <xref linkend="continuous-archiving"/>.
    </para>


   <para>
    Les fonctions pr�sent�es dans le <xref linkend="functions-admin-dbsize"/>
    calculent l'utilisation de l'espace disque par les objets de la base de
    donn�es.
   </para>

   <indexterm zone="functions-admin">
    <primary>pg_column_size</primary>
   </indexterm>
   <indexterm zone="functions-admin">
    <primary>pg_database_size</primary>
   </indexterm>
   <indexterm zone="functions-admin">
    <primary>pg_relation_size</primary>
   </indexterm>
   <indexterm zone="functions-admin">
    <primary>pg_size_pretty</primary>
   </indexterm>
   <indexterm zone="functions-admin">
    <primary>pg_tablespace_size</primary>
   </indexterm>
   <indexterm zone="functions-admin">
    <primary>pg_total_relation_size</primary>
   </indexterm>

   <table id="functions-admin-dbsize">
    <title>Fonctions de calcul de la taille des objets de la base de
      donn�es</title>
    <tgroup cols="3">
     <colspec colnum="1" colwidth="1.3*"/>
     <colspec colnum="2" colwidth="0.4*"/>
     <colspec colnum="3" colwidth="1.3*"/>
     <thead>
      <row>
       <entry>Nom</entry>
       <entry>Code de retour</entry>
       <entry>Description</entry>
      </row>
     </thead>

     <tbody>
      <row>
       <entry>
	    <literal><function>pg_column_size</function>(<type>any</type>)</literal>
	   </entry>
       <entry><type>int</type></entry>
       <entry>Nombre d'octets utilis�s pour stocker une valeur particuli�re
        (�ventuellement compress�e)</entry>
      </row>
      <row>
       <entry>
        <literal><function>pg_database_size</function>(<type>oid</type>)</literal>
        </entry>
       <entry><type>bigint</type></entry>
       <entry>Espace disque utilis� par la base de donn�es d'OID indiqu�</entry>
      </row>
      <row>
       <entry>
        <literal><function>pg_database_size</function>(<type>name</type>)</literal>
        </entry>
       <entry><type>bigint</type></entry>
       <entry>Espace disque utilis� par la base de donn�es de nom indiqu�</entry>
      </row>
      <row>
       <entry>
        <literal><function>pg_relation_size</function>(<type>oid</type>)</literal>
        </entry>
       <entry><type>bigint</type></entry>
       <entry>Espace disque utilis� par la table ou l'index d'OID indiqu�</entry>
      </row>
      <row>
       <entry>
        <literal><function>pg_relation_size</function>(<type>text</type>)</literal>
        </entry>
       <entry><type>bigint</type></entry>
       <entry>Espace disque utilis� par la table ou l'index de nom indiqu�.
       Le nom de la table peut �tre qualifi� par un nom de sch�ma.</entry>
      </row>
      <row>
       <entry>
        <literal><function>pg_size_pretty</function>(<type>bigint</type>)</literal>
        </entry>
       <entry><type>text</type></entry>
       <entry>Convertit une taille en octets en format interpr�table par
       l'utilisateur avec unit�s</entry>
      </row>
      <row>
       <entry>
        <literal><function>pg_tablespace_size</function>(<type>oid</type>)</literal>
        </entry>
       <entry><type>bigint</type></entry>
       <entry>Espace disque utilis� par le
       <foreignphrase>tablespace</foreignphrase> d'OID indiqu�</entry>
      </row>
      <row>
       <entry>
        <literal><function>pg_tablespace_size</function>(<type>name</type>)</literal>
        </entry>
       <entry><type>bigint</type></entry>
       <entry>Espace disque utilis� par le
       <foreignphrase>tablespace</foreignphrase> de nom indiqu�</entry>
      </row>
      <row>
       <entry>
        <literal><function>pg_total_relation_size</function>(<type>oid</type>)</literal>
        </entry>
       <entry><type>bigint</type></entry>
       <entry>Espace disque total occup� par la table d'OID indiqu�, en
       incluant les index et les donn�es TOAST�es</entry>
      </row>
      <row>
       <entry>
        <literal><function>pg_total_relation_size</function>(<type>text</type>)</literal>
       </entry>
       <entry><type>bigint</type></entry>
       <entry>Espace disque total utilis� par la table de nom indiqu�, en
       incluant les index et les donn�es TOAST�es. Le nom de la table peut �tre
       qualifi� par un nom de sch�ma</entry>
      </row>
     </tbody>
    </tgroup>
   </table>

   <para>
    <function>pg_column_size</function> affiche l'espace utilis� pour stocker toute
    valeur individuelle.
   </para>

   <para>
    <function>pg_database_size</function> et <function>pg_tablespace_size</function> acceptent
    l'OID ou le nom d'une base de donn�es ou d'un
    <foreignphrase>tablespace</foreignphrase> et renvoient l'espace disque total utilis�.
   </para>

   <para>
    <function>pg_relation_size</function> accepte l'OID ou le nom d'une table, d'un
    index ou d'une table toast et renvoie la taille en octets.
   </para>

   <para>
    <function>pg_size_pretty</function> peut �tre utilis� pour formater le r�sultat
    d'une des autres fonctions de fa�on interpr�table par l'utilisateur,
    en utilisant kB, MB, GB ou TB suivant le cas.
   </para>

   <para>
    <function>pg_total_relation_size</function> accepte l'OID ou le nom d'une table
    ou d'une table toast, et renvoie la taille en octets des donn�es et de
    tous les index et tables toast associ�es.
   </para>

   <para>
    Les fonctions pr�sent�es dans le <xref
    linkend="functions-admin-genfile"/> fournissent un acc�s natif aux fichiers
    situ�s sur le serveur. Seuls les fichiers contenus dans le r�pertoire du
    cluster et ceux du r�pertoire <varname>log_directory</varname>
    sont accessibles. On utilise un chemin relatif pour les fichiers contenus
    dans le r�pertoire du cluster et un chemin correspondant � la configuration du
    param�tre <varname>log_directory</varname> pour les journaux de trace.
    L'utilisation de ces fonctions est restreinte aux superutilisateurs.
   </para>

   <table id="functions-admin-genfile">
    <title>Fonctions d'acc�s g�n�rique aux fichiers</title>
    <tgroup cols="3">
     <colspec colnum="1" colwidth="1.3*"/>
     <colspec colnum="2" colwidth="0.4*"/>
     <colspec colnum="3" colwidth="1.3*"/>
     <thead>
      <row>
       <entry>Nom</entry>
       <entry>Code de retour</entry>
       <entry>Description</entry>
      </row>
     </thead>

     <tbody>
      <row>
       <entry>
        <literal><function>pg_ls_dir</function>(<parameter>nom_r�pertoire</parameter> <type>text</type>)</literal>
       </entry>
       <entry><type>setof text</type></entry>
       <entry>Liste le contenu d'un r�pertoire</entry>
      </row>
      <row>
       <entry>
        <literal><function>pg_read_file</function>(<parameter>nom_fichier</parameter> <type>text</type>, <parameter>d�calage</parameter> <type>bigint</type>, <parameter>longueur</parameter> <type>bigint</type>)</literal>
       </entry>
       <entry><type>text</type></entry>
       <entry>Renvoie le contenu d'un fichier texte</entry>
      </row>
      <row>
       <entry>
        <literal><function>pg_stat_file</function>(<parameter>nom_fichier</parameter> <type>text</type>)</literal>
       </entry>
       <entry><type>record</type></entry>
       <entry>Renvoie les informations concernant un fichier</entry>
      </row>
     </tbody>
    </tgroup>
   </table>

   <indexterm zone="functions-admin">
    <primary>pg_ls_dir</primary>
   </indexterm>
   <para>
    <function>pg_ls_dir</function> renvoie tous les noms contenus dans le
    r�pertoire indiqu�, � l'exception des entr�es sp�ciales
    <quote><literal>.</literal></quote> et <quote><literal>..</literal></quote>.
   </para>

   <indexterm zone="functions-admin">
    <primary>pg_read_file</primary>
   </indexterm>
   <para>
    <function>pg_read_file</function> renvoie une partie d'un fichier texte,
    d�butant au <parameter>d�calage</parameter> indiqu�, renvoyant au plus
    <parameter>longueur</parameter> octets (moins si la fin du fichier est atteinte
    avant). Si le <parameter>d�calage</parameter> est n�gatif, il est relatif � la fin
    du fichier.
   </para>

   <indexterm zone="functions-admin">
    <primary>pg_stat_file</primary>
   </indexterm>
   <para>
    <function>pg_stat_file</function> renvoie un enregistrement contenant la taille
    du fichier, les date et heure de dernier acc�s, les date et heure de
    derni�re modification, les date et heure de dernier changement de statut
    (plateformes Unix seulement), les date et heure de cr�ation (Windows
    seulement) et un bool�en indiquant s'il s'agit d'un r�pertoire. Les
    usages habituels incluent&nbsp;:
<programlisting>SELECT * FROM pg_stat_file('nomfichier');
SELECT (pg_stat_file('nomfichier')).modification;</programlisting>
   </para>

   <para>
    Les fonctions pr�sent�es dans <xref linkend="functions-advisory-locks"/> g�rent
    les verrous informatifs. Pour les d�tails sur le bon usage de ces fonctions,
    voir <xref linkend="advisory-locks"/>.
   </para>

   <table id="functions-advisory-locks">
    <title>Fonctions de verrous consultatifs</title>
    <tgroup cols="3">
     <thead>
      <row><entry>Nom</entry> <entry>Type renvoy�</entry> <entry>Description</entry>
      </row>
     </thead>

     <tbody>
      <row>
       <entry>
        <literal><function>pg_advisory_lock</function>(<parameter>key</parameter> <type>bigint</type>)</literal>
       </entry>
       <entry><type>void</type></entry>
       <entry>Obtient un verrou informatif exclusif</entry>
      </row>
      <row>
       <entry>
        <literal><function>pg_advisory_lock</function>(<parameter>key1</parameter> <type>int</type>, <parameter>key2</parameter> <type>int</type>)</literal>
       </entry>
       <entry><type>void</type></entry>
       <entry>Obtient un verrou consultatif exclusif</entry>
      </row>

      <row>
       <entry>
        <literal><function>pg_advisory_lock_shared</function>(<parameter>key</parameter> <type>bigint</type>)</literal>
       </entry>
       <entry><type>void</type></entry>
       <entry>Obtient un verrou consultatif partag�</entry>
      </row>
      <row>
       <entry>
        <literal><function>pg_advisory_lock_shared</function>(<parameter>key1</parameter> <type>int</type>, <parameter>key2</parameter> <type>int</type>)</literal>
       </entry>
       <entry><type>void</type></entry>
       <entry>Obtient un verrou consultatif partag�</entry>
      </row>

      <row>
       <entry>
        <literal><function>pg_try_advisory_lock</function>(<parameter>key</parameter> <type>bigint</type>)</literal>
       </entry>
       <entry><type>boolean</type></entry>
       <entry>Obtient un verrou consultatif exclusif si disponible</entry>
      </row>
      <row>
       <entry>
        <literal><function>pg_try_advisory_lock</function>(<parameter>key1</parameter> <type>int</type>, <parameter>key2</parameter> <type>int</type>)</literal>
       </entry>
       <entry><type>boolean</type></entry>
       <entry>Obtient un verrou consultatif exclusif si disponible</entry>
      </row>

      <row>
       <entry>
        <literal><function>pg_try_advisory_lock_shared</function>(<parameter>key</parameter> <type>bigint</type>)</literal>
       </entry>
       <entry><type>boolean</type></entry>
       <entry>Obtient un verrou consultatif partag� si disponible</entry>
      </row>
      <row>
       <entry>
        <literal><function>pg_try_advisory_lock_shared</function>(<parameter>key1</parameter> <type>int</type>, <parameter>key2</parameter> <type>int</type>)</literal>
       </entry>
       <entry><type>boolean</type></entry>
       <entry>Obtient un verrou consultatif partag� si disponible</entry>
      </row>

      <row>
       <entry>
        <literal><function>pg_advisory_unlock</function>(<parameter>key</parameter> <type>bigint</type>)</literal>
       </entry>
       <entry><type>boolean</type></entry>
       <entry>Rel�che un verrou informatif exclusif</entry>
      </row>
      <row>
       <entry>
        <literal><function>pg_advisory_unlock</function>(<parameter>key1</parameter> <type>int</type>, <parameter>key2</parameter> <type>int</type>)</literal>
       </entry>
       <entry><type>boolean</type></entry>
       <entry>Rel�che un verrou consultatif exclusif</entry>
      </row>

      <row>
       <entry>
        <literal><function>pg_advisory_unlock_shared</function>(<parameter>key</parameter> <type>bigint</type>)</literal>
       </entry>
       <entry><type>boolean</type></entry>
       <entry>Rel�che un verrou consultatif partag�</entry>
      </row>
      <row>
       <entry>
        <literal><function>pg_advisory_unlock_shared</function>(<parameter>key1</parameter> <type>int</type>, <parameter>key2</parameter> <type>int</type>)</literal>
       </entry>
       <entry><type>boolean</type></entry>
       <entry>Rel�che un verrou consultatif partag�</entry>
      </row>

      <row>
       <entry>
        <literal><function>pg_advisory_unlock_all</function>()</literal>
       </entry>
       <entry><type>void</type></entry>
       <entry>Rel�che tous les verrous consultatif d�tenus par la session en cours</entry>
      </row>

     </tbody>
    </tgroup>
   </table>

   <indexterm zone="functions-admin">
    <primary>pg_advisory_lock</primary>
   </indexterm>
   <para>
    <function>pg_advisory_lock</function> verrouille une ressource applicative
    qui peut �tre identifi�e soit par une valeur de cl� sur 64
    bits soit par deux valeurs de cl� sur 32 bits (les deux espaces
    de cl� ne se surchargent pas). Si une autre session d�tient d�j� un verrou
    sur la m�me ressource, la fonction attend que la ressource
    devienne disponible. Le verrou est exclusif. Les demandes de verrou
    s'empilent de sorte que, si une m�me ressource est verrouill�e trois fois,
    elle doit �tre d�verrouill�e trois fois pour �tre disponible par les autres
    sessions.
   </para>

   <indexterm zone="functions-admin">
    <primary>pg_advisory_lock_shared</primary>
   </indexterm>
   <para>
    <function>pg_advisory_lock_shared</function> fonctionne de fa�on identique
    � <function>pg_advisory_lock</function> sauf que le verrou peut �tre
    partag� avec d'autres sessions qui r�clament des verrous partag�s. Seules
    les demandes de verrou exclusif sont bloqu�es.
   </para>

   <indexterm zone="functions-admin">
    <primary>pg_try_advisory_lock</primary>
   </indexterm>
   <para>
    <function>pg_try_advisory_lock</function> est similaire �
    <function>pg_advisory_lock</function> sauf que la fonction n'attend pas
    la disponibilit� du verrou. Si le verrou peut �tre obtenu imm�diatement,
    et la fonction renvoie <literal>true</literal>, sinon, elle renvoie
    <literal>false</literal>.
   </para>

   <indexterm zone="functions-admin">
    <primary>pg_try_advisory_lock_shared</primary>
   </indexterm>
   <para>
    <function>pg_try_advisory_lock_shared</function> fonctionne de la m�me fa�on
    que <function>pg_try_advisory_lock</function> sauf qu'elle tente d'acqu�rir
    un verrou partag� au lieu d'un verrou exclusif.
   </para>

   <indexterm zone="functions-admin">
    <primary>pg_advisory_unlock</primary>
   </indexterm>
   <para>
    <function>pg_advisory_unlock</function> rel�che un verrou 
    exclusif pr�c�demment acquis. Elle retourne <literal>true</literal> si le
    verrou est relach� avec succ�s. Si le verrou n'�tait pas d�tenu,
    <literal>false</literal> est renvoy�i et un message d'avertissement
    SQL est �mis par le serveur.
   </para>

   <indexterm zone="functions-admin">
    <primary>pg_advisory_unlock_shared</primary>
   </indexterm>
   <para>
    <function>pg_advisory_unlock_shared</function> fonctionne de la m�me fa�on
    que <function>pg_advisory_unlock</function> sauf pour relacher un verrou
    informatif partag�.
   </para>

   <indexterm zone="functions-admin">
    <primary>pg_advisory_unlock_all</primary>
   </indexterm>
   <para>
    <function>pg_advisory_unlock_all</function> relachera tous les verrous
    informatifs d�tenus par la session courante. (Cette fonction est appel�e
    implicitement � la fin de la session, m�me si le client se d�connecte
    d'une mauvaise fa�on.)
   </para>

  </sect1>
</chapter>
