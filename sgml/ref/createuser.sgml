<!--
$Header: /var/lib/cvs/pgsql-fr/sgml/ref/createuser.sgml,v 1.9 2005/09/15 07:03:26 guillaume Exp $
PostgreSQL documentation
-->

<refentry id="APP-CREATEUSER">
 <refmeta>
  <refentrytitle id="APP-CREATEUSER-TITLE"><application>createuser</application></refentrytitle>
  <manvolnum>1</manvolnum>
  <refmiscinfo>Application</refmiscinfo>
 </refmeta>

 <refnamediv>
  <refname>createuser</refname>
  <refpurpose>définit un nouveau compte utilisateur
   <productname>PostgreSQL</productname></refpurpose>
 </refnamediv>

 <indexterm zone="app-createuser">
  <primary>createuser</primary>
 </indexterm>

 <refsynopsisdiv>
  <cmdsynopsis>
   <command>createuser</command>
   <arg rep="repeat"><replaceable>option</replaceable></arg>
   <arg><replaceable>nom_utilisateur</replaceable></arg>
  </cmdsynopsis>
 </refsynopsisdiv>
  

 <refsect1>
  <title>Description</title>
  <para>
   <application>createuser</application> cré½ un nouvel utilisateur
   <productname>PostgreSQL</productname> (ou, plus précisément, un rôle). Seuls
   les superutilisateurs et les utilisateurs disposant du droit
   <literal>CREATEROLE</literal>) peuvent créer de nouveaux utilisateurs
   <productname>PostgreSQL</productname>, donc
   <application>createuser</application> doit être appelé par quelqu'un qui peut
   se connecter en tant que superutilisateur ou en tant qu'utilisateur ayant le
   droit <literal>CREATEROLE</literal>.
  </para>

  <para>
   Si vous souhaitez créer un nouveau superutilisateur, vous devez vous
   connecter en tant que superutilisateur, et non pas en tant qu'utilisateur
   simple disposant du droit <literal>CREATEROLE</>.
   Être un superutilisateur implique la capacité de passer certaines
   vérifications de droits d'accès dans la base de données, donc cette fonction
   ne devrait pas être donnée à la légère.
  </para>

  <para>
   <application>createuser</application> est un emballage autour de la commande
   <acronym>SQL</acronym> <xref linkend="SQL-CREATEROLE"
   endterm="SQL-CREATEROLE-title">. Il n'y a pas de différence réelle entre la
   création d'utilisateurs via cet outil ou via d'autres méthodes pour accéder
   au serveur.
  </para>

 </refsect1>


 <refsect1>
  <title>Options</title>

  <para>
   <application>createuser</> accepte les arguments suivant en ligne de
   commande&nbsp;

    <variablelist>
     <varlistentry>
      <term><replaceable class="parameter">nomutilisateur</replaceable></term>
      <listitem>
       <para>
	Spécifie le nom de l'utilisateur <productname>PostgreSQL</productname>
	à créer. Ce nom doit être différent de tous les rôles existant dans
	cette installation de <productname>PostgreSQL</productname>.
       </para>
      </listitem>
     </varlistentry>  

     <varlistentry>
      <term><option>-s</></term>
      <term><option>--superuser</></term>
      <listitem>
       <para>
	Le nouvel utilisateur sera un superutilisateur.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-S</></term>
      <term><option>--no-superuser</></term>
      <listitem>
       <para>
	Le nouvel utilisateur ne sera pas un superutilisateur.
	Ceci est la valeur par défaut.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-d</></term>
      <term><option>--createdb</></term>
      <listitem>
       <para>
	Le nouvel utilisateur sera autorisé à créer des bases de données.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-D</></term>
      <term><option>--no-createdb</></term>
      <listitem>
       <para>
	Le nouvel utilisateur ne sera pas autorisé à créer des bases de données.
	Ceci est la valeur par défaut.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-r</></term>
      <term><option>--createrole</></term>
      <listitem>
       <para>
        Le nouvel utilisateur sera autorisé à créer de nouveaux rôles
        (c'est-à-dire que cet utilisateur aura le droit <literal>CREATEROLE</>).
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-R</></term>
      <term><option>--no-createrole</></term>
      <listitem>
       <para>
        Le nouvel utilisateur ne sera pas autorisé à créer de nouveaux rôles.
	Ceci est la valeur par défaut.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-l</></term>
      <term><option>--login</></term>
      <listitem>
       <para>
        Le nouvel utilisateur sera autorisé à se connecter (c'est-à-dire que le
        nom de l'utilisateur peut être utilisé comme identifiant utilisateur
        pour une connexion initiale). C'est la valeur par défaut.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-L</></term>
      <term><option>--no-login</></term>
      <listitem>
       <para>
        Le nouvel utilisateur ne sera pas autorisé à se connecter par défaut.
        (Un rôle sans droit de connexion est toujours utile comme moyen pour
        gérer les droits de la base de données.)
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-i</></term>
      <term><option>--inherit</></term>
      <listitem>
       <para>
        Le nouveau rôle héritera automatiquement des droits des rôles dont il
        est membre. C'est la valeur par défaut.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-I</></term>
      <term><option>--no-inherit</></term>
      <listitem>
       <para>
        Le nouveau rôle n'héritera pas automatiquement des droits des rôles dont
        il est membre.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-c <replaceable class="parameter">number</replaceable></></term>
      <term><option>--connection-limit <replaceable class="parameter">number</replaceable></></term>
      <listitem>
       <para>
        Configure le nombre maximum de connexions simultanées pour le nouvel
        utilisateur. La valeur par défaut est de n'avoir pas de limite.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-P</></term>
      <term><option>--pwprompt</></term>
      <listitem>
       <para>
	Si indiqué, <application>createuser</application> affichera une invite
	pour la saisie du mot de passe du nouvel utilisateur. Ceci n'est pas
	nécessaire si vous pensez ne pas utiliser l'authentification par mot de
	passe.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-E</></term>
      <term><option>--encrypted</></term>
      <listitem>
       <para>
        Crypte le mot de passe de l'utilisateur pour son stockage dans la base.
        Si cette option n'est pas spécifiée, le comportement par défaut est
        utilisé.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-N</></term>
      <term><option>--unencrypted</></term>
      <listitem>
       <para>
        Ne crypte pas le mot de passe de l'utilisateur pour son stockage dans
        la base. Si cette option n'est pas spécifiée, le comportement par
        défaut est utilisé.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-e</></term>
      <term><option>--echo</></term>
      <listitem>
       <para>
        Affiche les commandes que <application>createuser</application> génère
        et envoie au serveur.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-q</></term>
      <term><option>--quiet</></term>
      <listitem>
       <para>
        N'affiche aucune réponse.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
  </para>

  <para>
   Il vous sera demandé un nom et toute autre information manquante si elles ne
   sont pas spécifiées sur la ligne de commande.
  </para>

  <para>
   <application>createuser</application> accepte aussi les arguments suivant en
   ligne de commande pour les paramètres de connexion&nbsp;:
    
   <variablelist>
     <varlistentry>
      <term><option>-h <replaceable
	class="parameter">hôte</replaceable></></term>
      <term><option>--host <replaceable
	class="parameter">hôte</replaceable></></term>
      <listitem>
       <para>
	Spécifie le nom de l'hôte de la machine sur lequel le serveur est en
	cours d'exécution. Si la valeur commence avec un slash, elle est
	utilisée comme répertoire du socket de domaine Unix.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-p <replaceable class="parameter">port</replaceable></></term>
      <term><option>--port <replaceable class="parameter">port</replaceable></></term>
      <listitem>
       <para>
	Spécifie le port TCP ou l'extension du fichier socket de domaine Unix
	sur lequel le serveur attend des connexions.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-U <replaceable
	class="parameter">nomutilisateur</replaceable></></term>
      <term><option>--username <replaceable
	class="parameter">nomutilisateur</replaceable></></term>
      <listitem>
       <para>
        Nom utilisateur pour se connecter (pas celui à créer).
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-W</></term>
      <term><option>--password</></term>
      <listitem>
       <para>
        Force la demande de mot de passe (pour se connecter au serveur, pas le
	mot de passe du nouvel utilisateur).
       </para>
      </listitem>
     </varlistentry>
   </variablelist>
  </para>
 </refsect1>


 <refsect1>
  <title>Environnement</title>

  <variablelist>
   <varlistentry>
    <term><envar>PGHOST</envar></term>
    <term><envar>PGPORT</envar></term>
    <term><envar>PGUSER</envar></term>

    <listitem>
     <para>
      Paramètres de connexion par défaut
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </refsect1>


 <refsect1>
  <title>Diagnostiques</title>

  <para>
   En cas de problèmes, voir <xref linkend="SQL-CREATEROLE"
   endterm="sql-createrole-title"> et <xref linkend="APP-PSQL"> pour des
   discussions sur les problèmes potentiels et les messages d'erreur. Le
   serveur de la base de données doit être en cours d'exécution sur l'hôte
   cible. De plus, tout paramètrage de connexion par défaut et toute variable
   d'environnement utilisée par le client de la bibliothèque
   <application>libpq</application> s'appliquera.
  </para>

 </refsect1>


 <refsect1>
  <title>Exemples</title>

   <para>
    Pour créer un utilisateur <literal>joe</literal> sur le serveur de bases de
    données par défaut&nbsp;:
<screen>
<prompt>$ </prompt><userinput>createuser joe</userinput>
<computeroutput>Shall the new role be a superuser? (y/n) </computeroutput><userinput>n</userinput>
<computeroutput>Shall the new role be allowed to create databases? (y/n) </computeroutput><userinput>n</userinput>
<computeroutput>Shall the new role be allowed to create more new roles? (y/n) </computeroutput><userinput>n</userinput>
<computeroutput>CREATE USER</computeroutput>
</screen>
   </para>

   <para>
    Pour créer le même utilisateur <literal>joe</literal> en utilisant le
    serveur <literal>eden</>, port 5000, en ï¿½itant les demandes et en jetant
    un &oelig;il à la commande sous-jacente&nbsp;:
<screen>
<prompt>$ </prompt><userinput>createuser -h eden -p 5000 -S -D -R -e joe</userinput>
<computeroutput>CREATE ROLE joe NOSUPERUSER NOCREATEDB NOCREATEROLE INHERIT LOGIN;</computeroutput>
<computeroutput>CREATE ROLE</computeroutput>
</screen>
   </para>

   <para>
    Pour créer l'utilisateur <literal>joe</literal> en tant que
    superutilisateur et pour lui affecter immédiatement un mot de passe&nbsp;:
<screen>
<prompt>$ </prompt><userinput>createuser -P -s -e joe</userinput>
<computeroutput>Enter password for new role: </computeroutput><userinput>xyzzy</userinput>
<computeroutput>Enter it again: </computeroutput><userinput>xyzzy</userinput>
<computeroutput>CREATE ROLE joe PASSWORD 'xyzzy' SUPERUSER CREATEDB CREATEROLE INHERIT LOGIN;</computeroutput>
<computeroutput>CREATE ROLE</computeroutput>
</screen>
    Dans l'exemple ci-dessus, le nouveau mot de passe n'est pas réellement
    affiché lorsqu'il est saisi mais nous l'affichons ici pour plus de clareté
    Néanmoins, le mot de passe <emphasis>apparaîtra</> dans la commande affichée
    comme illustraté &mdash; donc, n'utilisez pas l'option <literal>-e</>
    lorsque vous affectez un mot de passe si quelqu'un d'autre peut voir votre
    écran.
   </para>
 </refsect1>


 <refsect1>
  <title>Voir aussi</title>

  <simplelist type="inline">
   <member><xref linkend="app-dropuser"></member>
   <member><xref linkend="sql-createrole" endterm="sql-createrole-title"></member>
   <member>Variables d'environnement (<xref linkend="libpq-envars">)</member>
  </simplelist>
 </refsect1>

</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../reference.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:"/usr/lib/sgml/catalog"
sgml-local-ecat-files:nil
End:
-->